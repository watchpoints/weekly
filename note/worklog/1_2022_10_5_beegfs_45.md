


python3 /opt/beegfs/move/src/beemove.py -c //etc/beegfs/move/beegfs_move.conf


/root/src/vdbench/vdbench -f /root/src/vdbench/examples/filesys/create_files


cat /mnt/beegfs/case1/.temp_beegfs_migration/query.8 /mnt/beegfs/case1/.temp_beegfs_migration/query.6 /mnt/beegfs/case1/.temp_beegfs_migration/query.all_in_one.part1 /mnt/beegfs/case1/.temp_beegfs_migration/query.all_in_one.part6 /mnt/beegfs/case1/.temp_beegfs_migration/query.all_in_one /mnt/beegfs/case1/.temp_beegfs_migration/query.all_in_one.part3 /mnt/beegfs/case1/.temp_beegfs_migration/query.2 /mnt/beegfs/case1/.temp_beegfs_migration/query.all_in_one.part0 /mnt/beegfs/case1/.temp_beegfs_migration/query.9 /mnt/beegfs/case1/.temp_beegfs_migration/query.all_in_one.part5 /mnt/beegfs/case1/.temp_beegfs_migration/query.4 /mnt/beegfs/case1/.temp_beegfs_migration/query.all_in_one.part7 /mnt/beegfs/case1/.temp_beegfs_migration/query.5 /mnt/beegfs/case1/.temp_beegfs_migration/query.7 /mnt/beegfs/case1/.temp_beegfs_migration/query.3 /mnt/beegfs/case1/.temp_beegfs_migration/query.all_in_one.part2 /mnt/beegfs/case1/.temp_beegfs_migration/query.1 /mnt/beegfs/case1/.temp_beegfs_migration/query.all_in_one.part4 /mnt/beegfs/case1/.temp_beegfs_migration/query.0>/mnt/beegfs/case1/.temp_beegfs_migration/query.all_in_one


快慢池切换验证，发现如下问题
1. 快慢池思想思路和当初讨论不一致
2. 从日志观看达不到从从快池--切换到 慢池 ，从慢池切换到快池状态级别转换过程。
3. 测试结果，需要修改成不允许用户自己配置



/usr/lib64/mpich/bin/mpirun -n  8 --host 10.141.162.45,10.141.162.40 echo "hi"


.tcp_keepalive_intvl = 75
net.ipv4.tcp_keepalive_probes = 9
net.ipv4.tcp_keepalive_time = 1200
当keepalive起用的时候，TCP发送keepalive消息的频度。缺省是2小时

	wangyifeizz
	cocacola1!
## 45机器代码测试

python3 /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/src/beemove.py -c /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/beegfs_move.conf_1
python3 /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/src/beemove.py -c /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/beegfs_move.conf_2
:/usr/lib64/mpich/bin/mpirun -n 8 --host 10.141.162.45 python3 /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/src/mpirun_master_slave.py -c /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/beegfs_move.conf_1


/usr/lib64/mpich/bin/mpirun -n 1; --host 10.141.162.45,10.141.162.21 python3 /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/src/mpirun_master_slave.py -c /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/beegfs_move.conf_1

ssh-keygen -t rsa
ssh-copy-id 10.141.162.45
ssh-copy-id 10.141.162.21
inspuR@123



netstat -an | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}'

# 代码位置
D:\doc\部署文档\beegfs_move\rpmbuild\SOURCES\beegfs-move-utils-1.0\
fio --ioengine=libaio --direct=1 --thread --rw=write --iodepth=64 --numjobs=1 --size=20G --bs=1024k --time_based=1 --runtime=600 --group_reporting --name=fio-3-7  -filename=/dev/nvme1n1     用这个命令？

# beegf

 beegfs-ctl --serverstats --interval=5 --perserver --nodetype=storage
 systemctl status beegfs-client
 
  beegfs-ctl
 beegfs-ctl --liststoragepools
# create data

/root/src/vdbenchvdbench -f /root/src/vdbench/examples/filesys/create_files

python3 /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/src/beemove.py -c /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/beegfs_move.conf  
python3 /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/src/beemove.py -c /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/beegfs_move.conf_1
python3 /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/src/beemove.py -c /root/rpmbuild/SOURCES/beegfs-move-utils-1.0/beegfs_move.conf_2

tail -f /var/log/beegfs-move/beegfs_migration_1.log |grep "step:thead::times"

systemctl start beemove
systemctl status beemove


pip3 uninstall APScheduler
pip3 uninstall mpi4py
pip3 install APScheduler

python3 /opt/beegfs/move/src/beemove.py -c /etc/beegfs/move/beegfs_move.conf

tail -f /var/log/beegfs-move/beegfs_migration.log\

export PATH=$PATH:/usr/lib64/mpich/bin/
export LD_LIBRARY=$LD_LIBRARY:/usr/lib64/mpich/
rpm -ivh /root/rpmbuild/RPMS/noarch/beegfs-move-utils-1.0-1.el8.noarch.rpm


watch -n 5 beegfs-ctl --storagebench --alltargets --status

