
## 第一斧：看别人怎么写得

开源数据库OceanBase代码导读 --(18) RPC框架

    主要描述的 observer的消息处理框架


RPC框架

observer有两个监听端口，分别对应于mysql协议和obrpc协议

/app/oceanbase/build_debug/src/observer/observer -h
-p,--mysql_port PORT     mysql port
-P,--rpc_port PORT       rpc port



- libeasy:libeasy的代码位于 deps/easy/ 


![包格式
](https://pic2.zhimg.com/v2-2aa1d9bf8db2317e92100fa9f8f44f1d_b.jpg)

obrpc协议的包，都是ObRpcPacket类型

MySQL协议的请求包分为多个类型，都派生自ObMySQLPacket

![包格式
](https://pic4.zhimg.com/v2-21d7cdf30af13504d6a6d2c8e5213c0f_b.jpg)



对于obrpc协议来说，RPC框架还提供了方便的客户端stub