4. tidbä»£ç å»¶è¿Ÿ
5.obä»£ç æ£€æŸ¥

advice in my opinion: the caller of get_compression_file_name allocate and free the memory itself. get_compression_file_name do not allocate the memory, it only checks whether the capacity of the input buffer is enough


1.srså¼€å‘ç¯å¢ƒå•æµ‹æ­£å¸¸ã€‚
2. srs å‹æµ‹è„šæœ¬å®ç°å®Œæˆ
3. srs4.0 æ–°ç‰¹æ€§ç ”ç©¶
4. srså»¶è¿Ÿä¼˜åŒ–å®šä½40%
1638436056460
1638436057
3. åˆ·é¢˜åºŸå¢Ÿ
4. tidbä»£ç å»¶è¿Ÿ
5.obä»£ç æ£€æŸ¥
1638848495987
1638848495

1638848706150
1638848721162

get_compression_file_name 

it only checks whether the capacity of the input buffer is
template <class _Ty>
struct remove_reference {
    using type                 = _Ty;
    using _Const_thru_ref_type = const _Ty;
	
	
};


çœ‹å…¬å¼€è¯¾æµç¨‹
1 ä¸å¿«è¿› 




type Raft struct {
	id uint64
	// ä»»æœŸç¼–å·
	Term uint64
	// é€‰ä¸¾äº†è°å½“ leaderï¼ˆæŠ•ç¥¨ç»™äº†è°ï¼‰
	Vote uint64

	// the log
	RaftLog *RaftLog

	// log replication progress of each peers
	Prs map[uint64]*Progress

	// this peer's role
	State StateType

	// votes records
	votes map[uint64]bool

	// msgs need to send
	msgs []pb.Message

	// the leader id
	Lead uint64

	// heartbeat interval, should send
	heartbeatTimeout int
	// baseline of election interval
	electionTimeout int
	// number of ticks since it reached last heartbeatTimeout.
	// only leader keeps heartbeatElapsed.
	heartbeatElapsed int
	// Ticks since it reached last electionTimeout when it is leader or candidate.
	// Number of ticks since it reached last electionTimeout or received a
	// valid message from current leader when it is a follower.
	electionElapsed int

	// leadTransferee is id of the leader transfer target when its value is not zero.
	// Follow the procedure defined in section 3.10 of Raft phd thesis.
	// (https://web.stanford.edu/~ouster/cgi-bin/papers/OngaroPhD.pdf)
	// (Used in 3A leader transfer)
	leadTransferee uint64

	// Only one conf change may be pending (in the log, but not yet
	// applied) at a time. This is enforced via PendingConfIndex, which
	// is set to a value >= the log index of the latest pending
	// configuration change (if any). Config changes are only allowed to
	// be proposed if the leader's applied index is greater than this
	// value.
	// (Used in 3A conf change)
	PendingConfIndex uint64
}

çœ‹è§†é¢‘æµç¨‹ï¼š
1 å…³é—­å¾®ä¿¡ done
2 ä¸å‰åˆ© ä¸å‰åˆ©done


ä¼šæ§ï¼š
124.250.120.86 	120.133.69.86
124.250.120.75 	120.133.69.75
srs
124.250.120.81	120.133.69.81
124.250.120.82	120.133.69.82
124.250.120.83	120.133.69.83

ä¸‹å‘¨lvså˜æ›´è®¡åˆ’


æ­¥éª¤1ï¼šä¿®æ”¹ä¼šæ§ dns_down_config.inié…ç½® å­—æ®µ é‡å¯æœåŠ¡
 OUTIP
124.250.120.86 	120.133.69.86
124.250.120.75 	120.133.69.75

æ­¥éª¤2ï¼šä¿®æ”¹srs.confé…ç½® é‡å¯æœåŠ¡

external_ip 124.250.120.83:1935;

124.250.120.81	120.133.69.81
124.250.120.82	120.133.69.82
124.250.120.83	120.133.69.83



çœ‹è§†é¢‘æµç¨‹
1 å…¨å±
2 è‡ªå·±ç«™èµ·æ¥


/////////////////////////

ä½ é€‰æ‹©è®°äº‹æœ¬ä»£æ›¿å°è±¡ç¬”è®°ã€‚è¿™å†³å®šæ¶ˆè€—ä½ 3å¹´æ—¶é—´ã€‚
ç¬”è®°æœ¬+github è‡ªåŠ¨åŒæ­¥ å¯ä»¥è€ã€‚


æ‰“å¼€å°è±¡ç¬”è®°æ¶ˆè€—å·¨å¤§èƒ½åŠ› å› æ­¤ ç—›è‹¦äº‹æƒ…ä¸é•¿ä¹…
å› æ­¤ä½ é€‰æ‹©è®°äº‹æœ¬ä»£æ›¿å°è±¡ç¬”è®°ã€‚
fork done


åˆ·é¢˜ï¼š
å¿˜è®°è¿‡å»çš„ç­”æ¡ˆ


åœç•™åœ¨å†…å¿ƒç—›è‹¦ä¸­ï¼Œæ ¹æœ¬æ²¡æœ‰å»åˆ†æé¢˜ç›®ï¼Œå®Œå…¨ä¹±äº† é¢˜ç›®æ˜¯ä»€ä¹ˆæˆ‘æ ¹æœ¬ä¸çŸ¥é“ã€‚

1 å®Œå…¨åœç•™å†…å¿ƒæ‡‚ç—›è‹¦ï¼Œä¸è¡Œäº‹ï¼Œå®Œå…¨åœç•™å†…å¿ƒç—›è‹¦ä¸å»å¿ƒåŠ¨ã€‚
1 åœç•™ä½ ç»™æ„Ÿè§‰ä¸åˆ†æé¢˜ç›®ï¼Œè‡ªå·±æƒ³å¾ˆéš¾ï¼Œæƒ³æƒ³ç©å»åœç•™è¿‡ç¨‹ä¸­ã€‚

3 æˆ‘æ„Ÿåˆ°åˆ·é¢˜è¦é—®é¢˜ï¼Œæ€è·¯ä¸åæœè£…ï¼Œå› æ­¤ä½ å¤§è„‘è®©ä½ åšåšå…¶ä»–äº‹æƒ…ï¼Œ å‘å“¦å§ä¸ï¼Œæˆ‘å°±åœ¨è¿™é‡Œ æ—¶é—´ æ—¶é—´ä¸å¤Ÿé—®é¢˜å—ï¼Ÿ


è´­ä¹°å…ƒæ—¦çš„ç¥¨

	StateFollower StateType = iota
	StateCandidate
	StateLeader
	
ç”µå­ç§‘æŠ€å¤§å­¦åˆ†å¸ƒå¼å­˜å‚¨ä¸è®¡ç®—å®éªŒå®¤æ–°ç”Ÿè®­ç»ƒè®¡åˆ’
https://github.com/CDDSCLab/training-plan

è¿™ä¸ªå­¦æ ¡çœŸå¥½ï¼Œç”¨è¿‡çš„tinykvï¼Œæˆ‘æ€ä¹ˆæ²¡é‡åˆ°è¿‡


TiDB Hackathon æ­£åœ¨é›†ç»“æˆ˜é˜ŸğŸ¤¼â€â™‚ï¸ï¼
å¥–é‡‘æ± è¶… 40wï¼Œæˆ‘ç®—äº†ä¸‹å¤§æ¦‚ 30 å¤šæ”¯é˜Ÿä¼æœ‰æœºä¼šè·å¥–ï¼Œè·å¥–å‡ ç‡è¶…é«˜ï¼
èµ›é“è®¾ç½®ä¹Ÿè¶…å¼€æ”¾ï¼Œä»»ä½• Cool idea éƒ½å¯ä»¥æ¥æŒ‘æˆ˜ï¼
çœ‹ç€èº«è¾¹å€’è…¾å†…æ ¸çš„ã€æå¤§æ•°æ®çš„ã€æŠ˜è…¾äº‘çš„ï¼Œè¿äº§å“å’Œå‰ç«¯éƒ½æ‰¾åˆ°é˜Ÿå‹äº†ï¼Œæˆ‘â€¦â€¦
å¦‚æœä½ ä¹Ÿæƒ³æŠ¥åï¼Œé˜Ÿä¼è¿˜ç¼ºä¸€ä¸ªæŒ‚ä»¶ï¼Œè¯·åŠ¡å¿…å¸¦ä¸Šæˆ‘ï¼å¿«ä¸Šè½¦
https://tidb.io/events/hackathon2021?utm_source=02   è¦ä¸ç»„é˜Ÿå½“ä¸ªç‚®ç°å»ï¼Ÿ
.gome.com.cn:1935/live/4704934886375444_1640240586870\",\"end_time\":\"1640240592771\",\"name\":\"Wangchuanyi\",\"state\":\"2\"}}","senderId":77070356,"senderType":0,"senderName":"Wangchuanyi","isCounted":0}
2021-12-23 14:23:13,028: INFO meiban_group_zhibo : meiban_group_zhibo: connect ID: 2 conferInfo: 6050283e6207470991de8a3311d


issue09 åœ¨appå´©æºƒçŠ¶æ€ä¸‹ï¼Œæ— æ³•å‘é€ç¦»å¼€é€šçŸ¥

 connect to server error
 
 connect to server error. ip 10.115.1.118 port 8081 ret 1018
 
 
Fear can be expelled with knowledge.
ç”¨çŸ¥è¯†æˆ˜èƒœææƒ§ã€‚

{"serverip":"10.115.90.104","serverpport":"1935","serverdomain":"bj","serverrole":"edge"}



{"serverip":"120.133.69.81","serverpport":"1935","serverdomain":"bj","serverrole":"edge"}
{"serverip":"120.133.69.82","serverpport":"1935","serverdomain":"bj","serverrole":"edge"}
{"serverip":"120.133.69.83","serverpport":"1935","serverdomain":"bj","serverrole":"edge"}


ä½ æƒ³æƒ³ä½ å¯ä»¥çš„ã€‚å¼€å§‹ã€‚
ä½ æƒ³æƒ³ä½ å¯ä»¥çš„ï¼Œå¼€å§‹ã€‚
ä½ æƒ³æƒ³ä½ å¯ä»¥çš„ã€‚å¼€å§‹ã€‚
ä½ çº¿æ€§å¯ä»¥å…³é—­çš„ï¼Œæˆ‘è¡ŒåŠ¨å…³é—­è¿™è‘£ä¼Ÿ

ä½ å·²ç»çŸ¥é“æï¼Œå¹¶ä¸”è§‰é†’ï¼Œä½†æ˜¯æ‹–å»¶5åˆ†é’Ÿæ‰§è¡Œï¼Œè¿˜æ˜¯é©¬ä¸Šæ‰§è¡Œï¼Œé©¬ä¸Šæ‰§è¡Œ æˆ‘é‡‡å–ç”˜æ¯”

ä½ å·²ç»çŸ¥é“è¾½ï¼Œå¹¶æ¹¿ç–¹å‡†å¤‡ï¼Œä½†æ˜¯ç±³è¡ŒåŠ¨ä¸æ‰§è¡Œï¼Œä½ å§å§é—®è¡ŒåŠ¨ä¸Šæ‰§è¡Œï¼Œè™½ç„¶éš¾å—ï¼Œä½†æ˜¯è¿™ä¸ªæ­£ç¡®çš„äº‹æƒ…ã€‚
æ²¡äº‹æ— èŠä½ æ‰“å¼€ä¹Ÿæ²¡å—ï¼Ÿæ²¡äº‹æ— èŠä½ æ‰“å¼€qqå—ä¸æœ‰ç‹ æ¯’å¶ç”³è¯·ä½†æ˜¯ä½ å»åš


 
 
 
 http://wiki.intra.gomeplus.com/pages/viewpage.action?pageId=105649003
 obå¼€æºå­¦ä¹ ï¼š
 
å…³é—­å¾®ä¿¡ --çœ‹åˆ°æ¡Œé¢--ç‚¹å‡»é€€å‡ºå¾®ä¿¡ ok

ä½ è½¬è´¦åˆ·ä¸€é¢˜ï¼Œä½ è½¬è´¦åˆ·åŒä¸€å¤©
ä½ æ‰“å¼€èŠå¤©å·¥å…·éœ€è¦5åˆ†é’Ÿæ¢å¤æ‰å¯ä»¥ã€‚
ä½ æ‰“å¼€äº†èŠå¤©å·¥å…·ï¼Œéœ€è¦5åˆ†é’Ÿæ¢å¤æ‰å¯ä»¥ã€‚
ä½ æ‰“å¼€äº†èŠå¤©å·¥å…·ï¼Œéœ€è¦5åˆ†é’Ÿæ¢å¤æ‰å¯ä»¥çš„ã€‚
ä½ é¼“ç§‹åˆ·æ— æ•°é¢˜ç›®ï¼Œä½ ç°åœ¨å¿˜è®°äº†ï¼Œä½ éœ€è¦æ¢å¤ï¼Œä¼šè®®è¿™äº›é¢˜ç›®
ä½ è¿‡å»Shaunæ— æ•°ä¸ªé¢˜ç›®ï¼Œä½ ç°åœ¨å¿˜è®°äº†ï¼Œä½ ç°åœ¨éœ€è¦çš„æ˜¯æ¢å¤è¿™äº›é¢˜ç›®ã€‚ä½ å·²ç»å¿˜è®°äº†ã€‚è¿™äº›é¢˜ç›®æ˜¯ä»€ä¹ˆã€‚
ä¼šé—®ç–‘é—®ã€‚ä½ å¿˜è®°å¾ˆå¤šä¼šé—®ç–‘é—®é¢˜ç›®ã€‚
å¾ˆç®€å•é¢˜ç›®ï¼Œä½ å¿˜è®°äº†ï¼Œè´Ÿè½½çš„è·µè¸çš„é¢˜ç›®ï¼Œä½ å¿˜è®°äº†ã€‚

ä½ è¿‡å»å¿˜è®°ä½ åšå¾ˆå¤šé¢˜ç›®-ä½ æ€ä¹ˆåšä½ æƒ³æƒ³å‘ï¼Œæ…¢çœ‹æ¢å¤ï¼Œä½ å…ˆæ ¹æœ¬ä¸æ¸…æ¥šçŠ¶æ€ï¼Œè¯´ç»“æœæ ¹æœ¬ä¸è¡Œçš„ã€‚

ä½ è¿‡å»åšå¾ˆå¤šé¢˜ç›®ï¼Œä½ ç°åœ¨ä¼šè®®èµ·æ¥è¿™äº›é¢˜ç›®ï¼Œä½ ç°åœ¨åšçš„å°±æ˜¯æƒ³èµ·æ¥ï¼Œå¹¶ä¸”å§æŠŠä»–ä»¬ä½œå¯¹ï¼Œåšå¥½ï¼Œ
ä½ ç°åœ¨çŠ¶æ€ä¸å¥½-ã€‹ 2 ä½ è¡Œä¸ºåœç•™è£…ä¸ª5å¹´ä¸æ„ 3 ç»§ç»­æ˜¨å¤©ã€‚
å½“çŠ¶æ€ä¸å¥½æ—¶å€™ï¼Œä½ åšç»§ç»­åšé¢˜
å½“ä¸»åŠ¨æä¸å¥½æ—¶å€™ï¼Œä½ éœ€è¦åšç»§ç»­åšé¢˜ã€‚
ä½ æƒ³æƒ³ä½ è¿‡å»åˆ·æ— æ•°é¢˜ç›®ä¸ä¼šç™½åˆ·ï¼Œä½ ç°åœ¨å¿˜è®°ï¼Œä½ é‡æ–°æ¡èµ·æ¥ï¼Œè¿‡å»æ€ä¹ˆåšçš„ï¼Œä½ ç‰µèµ·æ¥æ¥ã€‚

å­¦ä¹ ä»0å¼€å§‹ï¼Œä¹‹å‰åšå¤šå°‘é¢˜å…¨éƒ¨å¿˜è®°ï¼Œä»0å¼€å§‹åˆ·é¢˜ã€‚+1
æ€æƒ³ï¼šå¾ˆç—›è‹¦å’Œéš¾å—--è¡Œä¸ºï¼šç»§ç»­ä»æ€è·¯å¼€å§‹ï¼Œä½ ä»åˆ†ææ€è·¯å¼€å§‹ï¼Œåˆ†æé—®é¢˜è§£é”---ç»§ç»­åˆ†æåšé¢˜



1 ä½ æ‰“å¼€äº†å¾®ä¿¡ä¿¡æ¯ï¼Œå†…å¿ƒç—›è‹¦è¿™ä¸ªæ— æ³•æ”¹å˜ ï¼Œç»§ç»­å¸¦é‡Œé¢ç»§ç»­ç—›è‹¦
2. æ­¢æŸã€‚ä½ é€‰æ‹©å…³é—­å¾®ä¿¡ä¸åœ¨èŠå¤©ç»§ç»­ç—›è‹¦ã€‚
3 æœ€åè½¬æ¢ç‚¹å‡»xæŒ‰é’®ï¼ŒxæŒ‰é’®å°±æ˜¯ç—›è‹¦ä¸ç—›è‹¦å¼€å…³ã€‚ã€‚


4 ä»»åŠ¡ä¸å®Œæˆä¸æ‰“å¼€èŠå¤©å·¥å…·ï¼Œè¿™å°±å¸Œæœ› 5ç§’è¡ŒåŠ¨

5  è¿™ä¸ªæ²¡çœ‹å®Œï¼Œä¸çœ‹å…¶ä»–çš„å›¾æ ‡
6 é¢˜ç›®åšä¸å‡ºå¯ä»¥ç†è§£ï¼Œä½†æ˜¯æ‰“å¼€å¾®ä¿¡uå¯¹çš„ï¼Œå› æ­¤åˆ·é¢˜ å°±æ˜¯ä¸æ‰“å¼€å¾®ä¿¡ï¼Œåˆ·é¢˜å°±æ˜¯ä¸æ‰“å¼€å¾®ä¿¡ è¿™ä¸ªå¯ä»¥åšåˆ°ã€‚
7 åŠ å…¥ä½ ä¹‹å‰å¤šå¾ˆå¤šæ¬¡ï¼Œç°åœ¨è¿˜è¿˜èƒ½åšå¤„ç†å—ï¼Ÿè¿˜èƒ½ç»§ç»­å®Œæˆä½ è®¤ä¸ºå—ï¼Ÿä¸èƒ½ä¸è¯´æ„Ÿè§‰ï¼Œä»0å¼€å§‹å­¦ä¹ ï¼Œä½ æ³¨æ„è¿‡å»çœ‹è¿‡ï¼Œä¸æ˜¯æœ‰æ²¡æœ‰æƒ³å¹¶ä¸è¿™ä¸ªé—®é¢˜äº‹æƒ…æœ¬èº«


----

1. è€ƒå‹¤æ•´ç† é©¬ä¸Šå»åš done
2. 
1 ä¼šæ§æœåŠ¡ï¼šå®šä¹‰æ¸…æ™°çš„3ä¸ªæ¥å£å’Œå®ç°ï¼Œè¾“å‡º æµç¨‹å›¾
2 åª’ä½“æœåŠ¡ï¼šæä¾›é›†ç¾¤è®¾è®¡å›¾å’Œsrsé…ç½®ä¸Šçº¿å®Œæˆã€‚
3 ä¼šæ§æœåŠ¡ä¸appå®Œæˆæµ‹è¯•é€šè¿‡ï¼š
4.ä¼šæ§æœåŠ¡ä¸ï¼šå®šä¹‰æ¸…æ™°çš„æ¥å£ï¼Œå¹¶ä¸”è”è°ƒé€šè¿‡ã€‚
5ã€‚æä¾›å¯è§‚å¯Ÿçš„ç»Ÿè®¡æŠ¥è¡¨å’Œæµé‡é¢„è­¦

1 ä¼šæ§æ¶ˆæ¯è¦†ç›–è¿›å±•ï¼šé‡æ–°è®¨è®ºæµç¨‹å®Œæˆã€‚åœ¨å¼€å‘ä¸­ï¼Œé¢„è®¡æœ¬å‘¨å¯ä»¥æµ‹è¯•
2.ä¸appå®Œæˆè”è°ƒã€‚ä¼˜åŒ–ç»†èŠ‚ä¸­ã€‚
3. ç”Ÿäº§éƒ¨ç½²æ¶æ„è¯„å®¡ä¸ç½‘ç»œæµé‡é¢„æµ‹å®Œæˆã€‚é—ç•™éœ€è¦æä¾›å‹æµ‹æ•°æ®ã€‚
4. è¿è¥ç›‘æ§ç³»ç»Ÿ å®Œæˆ100%,æ•°æ®é‡‡é›†åˆ°kafaï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®ç•Œé¢æŸ¥çœ‹ã€‚


1.
2 å‹æµ‹srsï¼Œå‘ç°å†å²coreé—®é¢˜ã€‚
3.äº†è§£srsä»£ç 
5.srs è¿è¥ï¼šåˆ‡æ¢vipæœåŠ¡ã€‚



1 é™æµæ–¹æ¡ˆå®Œæˆã€‚åç»­è¿›è¡Œå‹æµ‹ã€‚
 min(æœºæˆ¿åˆ†é…ï¼Œsrsæœ€å¤§å¸¦å®½ï¼Œä¸šåŠ¡è¯„ä¼°åœ¨çº¿äººæ•°)
2.srs vipåœ°å€å˜æ›´åˆ‡æ¢å®Œæˆã€‚
3 æ‰©å±•åŠŸèƒ½ï¼šåˆ©ç”¨srsç¾¤ç›´æ’­å¯¹è§†é¢‘ç›‘æ§ï¼Œå½•åˆ¶ ç ”ç©¶60
4 srså·²ç»éƒ¨ç½²å®Œæˆã€‚é»˜è®¤é‡‡ç”¨å¤§æ—æœºæˆ¿ã€‚




1. è§£å†³å…¬å¸å‡çº§ç½‘ç»œé€ æˆåŸŸåæ— æ³•ç½‘ç»œé—®é¢˜ã€‚
2. è§£å†³è´Ÿè½½å‡è¡¡å…¥å£å‡çº§éœ€è¦å¹³æ»‘è¿ç§»é—®é¢˜ã€‚
3. è®¨è®ºéƒ¨åˆ†æœºå‹å¶å°”å¤±è´¥çš„æ–¹æ¡ˆ
4. å¢åŠ è´Ÿè½½æµ‹è¯•ä»ä¸»ä»æ¨¡å¼å‡çº§è´Ÿè½½æ¨¡å¼. 80%ã€‚


appæ–­ç½‘é‡è¿

æ–¹æ³•1. appæ£€æŸ¥æ–­ç½‘ï¼Œé©¬ä¸Šå…³é—­ï¼ˆä¸è°ƒç”¨ç¦»å¼€ä¼šè®®ï¼‰ï¼Œç„¶åé‡æ–°æ‰‹å…¥ä¼šã€‚æœåŠ¡å™¨ä¿è¯ã€‚

æ–¹æ³•2. å¤„ç†å¥½ tcpè‡ªåŠ¨é‡æ–°è¿æ¥æƒ…å†µã€‚
  æœåŠ¡å™¨ä¸å‘é€ï¼Œæˆ–è€…å®¢æˆ·ç«¯ä¸å¤„ç† ï¼Œéœ€è¦æµ‹è¯•æ‰çŸ¥é“

1 ä¼‘æ¯5åˆ†é’Ÿ
2 ç®—æ³•ä¸€é¢˜
3 çœ‹ä¸€æ¬¡å¾®ä¿¡ ä¼‘æ¯15åˆ†é’Ÿï¼Œçœ‹10æ¬¡å°±å¯ä¸ç®¡ä¸é—®äº†å—ï¼Ÿ
3 çœ‹ä¸€æ¬¡å¾®ä¿¡ ä¼‘æ¯15åˆ†é’Ÿ
3 çœ‹ä¸€æ¬¡å¾®ä¿¡ ä¼‘æ¯15åˆ†é’Ÿ
3 çœ‹ä¸€æ¬¡å¾®ä¿¡ ä¼‘æ¯15åˆ†é’Ÿ

4 ç”¨10åˆ†é’Ÿçœ‹åŸºç¡€çŸ¥è¯† ç„¶å20åˆ†çœ‹ç®—æ³•ã€‚

5 


1. ä¿è¯æ­£å¸¸å…¥ä¼šæ¥é€šç‡99.99%
2. ä¿è¯srsæœåŠ¡è¿è¡Œæ­£å¸¸99.99%
3. æä¾›ç›‘æ§ï¼Œè¿è¥å’Œå‘Šè­¦å…¥å£ã€‚
4. æä¾›è´Ÿè½½å‡è¡¡ç­‰æ¶æ„è°ƒæ•´æ–¹æ¡ˆã€‚


åŠå¹´å¤ç›˜ã€‚
1. è§£å†³å…¬å¸å‡çº§ç½‘ç»œé€ æˆåŸŸåæ— æ³•ç½‘ç»œé—®é¢˜ã€‚
2. è§£å†³è´Ÿè½½å‡è¡¡å…¥å£å‡çº§éœ€è¦å¹³æ»‘è¿ç§»é—®é¢˜ã€‚
3. è®¨è®ºéƒ¨åˆ†æœºå‹å¶å°”å¤±è´¥çš„æ–¹æ¡ˆ
4. å¢åŠ è´Ÿè½½æµ‹è¯•ä»ä¸»ä»æ¨¡å¼å‡çº§è´Ÿè½½æ¨¡å¼. 80%ã€‚


1. è§£å†³å…¬å¸ç½‘ç»œåŸŸåç­‰é—®é¢˜

1. å®Œæˆä»ç½‘ç»œåŸŸå,é¿å…å•ç‚¹æ•…éšœä»æé«˜ç”¨æˆ·æ¥é€šç‡ã€‚
2. ä¿è¯èŠ‚å‡æ—¥å€¼ç­ï¼Œå•æµ‹ä¿è¯æœåŠ¡å¯ç”¨æ€§
3. è§£å†³è®¨è®ºéƒ¨åˆ†æœºå‹å¶å°”å¤±è´¥çš„æ•…éšœã€‚
4. å¢åŠ è´Ÿè½½æµ‹è¯•ä»ä¸»ä»æ¨¡å¼å‡çº§è´Ÿè½½æ¨¡å¼.



1.ç¾¤ç›´æ’­æ”¯æŒæœ€å¤§ç¾¤ ä¾‹å¦‚300äººåŒæ—¶åœ¨çº¿ç›´æ’­è§‚çœ‹ã€‚
2.ç¾¤ç›´æ’­æ»¡è¶³å»¶æ—¶æ§åˆ¶åœ¨60ç§’
3.å®Œæˆappæµ‹è¯•
4. æä¾›ç›´æ’­ äººæ•°ï¼Œæ—¶é•¿ç›´æ’­åˆ†æã€‚
5ã€‚ä¿è¯æœåŠ¡ç¨³å®šæ€§å’Œæ‰©å±•æ€§ã€‚


åƒé¥­+1
ç•™è¨€ +1
èåˆ+
å½•éŸ³ç›®å½• dealy


ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
\SecureCRT
é‡æ–°ç™»å½•æŸ¥çœ‹ æ˜¯å¦ç”Ÿæ•ˆï¼šulimit -a
open filesÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (-n) 655360
cat /etc/security/limits.confÂ  //ä¿®æ”¹ç›´æ¥ç”Ÿæ•ˆï¼Œä¸éœ€è¦åˆ·æ–°

*Â  Â  Â Â  softÂ  Â  coreÂ  Â  0
*Â  Â  Â Â  hardÂ  Â  coreÂ  Â  0
*Â  Â  Â Â  softÂ  Â  nofileÂ  Â  Â  Â  Â  655360
*Â  Â  Â Â  hardÂ  Â  nofileÂ  Â  Â  Â  Â  655360
*Â Â  soft nprocÂ  Â  Â  Â  Â Â  655360
*Â Â  hard nprocÂ  Â  Â  Â  Â Â  655360

æŸ¥çœ‹ç³»ç»Ÿé…ç½®ï¼šviÂ  /etc/sysctl.conf
sysctl -p
sysctl -a æ˜¾ç¤ºå½“å‰çš„æ‰€æœ‰å‚æ•°

net.ipv4.ip_forward = 0
net.ipv4.conf.default.rp_filter = 1
net.ipv4.conf.default.accept_source_route = 0
kernel.sysrq = 0
kernel.core_uses_pid = 1
kernel.threads-max=65535
kernel.msgmni = 16384
kernel.msgmnb = 65535
kernel.msgmax = 65535
kernel.shmmax = 68719476736
kernel.shmall = 4294967296
kernel.shmmni = 4096
kernel.sem = 5010 641280 5010 128
net.ipv4.tcp_max_tw_buckets = 600000
net.ipv4.tcp_sack = 1
net.ipv4.tcp_window_scaling = 1
net.ipv4.tcp_rmem = 4096 87380 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216
net.core.wmem_default = 8388608
net.core.rmem_default = 8388608
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
net.core.netdev_max_backlog = 32768
net.ipv4.tcp_no_metrics_save = 1
net.core.somaxconn = 32768
net.core.optmem_max = 10000000
net.ipv4.tcp_max_orphans = 32768
net.ipv4.tcp_max_syn_backlog = 65536
net.ipv4.tcp_syncookies = 1
net.ipv4.tcp_timestamps = 0
net.ipv4.tcp_synack_retries = 2
net.ipv4.tcp_syn_retries = 2
net.ipv4.tcp_tw_recycle = 1
net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_mem = 94500000 915000000 927000000
net.ipv4.tcp_fin_timeout = 10
net.ipv4.tcp_keepalive_time = 300
net.ipv4.tcp_keepalive_probes=10
net.ipv4.tcp_keepalive_intvl=2
net.ipv4.ip_local_port_range = 10000 65535
net.ipv4.route.gc_timeout = 100
net.ipv4.tcp_congestion_control=cubic
net.ipv4.conf.lo.arp_ignore = 1
net.ipv4.conf.lo.arp_announce = 2
net.ipv4.conf.all.arp_ignore = 1
net.ipv4.conf.all.arp_announce = 2
fs.aio-max-nr = 1024000
vm.overcommit_memory = 1
vm.drop_caches = 3
vm.swappiness = 1

fs.file-max = 655360

ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²


*/5 * * * * sh /home/gome_guest/dns_zhibo_8448/startDns.sh

10.106.84.145:8448;10.106.4.113:8448
;

ok.


ä¼‘æ¯ 5åˆ†é’Ÿã€‚

dns_down_getredis_time *ptr = dynamic_cast<dns_down_getredis_time *>(m_RedisConnect);
    if ("-1" != m_strConfID)
    {
        long long endTime = get_time_microseconds();

        if ("2" == m_strWatch)
        {
            //ä¸»æ’­æ­£å¸¸ç¦»å¼€ 20020ï¼šä¸»æ’­ç»“æŸç›´æ’­ å®Œæˆ
            // liveid|groupid| userid|type| æ—¶é—´æˆ³ |starttime|endtime|æ—¶å¸¸
            // 20020ï¼šä¸»æ’­ç»“æŸç›´æ’­
            if (ptr && 1 == ptr->m_MapConferInfo.count(m_strConfID))
			

 dns_down_getredis_time *ptr = dynamic_cast<dns_down_getredis_time *>(m_RedisConnect);
            if (ptr && msgId.size() > 0)
            {
                ptr->m_MapMsgId[stConInfo.m_strConfID]=msgId;
            }
			
1 å–å‡ºè´§å¸çš„é’± OK
2 .è‡ªè¡Œå¾®ä¿¡å®¢æœ


ä¸‰æ˜Ÿæ‰‹æœº æç¤º å¾®ä¿¡ä½ç‰ˆæœ¬æ— æ³•ç™»é™†
å¯¼è‡´é‡Œé¢é‡è¦çš„è®¢å•ï¼Œå®¢æˆ·èµ„æ–™æ— æ³•è¯»å–ã€‚
å› ä¸ºä¸‰æ˜Ÿæ‰‹æœºç‰ˆæœ¬å¤ªä½æ— æ³•è‡ªåŠ¨æ›´æ–°
å¾®ä¿¡åŒæ ·æ— æ³•æ›´æ–°
å¦‚ä½•å¾®ä¿¡èŠå¤©è®°å½•å¯¼å…¥å…¶ä»–æ‰‹æœºå‘¢ï¼Ÿ
ç€æ€¥

1.12æ—¥æ—©ä¸Šä¹ç‚¹åŠï¼Œæµ·é‡æ•°æ®äº§å“åˆ†äº«åŠå—äº¬ä¸€è¿›åˆ¶å¤‡ä»½è½¯ä»¶åˆ†äº«
è…¾è®¯ä¼šè®®ï¼š658-5516-0859
ä¼šè®®å¯†ç ï¼š090227

å¦‚ä½•ç†è§£ rtmp é€šè¿‡ flv æ ¼å¼æ¨é€éŸ³è§†é¢‘æµ(h264/aac)
https://zhuanlan.zhihu.com/p/83454344

FLVè§†é¢‘æµç¼–è§£ç çŸ¥è¯†
https://www.cnblogs.com/happyhotty/articles/2161052.html

ffmpeg -re -i /app/ffmeg/srs-bench-master/doc/source.200kbps.768x320.flv -c copy -f flv rtmp://10.115.90.104:1935/live/test


çœ‹è§†é¢‘æµç¨‹ 0k

åˆ›å»ºadminç”¨æˆ·

OceanBaseå»ºè®®ä½¿ç”¨adminè¿›è¡Œç»´æŠ¤ï¼Œåˆ›å»ºadminç”¨æˆ·ã€‚

[root ~] # useradd admin
[root ~] # passwd admin # ä¿®æ”¹adminç”¨æˆ·å¯†ç 

ç»™äºˆadminç”¨æˆ·sudo rootæƒé™ï¼š

[root ~] # cd /etc/sudoers.d/
# åˆ›å»ºadmin(æ–‡ä»¶å¯éšæ„),å¹¶å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š
[root ~] # more admin
%admin ALL=(ALL) NOPASSWD: ALL

ssh admin@192.168.75.128 -p 22
ulimit -a
service sshd restart
https://bbs.csdn.net/topics/394186728

ssh -V
OpenSSH_8.7p1, OpenSSL 3.0.0 7 sep 2021

[admin@localhost root]$ ssh -V
OpenSSH_8.7p1, OpenSSL 3.0.0 7 sep 2021
ssh admin@192.168.75.128 -p 22

å»ºè®®å®¢æˆ·é‡æ–°ç¼–è¯‘opensshç‰ˆæœ¬ï¼Œç¼–è¯‘æ—¶å¸¦ä¸Šâ€“with-pamå‚æ•°ã€‚å®¢æˆ·æ“ä½œåé—®é¢˜è§£å†³ã€‚


telnet admin@192.168.75.128  22
 
wget https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/openssh-8.8.tar.gz



ssh root@1.117.98.225 -p 22
E9}qkXu,r+Q6*dy


1.117.98.225

ssh admin@1.117.98.225 -p 22

ssh

ssh -V

åšäº†å¯¹æ¯”æµ‹è¯• é»˜è®¤çš„ç³»ç»Ÿå®‰è£…ssh
OpenSSH7.0 æ™®é€šç”¨æˆ·ç™»é™† ulimtæ˜¾ç¤ºæ­£å¸¸
OpenSSH_8 ä¸è¡Œ

ssh -V
OpenSSH_7.4p1, OpenSSL 1.0.2k-fips  26 Jan 2017

ssh -V
OpenSSH_8.7p1, OpenSSL 3.0.0 7 sep 2021


æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œsshd_configä¸­ä¸ä¼šå¯ç”¨AuthorizedKeysCommand å’Œ AuthorizedPrincipalsCommandã€‚


å‘Šè¯‰åˆ«äººè§£å†³åŠæ³• å’ŒåŸå›  è€Œä¸æ˜¯è¯´æˆ‘ä¸ä¼šï¼Œè¿™ç°è±¡ã€‚



192.168.75.131

ssh root@192.168.75.131 -p 22
ssh admin@192.168.75.131 -p 22

ssh @192.168.75.131 -p 22

å¾®ä¿¡ä½ç‰ˆæœ¬æ— æ³•ç™»é™†å¯¼è‡´é‡Œé¢èŠå¤©è®°å½•è®°å½•æ— æ³•å¯¼å‡º
æ˜æ˜ä¿¡æ¯éƒ½åœ¨æˆ‘æ‰‹æœºä¸Šï¼Œæˆ‘è¿˜çŸ¥é“ç”¨æˆ·åå’Œå¯†ç 
å´æ— æ³•æŸ¥çœ‹ã€‚æœ‰å„ä½å¤§ä½¬ï¼Œæœ‰ç›¸å…³è§£å†³åŠæ³•å—ï¼Ÿ
è¿æ¥æ¨¡æ‹Ÿå™¨ç«¯å£ï¼šadb connect 127.0.0.1:7555ï¼ˆMuMuè‡ªå¸¦ï¼šadb_server.exe connect 127.0.0.1:7555ï¼‰

åˆ—å‡ºå·²è¿æ¥çš„è®¾å¤‡ï¼šadb devicesï¼ˆMuMuè‡ªå¸¦ï¼šadb_server.exe devicesï¼‰ï¼Œæ­£å¸¸ä¼šæ˜¾ç¤ºMuMuçš„è®¾å¤‡å·²è¿æ¥ï¼Œåˆ™å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥çš„æ“ä½œäº†ã€ã€ã€

adb kill-server
adb connect 127.0.0.1:7555
adb devices
adb install -d D:\\money\\bak\\weixin6513android1080.apk
D:\money\bak
18660398115
grep "\[98463\]" ./objs/srs.log

å…¬å¸ï¼šå›½ç¾äº‘å¹³å°å¤§æ•°æ®éƒ¨é—¨
é¡¹ç›®åç§°ï¼šç¾åŠç¾¤ç›´æ’­
è´Ÿè´£äººï¼šç‹ä¼ ä¹‰

æœåŠ¡å™¨åœ°å€ï¼š
tcp é•¿è¿æ¥æ–¹å¼

10.106.84.145:8448
10.106.4.113:8448

ä¾èµ–ï¼š
zhibo.gome.com.cn ï¼ˆå·²ç»ä¸Šçº¿ï¼Œå·²ç»é™æµï¼‰ ç«¯å£1935 

1 è€ƒå‹¤  ok
2. redisåœæœº ok
3. æ¶ˆæ¯èåˆ
4 rtmp bzhan 

http://code.gome.inc/gitlab/media/meetctl

1.ç¬¬ä¸€ä¸ªå­£åº¦ å®Œ
 æˆä¸­é—´ä»¶30å¤šä¸ªredisä»£ç†æœºæˆ¿è¿ç§»å’Œçº¿ä¸Š20ä¸ªphpåº”ç”¨ç¨‹åº å¹³æ»‘å‡çº§ã€‚

2.å¤šäººéŸ³è§†é¢‘-ç¾¤ç›´æ’­é¡¹ç›®
 å®Œæˆ ä¼šæ§æ¥å£æ–‡æ¡£ æµ‹è¯•ç”¨ä¾‹å’Œä»£ç å®ç°ã€‚
 å®Œæˆ srsæµåª’ä½“ä»å•æœºåˆ°é›†ç¾¤æ¶æ„å‡çº§ã€‚
 å®Œæˆ æµé‡å‹æµ‹å’Œä½å»¶è¿Ÿä¼˜åŒ–ã€‚

3.éŸ³è§†é¢‘ä¸­å°
 åˆæ­¥å®Œæˆæ—¥å¿—ç›‘æ§ã€‚
 srs/ffmegå¯¹ç›´æ’­ç­‰è§†é¢‘å­˜å‚¨
 çº¿ä¸Šé¡¹ç›®ç»´æŠ¤ã€‚
 

--
1.redisä»£ç†æœºè¿ç§»å®Œæˆï¼Œè¿ç§»å‰ éœ€è¦å¯¹æœåŠ¡å™¨é…ç½®è¿›è¡Œè°ƒä¼˜å’Œå‹æµ‹æå‰å‘ç°æ•…éšœ

2.å¤šäººéŸ³è§†é¢‘-ç¾¤ç›´æ’­é¡¹ç›®ï¼Œ
 åœ¨å…¬å¸æ–°è§„èŒƒä¸‹ï¼Œæ–°çš„åº”ç”¨ç¨‹åºåœ¨è®¾è®¡ä¸Šç¬¦åˆç å®‰å…¨ï¼Œç½‘ç»œå®‰å…¨ å’Œæ¶æ„è¯„å®¡è¦æ±‚ã€‚
 åŠŸèƒ½ä¸Šå’Œapp ios ç¾åŠå¤šéƒ¨é—¨åˆä½œã€‚
 
3.æ•°æ®ç»Ÿä¸€ç®¡ç†ï¼ŒåŠŸèƒ½ä»£ç å¤ç”¨äº§ç”Ÿé›å½¢ã€‚
  å¯¹çœŸå¿«ä¹app,ç¾åŠç­‰ä¸åŒäº§ç”Ÿæ—¥å¿—ï¼Œè§†é¢‘æ•°æ® ç›‘æ§ï¼Œåç»­åŒä¸€ä¸ªè·Ÿè¸ªå¤„ç†ã€‚
  
æ“…é•¿ï¼š
 
ä¼˜åŠ¿

1.

å¿«é€Ÿè½å®å…¬å¸å„é¡¹æ”¿ç­–æªæ–½
å’Œç§¯æé…åˆä¸åŒéƒ¨é—¨å¯¹é¡¹ç›®æ¶æ„ï¼Œæ‰©å±•å’Œå®‰å…¨è¦æ±‚ã€‚

2. 

æ“…é•¿å¯¹æœåŠ¡å™¨é«˜å¹¶å‘ï¼Œä½å»¶æ—¶ï¼Œå¯¹c++,golangè¯­è¨€æ·±å…¥ç ”ç©¶ã€‚


å¾…æ”¹è¿›
3. ä¸“ä¸šæ–¹å‘ï¼š 
å¯¹ç¼–è§£ç å’Œsrs rtmpåè®® webrtcç­‰å¸‚åœºæˆç†ŸæŠ€æœ¯å’Œäº§å“è¿›è¡Œç ”ç©¶

4. è§†é‡æ–¹å‘ï¼š
ä»å…¬å¸æˆ˜ç•¥ï¼Œéœ€æ±‚å‡ºå‘
å¬å–ä¸åŒéƒ¨é—¨,å®¢æˆ·æ„è§ã€‚

curl -H "Content-Type: application/json"  http://10.110.185.115:3215/public/app/groups/message/firstSendMessage

curl -H "Content-Type: application/json"  -X POST -d '{"busType":1,"data":"{\"liveTitle\":\"æäº‘é¾™çš„ç›´æ’­\",\"liveState\":\"2\",\"extra\":{\"group_id\":\"6050283e6207470991de8a3311d8fd8a\",\"confer\":\"6050283e6207470991de8a3311d8fd8a_4717148099838422\",\"streamid\":\"4717148099838422\",\"watch\":\"2\",\"cur_count\":\"0\",\"total_count\":\"1\",\"start_time\":\"1642148476\",\"server\":\"rtmp://zhibo.gome.com.cn:1935/live/4717148099838422_1642148476\",\"end_time\":\"1642148569\",\"name\":\"æäº‘é¾™\",\"state\":\"2\"}}","groupId":"6050283e6207470991de8a3311d8fd8a","senderUid":4717148099838422}' http://10.110.185.115:3215/public/app/groups/message/firstSendMessage


curl "http://10.2.185.115:3215/public/app/groups/message/firstSendMessage" -I 

10.2.185.115 

curl  -v  -H "Content-Type: application/json" -X POST -d '{"busType":1,"data":"{\"liveTitle\":\"æäº‘é¾™çš„ç›´æ’­\",\"liveState\":\"2\",\"extra\":{\"group_id\":\"6050283e6207470991de8a3311d8fd8a\",\"confer\":\"6050283e6207470991de8a3311d8fd8a_4717148099838422\",\"streamid\":\"4717148099838422\",\"watch\":\"2\",\"cur_count\":\"0\",\"total_count\":\"1\",\"start_time\":\"1642148476\",\"server\":\"rtmp://zhibo.gome.com.cn:1935/live/4717148099838422_1642148476\",\"end_time\":\"1642148569\",\"name\":\"æäº‘é¾™\",\"state\":\"2\"}}","groupId":"6050283e6207470991de8a3311d8fd8a","senderUid":4717148099838422}' "http://10.2.185.115:3215/public/app/groups/message/firstSendMessage"




//


curl  -v  -H "Content-Type: application/json" -X POST -d '{"busType":1,"data":"{\"liveTitle\":\"æäº‘é¾™çš„ç›´æ’­\",\"liveState\":\"2\",\"extra\":{\"group_id\":\"6050283e6207470991de8a3311d8fd8a\",\"confer\":\"6050283e6207470991de8a3311d8fd8a_4717148099838422\",\"streamid\":\"4717148099838422\",\"watch\":\"2\",\"cur_count\":\"0\",\"total_count\":\"1\",\"start_time\":\"1642148476\",\"server\":\"rtmp://zhibo.gome.com.cn:1935/live/4717148099838422_1642148476\",\"end_time\":\"1642148569\",\"name\":\"æäº‘é¾™\",\"state\":\"2\"}}","groupId":"6050283e6207470991de8a3311d8fd8a","senderUid":4717148099838422}' "http://10.2.185.115:3215/public/app/groups/message/firstSendMessage"


10.110.185.115
curl -H "Content-Type: application/json" -X POST -d '{"busType":1,"data":"{\"liveTitle\":\"æäº‘é¾™çš„ç›´æ’­\",\"liveState\":\"2\",\"extra\":{\"group_id\":\"6050283e6207470991de8a3311d8fd8a\",\"confer\":\"6050283e6207470991de8a3311d8fd8a_4717148099838422\",\"streamid\":\"4717148099838422\",\"watch\":\"2\",\"cur_count\":\"0\",\"total_count\":\"1\",\"start_time\":\"1642148476\",\"server\":\"rtmp://zhibo.gome.com.cn:1935/live/4717148099838422_1642148476\",\"end_time\":\"1642148569\",\"name\":\"æäº‘é¾™\",\"state\":\"2\"}}","groupId":"6050283e6207470991de8a3311d8fd8a","senderUid":4717148099838422}' "http://10.115.92.52:3215/public/app/groups/message/firstSendMessage"

curl  -v  -H "Content-Type: application/json" -X POST -d '{"busType":1,"data":"{\"liveTitle\":\"æäº‘é¾™çš„ç›´æ’­\",\"liveState\":\"2\",\"extra\":{\"group_id\":\"6050283e6207470991de8a3311d8fd8a\",\"confer\":\"6050283e6207470991de8a3311d8fd8a_4717148099838422\",\"streamid\":\"4717148099838422\",\"watch\":\"2\",\"cur_count\":\"0\",\"total_count\":\"1\",\"start_time\":\"1642148476\",\"server\":\"rtmp://zhibo.gome.com.cn:1935/live/4717148099838422_1642148476\",\"end_time\":\"1642148569\",\"name\":\"æäº‘é¾™\",\"state\":\"2\"}}","groupId":"6050283e6207470991de8a3311d8fd8a","senderUid":4717148099838422}' "http://10.115.92.52:3215/public/app/groups/message/firstSendMessage"


4717148099838422 get a register req body: 
62
{"code":0,"message":"success","data":"deba2be9c2de4f3687376500621f23a3","timestamp":1642160869121}
0

4717148099838422 get a register req body: 62
{"code":0,"message":"success","data":"deba2be9c2de4f3687376500621f23a3","timestamp":1642160869121}
0

size_t pos = m_strConfID.find("_");
string groupid = m_strConfID.substr(0, pos);
m_strGroupID = groupid;

1. æ¢å¤ç”µè„‘å®šæ—¶é‡å¯åŠŸèƒ½
2  msgã€‘ã€ã€ã€


 sub_confrence = cJSON_GetObjectItem(root, JSON_SERVER_SERVEREPORT);
        if (sub_confrence && sub_confrence->valuestring)
        {
            _stServerinfo.port = sub_confrence->valuestring;
        }
        sub_confrence = cJSON_GetObjectItem(root, JSON_SERVER_SERVEREDOMAIN);
        if (sub_confrence && sub_confrence->valuestring)
        {
            _stServerinfo.domain = sub_confrence->valuestring;
        }
        sub_confrence = cJSON_GetObjectItem(root, JSON_SERVER_SERVEREPAYLOAD);
        if (sub_confrence && sub_confrence->valuestring)
        {
            _stServerinfo.payload = atol((sub_confrence->valuestring));
        }
å®Œæˆã€‚
adb shell
chmod -R 777 /data/  

0c5f25e8c00eba410a4e43ac47673e44

/data/data/com.tencent.mm/MicroMsg/0c5f25e8c00eba410a4e43ac47673e44
/data/data/com.tencent.mm/MicroMsg/0c5f25e8c00eba410a4e43ac47673e44

adb pull /data/data/com.tencent.mm  D:\money\wechat\mumu1\com.tencent.mm

/storage/emulated/tencent/MicroMsg/WeiXin/
/sdcard/Android/data/com.tencent.mm
Android

adb pull /sdcard/Android/data/com.tencent.mm 
D:\money\wechat\mumu1\data\com.tencent.mm

com.tencent.mm

adb pull /sdcard/Android/data/com.tencent.mm/MicroMsg D:\money\wechat\mumu1\data\com.tencent.mm\MicroMsg
adb pull /sdcard/Android/data/com.tencent.mm/cache D:\money\wechat\mumu1\data\com.tencent.mm\cache
adb pull /sdcard/Android/data/com.tencent.mm/files D:\money\wechat\mumu1\data\com.tencent.mm\files

adb uninstall [-k] <package>
 - EN remove this app package from the device
- CHS ä»è®¾å¤‡åˆ é™¤ç¨‹åºåŒ…
('-k' means keep the data and cache directories) #ä¸åˆ é™¤ç¨‹åºè¿è¡Œæ‰€äº§ç”Ÿçš„æ•°æ®å’Œç¼“å­˜ç›®å½•(å¦‚è½¯ä»¶çš„æ•°æ®åº“æ–‡ä»¶)

adb uninstall -k /com.tencent.mm



    ä¾‹ï¼šå¸è½½å¾®ä¿¡
    adb uninstall com.tencent.mm


    ä¾‹ï¼šå¸è½½å¾®ä¿¡
    adb uninstall com.tencent.mm
	adb uninstall -k com.tencent.mm(ä¿ç•™æ•°æ®)

adb push D:\money\wechat\mumu1\data\com.tencent.mm  /sdcard/Android/data/com.tencent.mm
adb push D:\money\wechat\mumu1\com.tencent.mm /data/data/com.tencent.mm

18660398115

adb push D:\money\wechat\mumu1\com.tencent.mm\MicroMsg\0c5f25e8c00eba410a4e43ac47673e44 /data/data/com.tencent.mm/MicroMsg/0c5f25e8c00eba410a4e43ac47673e44

è´­ä¹°ç«è½¦ç¥¨ ok
"114164cc82d64317ad624903d92158a2"
"114164cc82d64317ad624903d92158a2"
"0c712eb1d60a4b349966cd254ad133d4"
"0c712eb1d60a4b349966cd254ad133d4"
ok


æäº¤å•å­ ok
ä¸‹è½½èµ„æ–™
è§†é¢‘ä¸è¦å…¨éƒ¨å¬ï¼Œå¬ä¸€èˆ¬å°±å¯ä»¥æ¥å“¦ã€‚

adb push D:\money\wechat\å“¥å“¥\com.tencent.mm /data/data/com.tencent.mm

adb push D:\money\wechat\å“¥å“¥\MicroMsg_sdk\MicroMsg /sdcard/tencent/MicroMsg
imeiç¼–ç 357071051421147
D:\money\wechat\å“¥å“¥\com.tencent.mm

adb push D:\money\wechat\å“¥å“¥\com.tencent.mm /data/data/com.tencent.mm


1 å¤©åŠè°ƒä¼‘
https://github.com/watchpoints/tinykv.git

ç¼–è¯‘å·¥å…·Gradle 15åˆ†é’Ÿå…¥é—¨æ•™ç¨‹

1. é’é“œçº§-å®‰è£…

window

JAVA_HOME=D:\local\java_sdk_17
path=%JAVA_HOME%\bin
java -version
java version "17.0.1" 2021-10-19 LTS

wget https://downloads.gradle-dn.com/distributions/gradle-7.3.3-bin.zip
GRADLE_HOME=D:\local\java\gradle-7.3.3-bin\gradle-7.3.3
path=%GRADLE_HOME%\bin
GRADLE_USER_HOME=D:\local\java\.gradle
gradle -v
Welcome to Gradle 7.3.3!

checks
Preferences -> Build, Execution, Deployment -> Gradle

ANDROID_SDK_HOMEæŒ‡å‘çš„ç›®å½•ï¼Œåº”è¯¥æ˜¯ç”¨æ¥å­˜å‚¨avdç­‰ç”¨æˆ·æ•°æ®ã€‚
ä½¿ç”¨ANDROID_SDK_ROOT/ANDROID_HOMEå˜é‡æŒ‡å‘sdkçš„å®‰è£…ç›®å½•

ANDROID_HOME=D:\local\android_sdk
path=%ANDROID_HOME%\platform-tools



2 ç™½é“¶çº§-ç”¨æ³•

Gradleå°†è‡ªåŠ¨åˆ›å»ºé¡¹ç›®æ‰€éœ€è¦çš„æ–‡ä»¶ç»“æ„ã€‚
src/main/java - æ–‡ä»¶å¤¹åŒ…å«æ‰€æœ‰javaæºæ–‡ä»¶ã€‚
src/test/java - æ–‡ä»¶å¤¹åŒ…å«æ‰€æœ‰javaæµ‹è¯•ç”¨ä¾‹ã€‚
build.gradle - æ–‡ä»¶åŒ…å«é¡¹ç›®æ„å»ºæ‰€ä½¿ç”¨çš„è„šæœ¬(Mavenå·¥ç¨‹ä¸­çš„pom.xml)
ettings.gradle - æ–‡ä»¶å°†åŒ…å«å¿…è¦çš„ä¸€äº›è®¾ç½®

å®‰è£…ç›®å½•
APP_HOME=D:\Program Files\Android\Android Studio

JDK11 ä½¿ç”¨ sdkmanager --update æŠ¥é”™è§£å†³
sdkmanager.bat --licenses
Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema

;%APP_HOME%\jre\automaton-1.12-1.jar;%APP_HOME%\jre\jaxb-api-2.3.1.jar;%APP_HOME%\jre\jaxb-core-2.3.0.1.jar;%APP_HOME%\jre\jaxb-impl-3.0.0.jar

è§£å†³JDK 13å’ŒAndroid SDKä¸å…¼å®¹çš„é—®é¢˜

To build this project, accept the SDK license agreements and install the missing components using the Android Studio SDK Manager.


å®‰è£…ç›®å½•
set APP_HOME
APP_HOME=D:\Program Files\Android\Android Studio
cd D:\local\android_sdk\tools\bin
sdkmanager.bat --licenses
Exception in thread "main" java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema
./sdkmanager --licenses 
;%APP_HOME%\jre\automaton-1.12-1.jar;%APP_HOME%\jre\jaxb-api-2.3.1.jar;%APP_HOME%\jre\jaxb-core-2.3.0.1.jar;%APP_HOME%\jre\jaxb-impl-3.0.0.jar

fuser -m -v -i -k /mnt/meta/
umount

è§£å†³åŠæ³•ï¼š
java_sdk_17é™ä¸ºjava_sdk_8
Android Gradle plugin requires Java 11 to run. You are currently using Java 1.8.
Class referenced in the manifest, `com.zhayh.weixinhookdemo.MainActivity`, was not found in the project or the libraries

 template <class _Ux>
    void _Set_ptr_rep_and_enable_shared(_Ux* const _Px, _Ref_count_base* const _Rx) noexcept { // take ownership of _Px
        this->_Ptr = _Px;
        this->_Rep = _Rx;
        if constexpr (conjunction_v<negation<is_array<_Ty>>, negation<is_volatile<_Ux>>, _Can_enable_shared<_Ux>>) {
            if (_Px && _Px->_Wptr.expired()) {
                _Px->_Wptr = shared_ptr<remove_cv_t<_Ux>>(*this, const_cast<remove_cv_t<_Ux>*>(_Px));
            }
        }
    }

    void _Set_ptr_rep_and_enable_shared(nullptr_t, _Ref_count_base* const _Rx) noexcept { // take ownership of nullptr
        this->_Ptr = nullptr;
        this->_Rep = _Rx;
    }
	shared_ptr æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œå®ƒå¹¶ä¸çŸ¥é“ Widget ç±»æ˜¯å¦ç»§æ‰¿ è‡ª enable_shared_from_thisï¼Œæ‰€ä»¥ w->SetSharedPtr(this) è¿™ä¸€å¥çš„è°ƒç”¨ä¸å®Œå…¨æ­£ç¡® ã€‚boost ä¸­è§£å†³è¿™ä¸ªé—®é¢˜ä½¿ç”¨äº†ä¸€ä¸ªéå¸¸å·§å¦™çš„æ–¹æ³•â€”â€”é‡è½½ï¼Œé€šè¿‡é‡è½½æˆ‘ä»¬å¯ä»¥è®©ç¼–è¯‘å™¨è‡ª åŠ¨é€‰æ‹©æ˜¯å¦è°ƒç”¨ SetSharedPtrã€‚