---
title: 企业级智能体dify：不需要编程
date: 2025-04-12
description: c++
draft: false
tags:
  - 小而美
categories:
  - do book
---

https://github.com/wyh0626/resumeFilter

https://github.com/itMrBoy/resumePolice

v1: 案例学习/源码学习
v2:服务个人产生适用记录
v3:文章变成视频让大家使用



## 一、需求分析 ：

 我们正在尝试打造一个 **求职者** 与 **招聘方** 之间精准高效的连接通道。


基于Github Issue打造的完全透明的求职和招聘平台, 完全透明, 完全公开
- https://github.com/TokenRollAI/talent-hub-cn/issues

- 求职者：如果你认为自己足够优秀，不妨带着你的简历/博客/开源贡献来这里寻找优秀的工作机会。
- 招聘方：如果你认为你的产品/工作岗位拥有动人的产品力，不妨带上你的jd来这里会一会各路英豪

## 📋 提示词 (Prompts)

我们提供了多个版本的提示词，以适应不同场景的需求。

| 类型     | 语言      | 描述 / 区别                                                      | 文件链接                                                  |
| :----- | :------ | :----------------------------------------------------------- | :---------------------------------------------------- |
| 简历评估   | 🇨🇳 中文 | **简历警察**：核心提示词，用于全面审查和修改简历，采用“批判-解析-建议”模型。                   | [`resume_police_Zh.md`](./prompt/resume_police_Zh.md) |
| 面试问题生成 | 🇨🇳 中文 | **面试官视角 V1**: 传奇CTO人设，采用四步勘探法和P.O.S.E.R.模型，生成体系化、带陷阱的深度面试问题。 | [`question_v1_Zh.md`](./prompt/question_v1_Zh.md)     |
| 面试问题生成 | 🇨🇳 中文 | **面试官视角 V2**: 传奇CTO人设，采用三步勘探法，风格更直接，产出更精简的面试问题清单。            | [`question_v2_Zh.md`](./prompt/question_v2_Zh.md)     |

---

## 🔧 Dify 工作流 (Workflows) 与使用方法

为了方便在 Dify 平台使用，我们提供了以下工作流文件。

| 版本          | 主要特点                                      | 文件链接                                            |
| :---------- | :---------------------------------------- | :---------------------------------------------- |
| 简历警察        | 早期版本，基础工作流。                               | [`简历警察.yml`](./workflow/简历警察.yml)               |
| 简历警察 V2     | 优化了提示词和流程的版本。                             | [`简历警察V2.yml`](./workflow/简历警察V2.yml)           |
| 简历警察 V3     | **（推荐）** 当前最稳定的文本生成工作流，内置了最新的简历警察提示词。     | [`简历警察V3.yml`](./workflow/简历警察V3.yml)           |
| 简历警察 Chat   | **（推荐）** 对话式工作流，支持与简历警察进行多轮对话，进行追问和修改。    | [`简历警察Chat.yml`](./workflow/简历警察Chat.yml)       |
| 简历警察(笔录版)V1 | 对应 **面试官视角 V1** 提示词，用于生成深度面试问题的文本生成工作流。   | [`简历警察(笔录版)V1.yml`](./workflow/简历警察(笔录版)V1.yml) |
| 简历警察(笔录版)V2 | 对应 **面试官视角 V2** 提示词，用于生成精简面试问题清单的文本生成工作流。 | [`简历警察(笔录版)V2.yml`](./workflow/简历警察(笔录版)V2.yml) |



---

## 🎯 核心理念

简历警察采用"批判-解析-建议"三位一体模型：

- ❓ **批判** - 直接指出问题
- 🤔 **解析** - 解释负面影响
- 💡 **建议** - 提供具体方案


# 二、 最少知识


## 2.1    Dify入门系列（1）部署 Dify：云服务 vs 本地 Docker 

### step1 请你做出选择，因为自己家里环境，公司环境，mac 和 Windows 环境来回切换，自己选择云服务

如果后面有机会在本地部署

访问 [Dify] 官网 https://cloud.dify.ai/app

→ 点击「免费开始」→ 用邮箱/GitHub 账号注册 2 分钟完成

### step2：了解什么应用


你可以通过 3 种方式在 Dify 的工作室内创建应用：

- 基于应用模板创建（新手推荐）
- 创建一个空白应用
- 通过 DSL 文件（本地/在线）创建应用

Dify 上可以创建 5 种不同的应用类型，
分别是
- 聊天助手

  对话型应用采用一问一答模式与用户持续对话。

 适用场景

 对话型应用可以用在客户服务、在线教育、医疗保健、金融服务等领域。

这些应用可以帮助组织提高工作效率、减少人工成本和提供更好的用户体验


- 文本生成应用
- Agent
	 智能助手（Agent Assistant），利用大语言模型的推理能力，
	 能够自主对复杂的人类任务进行目标规划、任务拆解、工具调用、过程迭代，
	 并在没有人类干预的情况下完成任务 【不懂有什么区别】

- **Chatflow**：面向对话类情景，包括客户服务、语义搜索、以及其他需要在构建响应时进行多步逻辑的对话式应用程序。 【不懂】

- **Workflow**：面向自动化和批处理情景，适合高质量翻译、数据分析、内容生成、电子邮件自动化等应用程序。

参考官方文档：https://docs.dify.ai/zh-hans/guides/workflow/readme



## 2.2 基本概念


#### 1.  变量

-  参考资料

- https://zhuanlan.zhihu.com/p/30932431423
- https://legacy-docs.dify.ai/zh-hans/guides/workflow/variables

#### 2. 文档提取器

- 官方资料：https://docs.dify.ai/zh-hans/guides/workflow/node/doc-extractor

 定义

LLM 自身无法直接读取或解释文档的内容。因此需要将用户上传的文档，通过文档提取器节点解析并读取文档文件中的信息，转化文本之后再将内容传给 LLM 以实现对于文件内容的处理。

应用场景

- 构建能够与文件进行互动的 LLM 应用，例如 ChatPDF 或 ChatWord；
- 分析并检查用户上传的文件内容；


 输入变量

文档提取器仅接受以下数据结构的变量：

- `File`，单独一个文件
- `Array[File]`，多个文件

文档提取器仅能够提取文档类型文件中的信息，例如 TXT、Markdown、PDF、HTML、DOCX 格式文件的内容，无法处理图片、音频、视频等格式文件。


输出变量

输出变量固定命名为 text。输出的变量类型取决于输入变量：

- 输入变量为 `File`，输出变量为 `string`
- 输入变量为 `Array[File]`，输出变量为 `array[string]`

> Array 数组变量一般需配合列表操作节点使用，详细说明请参考 

#### 3 # LLM

- https://docs.dify.ai/zh-hans/guides/workflow/node/llm
 ##### 定义

调用大语言模型的能力，处理用户在 “开始” 节点中输入的信息（自然语言、上传的文件或图片），给出有效的回应信息。

##### 应用场景

LLM 节点是 Chatflow/Workflow 的核心节点。该节点能够利用大语言模型的对话/生成/分类/处理等能力，根据给定的提示词处理广泛的任务类型，并能够在工作流的不同环节使用。

- **意图识别**，在客服对话情景中，对用户问题进行意图识别和分类，导向下游不同的流程。
- **文本生成**，在文章生成情景中，作为内容生成的节点，根据主题、关键词生成符合的文本内容。
- **内容分类**，在邮件批处理情景中，对邮件的类型进行自动化分类，如咨询/投诉/垃圾邮件。
- **文本转换**，在文本翻译情景中，将用户提供的文本内容翻译成指定语言。
- **代码生成**，在辅助编程情景中，根据用户的要求生成指定的业务代码，编写测试用例。
- **RAG**，在知识库问答情景中，将检索到的相关知识和用户问题重新组织回复问题。
- **图片理解**，使用 vision 能力的多模态模型，能对图像内的信息进行理解和问答。

选择合适的模型，编写提示词，你可以在 Chatflow/Workflow 中构建出强大、可靠的解决方案


通义千问：
- https://help.aliyun.com/zh/model-studio/dify
- https://bailian.console.aliyun.com/?apiKey=1#/api-key

# 参考资料
- https://z0yrmerhgi8.feishu.cn/wiki/O4qFwwWfnipjcgkHwLocYIvHnAb
- https://www.youtube.com/watch?v=Cr7laD5kQD0&ab_channel=AI%E5%AD%A6%E9%95%BF%E5%B0%8F%E6%9E%97


## 我的测试：


好的，任务已收到。作为“独角兽捕手”，我的目标是拨开简历的迷雾，直击候选人能力的内核。这份勘探计划将成为你的手术刀。 --- ### **第一部分：候选人风险画像 (Candidate Risk Profile)** * **一句话风险评估:** 一位拥有丰富C++和分布式存储经验的资深工程师，其在浪潮基于Ceph的性能优化经历与JD高度匹配，但其成果描述（MDS 10倍性能提升）过于惊人，核心风险在于**区分他是架构的“设计者”还是现有方案的“实现者”，以及他知识的深度是否足以支撑这些成就**。 * **三大核心疑点:** 1. **真实贡献边界 (Boundary of True Contribution):** 简历中提到的MDS和IO路径优化成果非常亮眼。必须探明他在这些工作中扮演的确切角色。这些颠覆性的改动（如MDS多线程化）是他主导设计的，还是团队负责人或架构师设计好后，他负责编码实现的？他对方案背后的复杂权衡理解多深？ 2. **底层知识深度 (Depth of Low-level Knowledge):** 简历强调了“结果”（OPS从2k到2W），但对实现这些结果所需克服的底层技术挑战（如锁竞争、缓存一致性、内存模型、内核交互）描述较少。JD明确要求底层性能调优能力，需要验证他是否具备从Linux内核、网络到CPU层面的系统性优化思维，还是仅仅停留在应用框架层面。 3. **技术栈的“T”型结构:** 候选人近期经验高度集中于CephFS的性能优化。他过去的经历（国美Redis封装、亚信计费系统）能否证明他在分布式KV、系统高可用设计等方面也具备足够的广度和深度？PMP认证对于一个纯技术专家岗是一个微小的“噪音”，需要确认他的职业热情仍在技术深耕。 --- ### **第二部分：面试框架 (Interview Framework)** | 考察领域 | 相关技术点 | 考察优先级 | | :--- | :--- | :--- | | **分布式存储核心 (Ceph)** | MDS架构与优化, CRUSH算法, Bluestore原理, OSD I/O路径, 数据一致性与EC | `重点考察` | | **C++系统编程与底层性能** | C++17新特性应用, 多线程模型与锁机制, 内存管理, Linux内核I/O (io_uring), 性能分析工具 (perf/gdb/eBPF) | `重点考察` | | **分布式系统设计广度** | 分布式KV存储 (Redis), CAP理论, 分布式一致性协议, 架构选型权衡 | `一般考察` | | **项目实践与工程能力** | 角色定位, 技术决策过程, 故障排查 (Troubleshooting), 系统压测与容量规划 | `一般考察` | --- ### **第三部分：面试问题与评分要点 (Interview Questions & Scoring Points)** #### **阶段一：破冰与项目深潜 (Ceph核心)** 1. **[主问题]** 我们从你最亮眼的项目开始。你提到将浪潮存储的MDS OPS从2K提升到了2W。请画一下你们优化前和优化后，MDS处理一个`create`请求的核心流程图，并解释关键差异点。 * **追问1:** 你提到将MDS从单线程改为了多线程，并为每个线程设计了独立的缓存和Journal。这立刻会引入复杂的缓存一致性和线程同步问题。你们是如何解决的？有没有遇到过棘手的锁竞争或死锁，具体是怎么解决的？ * **追问2:** Ceph社区长期维持MDS单线程模型必有其原因，比如简化状态管理。你们的多线程方案，在哪些场景下可能会比社区的单线程方案表现更差？你们做了怎样的取舍？ * **评分要点:** 重点考察其是否为方案的设计者。一个优秀回答者能清晰画出流程图，并对追问1中的并发难题对答如流，能深入解释锁的类型（自旋/互斥）、粒度以及数据同步机制。对于追问2，能清晰阐述技术决策的trade-off，而不是只说优点。如果对并发细节含糊其辞，很可能只是执行者。 2. **[主问题]** 你提到了“数控分离”的IO优化，将单流写带宽提升到12G/s。你明确了RDMA由其他部门实现，那么你负责的软件层面，具体做了哪些改造来适配和利用RDMA？ * **追问1:** 在这个新IO路径下，一个4K的写请求，从客户端的应用层buffer到最终在所有副本OSD上落盘，数据包是如何流转的？控制流和数据流具体指什么？ * **追问2:** 你提到了开启io_uring。相比libaio，io_uring在你们这个场景下最大的优势是什么？它如何减少系统调用和内存拷贝的开销？你是如何定量分析开启它带来的性能收益的？ * **评分要点:** 考察其对底层IO栈的理解深度。理想的回答应能清晰描述其负责的软件层逻辑，并能从内核、系统调用层面解释io_uring的优势。如果只能模糊地回答“用了RDMA就快了”、“开了io_uring就快了”，则说明其理解浮于表面。 3. **[主问题]** 你们的存储系统基于Ceph Quincy。为什么选择Bluestore作为存储引擎？它相比经典的Filestore，核心优势在哪里？ * **追问1:** Bluestore是如何管理裸设备空间的？它内部的RocksDB具体起了什么作用？ * **追问2:** Bluestore写IO的流程是怎样的？它如何通过WAL（Write-Ahead Log）保证数据写入的原子性和持久性？ * **评分要点:** Ceph基础知识的试金石。优秀的候选人应能准确说出Bluestore通过直接管理裸设备避免了文件系统的双写开销，并清晰解释RocksDB用于存储元数据(o-node, onode等)，WAL保证crash-safe。 #### **阶段二：编程与底层能力验证 (C++ & Performance)** 4. **[主问题]** 你的简历中提到熟悉C++17。请在你最近的Ceph项目代码中，举一个你使用C++11/14/17新特性解决实际问题的例子。 * **追问1:** 比如，你用`std::unique_ptr`或`std::shared_ptr`管理过哪些核心资源？为什么选择用它，解决了什么潜在的内存泄漏或悬挂指针问题？ * **追问2:** 在处理异步任务或回调时，有没有使用过lambda表达式或`std::function`？它们相比传统的函数指针有什么优势？ * **评分要点:** 验证其C++功底是否扎实。优秀的回答应能结合具体业务场景（如管理一个请求上下文对象、一个网络连接对象）来解释智能指针的必要性。如果只是泛泛而谈，说明实践经验不足。 5. **[主问题]** 在MDS多线程改造中，你们的线程模型是怎样的？固定大小的线程池，还是动态创建？线程间如何通信和分配任务？ * **追问1:** 共享数据（如目录树的缓存节点）的并发访问，你们主要用了哪些同步原语？`std::mutex`? `std::atomic`? 还是读写锁？为什么这么选？ * **追问2:** Ceph源码中大量使用了自己实现的协程库。在你的改造中，有接触或修改过相关的协程调度逻辑吗？ * **评分要点:** 深入考察其并发编程的实践经验。能清晰解释不同锁的适用场景，并对线程池的设计选择给出合理解释。如果对协程有了解则为加分项。 6. **[主问题]** 当你面对一个棘手的性能瓶颈，比如“系统CPU利用率很高但OPS上不去”，你的标准排查步骤是什么？ * **追问1.**: 你会使用哪些Linux工具来定位问题？比如，你会如何使用`perf`来找到热点函数？如何分析火焰图？ * **追问2**: 如果发现瓶颈在内核态的某个锁或I/O等待，你有什么思路去进一步分析？用过SystemTap或eBPF吗？ * **评分要点:** JD明确要求底层性能调优。这是必考题。一个“独角兽”级别的工程师必须能熟练使用`perf`、`gdb`等工具。能提到eBPF/BCC等更现代化的工具则大幅加分。如果只会用`top`和`iostat`，则能力不匹配。 #### **阶段三：知识广度与思维方式探测** 7. **[主问题]** 在国美时，你把Redis封装成了GCache。这个封装除了统一API外，还解决了哪些更深层次的问题？比如高可用、集群管理、监控告警？ * **追问1:** 你们的Redis集群遇到过热点Key问题吗？当时是如何发现和解决的？ * **追问2:** 如果让你从零设计一个分布式KV缓存，你会考虑哪些关键因素？为什么现在很多公司选择自研而不是直接用Redis Cluster？ * **评分要点:** 考察候选人在Ceph之外领域的知识广度。优秀的回答应能从平台化、可运维性、多租户隔离等角度阐述封装的价值，并能提出热点Key的多种解决方案（如业务侧打散、增加本地缓存、代理层分片等）。 8. **[主问题]** 你最早在亚信参与了计费系统和内存数据库MDB的分布式改造。请描述一下当时MDB从单点到集群，你们是如何解决数据分片和主从同步问题的？ * **追问1:** 你们当时采用的方案，数据一致性模型是怎样的？是最终一致性还是强一致性？ * **评分要点:** 这是对简历早起经历的“诚实度”检查。考察其对分布式系统基本问题的理解是否在多年工作中形成体系。如果对此项目描述不清，说明简历可能有水分，或者他只是边缘参与者。 9. **[主问题]** 回到浪潮的项目，你们决定基于Ceph Quincy重构，而不是在老版本上继续迭代。这是一个巨大的投入。请问你参与技术选型决策了吗？当时你们是如何评估这个决策的风险和收益的？ * **追问1:** 当时有没有评估过其他的开源方案，比如Lustre, GlusterFS等？为什么最终还是选择了Ceph作为基座？ * **评分要点:** 考察其架构视野和决策能力。即使他不是最终决策者，一个优秀的工程师也应该理解决策背后的逻辑和技术权衡。能清晰地从社区活跃度、生态、技术栈匹配度等方面分析则为佳。 10. **[主问题]** 在整个性能优化过程中，你遇到的最失败的一次尝试是什么？具体是什么问题，为什么失败了，你从中学到了什么？ * **评分要点:** 考察其技术坦诚度、反思和学习能力。回避问题或说没有失败是危险信号。一个好的回答会坦诚一个具体的技术困难（如某个锁方案导致性能回退），分析失败原因，并总结经验教训。