"use strict";var t=require("obsidian");function e(t,e,o,i){return new(o||(o=Promise))((function(n,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function r(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,r)}l((i=i.apply(t,e||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const o=["Custom","editingToolbar","editingToolbarSub","editingToolbarAdd","editingToolbarDelete","editingToolbarReload","codeblock-glyph","underline-glyph","superscript-glyph","subscript-glyph","bot-glyph","header-1","header-2","header-3","header-4","header-5","header-6","header-n","obsidian","obsidian-new","accessibility","activity","air-vent","airplay","alarm-check","alarm-clock-off","alarm-clock","alarm-minus","alarm-plus","album","alert-circle","alert-octagon","alert-triangle","align-center-horizontal","align-center-vertical","align-center","align-end-horizontal","align-end-vertical","align-horizontal-distribute-center","align-horizontal-distribute-end","align-horizontal-distribute-start","align-horizontal-justify-center","align-horizontal-justify-end","align-horizontal-justify-start","align-horizontal-space-around","align-horizontal-space-between","align-justify","align-left","align-right","align-start-horizontal","align-start-vertical","align-vertical-distribute-center","align-vertical-distribute-end","align-vertical-distribute-start","align-vertical-justify-center","align-vertical-justify-end","align-vertical-justify-start","align-vertical-space-around","align-vertical-space-between","anchor","angry","annoyed","aperture","apple","archive-restore","archive","armchair","arrow-big-down","arrow-big-left","arrow-big-right","arrow-big-up","arrow-down-circle","arrow-down-left","arrow-down-right","arrow-down","arrow-left-circle","arrow-left-right","arrow-left","arrow-right-circle","arrow-right","arrow-up-circle","arrow-up-left","arrow-up-right","arrow-up","asterisk","at-sign","award","axe","axis-3d","baby","backpack","baggage-claim","banana","banknote","bar-chart-2","bar-chart-3","bar-chart-4","bar-chart-horizontal","bar-chart","baseline","bath","battery-charging","battery-full","battery-low","battery-medium","battery","beaker","bed-double","bed-single","bed","beer","bell-minus","bell-off","bell-plus","bell-ring","bell","bike","binary","bitcoin","bluetooth-connected","bluetooth-off","bluetooth-searching","bluetooth","bold","bomb","bone","book-open","book","bookmark-minus","bookmark-plus","bookmark","bot","box-select","box","boxes","briefcase","brush","bug","building-2","building","bus","cake","calculator","calendar-check-2","calendar-check","calendar-clock","calendar-days","calendar-heart","calendar-minus","calendar-off","calendar-plus","calendar-range","calendar-search","calendar-x2","calendar-x","calendar","camera-off","camera","car","carrot","cast","check-circle-2","check-circle","check-square","check","chef-hat","cherry","chevron-down","chevron-first","chevron-last","chevron-left","chevron-right","chevron-up","chevrons-down-up","chevrons-down","chevrons-left-right","chevrons-left","chevrons-right-left","chevrons-right","chevrons-up-down","chevrons-up","chrome","cigarette-off","cigarette","circle-dot","circle-ellipsis","circle-slashed","circle","citrus","clapperboard","clipboard-check","clipboard-copy","clipboard-edit","clipboard-list","clipboard-signature","clipboard-type","clipboard-x","clipboard","clock-1","clock-10","clock-11","clock-12","clock-2","clock-3","clock-4","clock-5","clock-6","clock-7","clock-8","clock-9","clock","cloud-cog","cloud-drizzle","cloud-fog","cloud-hail","cloud-lightning","cloud-moon-rain","cloud-moon","cloud-off","cloud-rain-wind","cloud-rain","cloud-snow","cloud-sun-rain","cloud-sun","cloud","cloudy","clover","code-2","code","codepen","codesandbox","coffee","cog","coins","columns","command","compass","component","contact","contrast","cookie","copy","copyleft","copyright","corner-down-left","corner-down-right","corner-left-down","corner-left-up","corner-right-down","corner-right-up","corner-up-left","corner-up-right","cpu","credit-card","croissant","crop","cross","crosshair","crown","cup-soda","curly-braces","currency","database","delete","diamond","dice-1","dice-2","dice-3","dice-4","dice-5","dice-6","dices","diff","disc","divide-circle","divide-square","divide","dollar-sign","download-cloud","download","dribbble","droplet","droplets","drumstick","edit-2","edit-3","edit","egg-fried","egg","equal-not","equal","eraser","euro","expand","external-link","eye-off","eye","facebook","factory","fast-forward","feather","figma","file-archive","file-audio-2","file-audio","file-axis-3d","file-badge-2","file-badge","file-bar-chart-2","file-bar-chart","file-box","file-check-2","file-check","file-clock","file-code","file-cog-2","file-cog","file-diff","file-digit","file-down","file-edit","file-heart","file-image","file-input","file-json-2","file-json","file-key-2","file-key","file-line-chart","file-lock-2","file-lock","file-minus-2","file-minus","file-output","file-pie-chart","file-plus-2","file-plus","file-question","file-scan","file-search-2","file-search","file-signature","file-spreadsheet","file-symlink","file-terminal","file-text","file-type-2","file-type","file-up","file-video-2","file-video","file-volume-2","file-volume","file-warning","file-x2","file-x","file","files","film","filter","fingerprint","flag-off","flag-triangle-left","flag-triangle-right","flag","flame","flashlight-off","flashlight","flask-conical","flask-round","flip-horizontal-2","flip-horizontal","flip-vertical-2","flip-vertical","flower-2","flower","focus","folder-archive","folder-check","folder-clock","folder-closed","folder-cog-2","folder-cog","folder-down","folder-edit","folder-heart","folder-input","folder-key","folder-lock","folder-minus","folder-open","folder-output","folder-plus","folder-search-2","folder-search","folder-symlink","folder-tree","folder-up","folder-x","folder","folders","form-input","forward","frame","framer","frown","fuel","function-square","gamepad-2","gamepad","gauge","gavel","gem","ghost","gift","git-branch-plus","git-branch","git-commit","git-compare","git-fork","git-merge","git-pull-request-closed","git-pull-request-draft","git-pull-request","github","gitlab","glass-water","glasses","globe-2","globe","grab","graduation-cap","grape","grid","grip-horizontal","grip-vertical","hammer","hand-metal","hand","hard-drive","hard-hat","hash","haze","headphones","heart-crack","heart-handshake","heart-off","heart-pulse","heart","help-circle","hexagon","highlighter","history","home","hourglass","ice-cream","image-minus","image-off","image-plus","image","import","inbox","indent","indian-rupee","infinity","info","inspect","instagram","italic","japanese-yen","joystick","key","keyboard","lamp-ceiling","lamp-desk","lamp-floor","lamp-wall-down","lamp-wall-up","lamp","landmark","languages","laptop-2","laptop","lasso-select","lasso","laugh","layers","layout-dashboard","layout-grid","layout-list","layout-template","layout","leaf","library","life-buoy","lightbulb-off","lightbulb","line-chart","link-2off","link-2","link","linkedin","list-checks","list-end","list-minus","list-music","list-ordered","list-plus","list-start","list-video","list-x","list","loader-2","loader","locate-fixed","locate-off","locate","lock","log-in","log-out","luggage","magnet","mail-check","mail-minus","mail-open","mail-plus","mail-question","mail-search","mail-warning","mail-x","mail","mails","map-pin-off","map-pin","map","martini","maximize-2","maximize","medal","megaphone-off","megaphone","meh","menu","message-circle","message-square","mic-2","mic-off","mic","microscope","milestone","minimize-2","minimize","minus-circle","minus-square","minus","monitor-off","monitor-speaker","monitor","moon","more-horizontal","more-vertical","mountain-snow","mountain","mouse-pointer-2","mouse-pointer-click","mouse-pointer","mouse","move-3d","move-diagonal-2","move-diagonal","move-horizontal","move-vertical","move","music-2","music-3","music-4","music","navigation-2off","navigation-2","navigation-off","navigation","network","newspaper","octagon","option","outdent","package-2","package-check","package-minus","package-open","package-plus","package-search","package-x","package","paint-bucket","paintbrush-2","paintbrush","palette","palmtree","paperclip","party-popper","pause-circle","pause-octagon","pause","pen-tool","pencil","percent","person-standing","phone-call","phone-forwarded","phone-incoming","phone-missed","phone-off","phone-outgoing","phone","pie-chart","piggy-bank","pin-off","pin","pipette","pizza","plane","play-circle","play","plug-zap","plus-circle","plus-square","plus","pocket","podcast","pointer","pound-sterling","power-off","power","printer","puzzle","qr-code","quote","radio-receiver","radio","recycle","redo-2","redo","refresh-ccw","refresh-cw","regex","repeat-1","repeat","reply-all","reply","rewind","rocket","rocking-chair","rotate-3d","rotate-ccw","rotate-cw","rss","ruler","russian-ruble","save","scale-3d","scale","scaling","scan-face","scan-line","scan","scissors","screen-share-off","screen-share","scroll","search","send","separator-horizontal","separator-vertical","server-cog","server-crash","server-off","server","settings-2","settings","share-2","share","sheet","shield-alert","shield-check","shield-close","shield-off","shield","shirt","shopping-bag","shopping-cart","shovel","shrink","shrub","shuffle","sidebar-close","sidebar-open","sidebar","sigma","signal-high","signal-low","signal-medium","signal-zero","signal","siren","skip-back","skip-forward","skull","slack","slash","slice","sliders-horizontal","sliders","smartphone-charging","smartphone","smile-plus","smile","snowflake","sofa","sort-asc","sort-desc","speaker","sprout","square","star-half","star-off","star","stethoscope","sticker","sticky-note","stop-circle","stretch-horizontal","stretch-vertical","strikethrough","subscript","sun-dim","sun-medium","sun-moon","sun-snow","sun","sunrise","sunset","superscript","swiss-franc","switch-camera","sword","swords","syringe","table-2","table","tablet","tag","tags","target","tent","terminal-square","terminal","text-cursor-input","text-cursor","thermometer-snowflake","thermometer-sun","thermometer","thumbs-down","thumbs-up","ticket","timer-off","timer-reset","timer","toggle-left","toggle-right","tornado","toy-brick","train","trash-2","trash","tree-deciduous","tree-pine","trees","trello","trending-down","trending-up","triangle","trophy","truck","tv-2","tv","twitch","twitter","type","umbrella","underline","undo-2","undo","unlink-2","unlink","unlock","upload-cloud","upload","usb","user-check","user-cog","user-minus","user-plus","user-x","user","users","utensils-crossed","utensils","venetian-mask","verified","vibrate-off","vibrate","video-off","video","view","voicemail","volume-1","volume-2","volume-x","volume","wallet","wand-2","wand","watch","waves","webcam","webhook","wifi-off","wifi","wind","wine","wrap-text","wrench","x-circle","x-octagon","x-square","x","youtube","zap-off","zap","zoom-in","zoom-out","create-new","trash","search","right-triangle","document","folder","pencil","left-arrow","right-arrow","three-horizontal-bars","dot-network","audio-file","image-file","pdf-file","gear","documents","blocks","go-to-file","presentation","cross-in-box","microphone","microphone-filled","two-columns","link","popup-open","checkmark","hashtag","left-arrow-with-tail","right-arrow-with-tail","up-arrow-with-tail","down-arrow-with-tail","lines-of-text","vertical-three-dots","pin","magnifying-glass","info","horizontal-split","vertical-split","calendar-with-checkmark","folder-minus","sheets-in-box","up-and-down-arrows","broken-link","cross","any-key","reset","star","crossed-star","dice","filled-pin","enter","help","vault","open-vault","paper-plane","bullet-list","uppercase-lowercase-a","star-list","expand-vertically","languages","switch","pane-layout","install","sync","check-in-circle","sync-small","check-small","paused","forward-arrow","stacked-levels","bracket-glyph","note-glyph","tag-glyph","price-tag-glyph","heading-glyph","bold-glyph","italic-glyph","strikethrough-glyph","highlight-glyph","code-glyph","quote-glyph","link-glyph","bullet-list-glyph","number-list-glyph","checkbox-glyph","undo-glyph","redo-glyph","up-chevron-glyph","down-chevron-glyph","left-chevron-glyph","right-chevron-glyph","percent-sign-glyph","keyboard-glyph","double-up-arrow-glyph","double-down-arrow-glyph","image-glyph","wrench-screwdriver-glyph","clock","plus-with-circle","minus-with-circle","indent-glyph","unindent-glyph","fullscreen","exit-fullscreen","cloud","run-command","compress-glyph","enlarge-glyph","scissors-glyph","up-curly-arrow-glyph","down-curly-arrow-glyph","plus-minus-glyph","links-going-out","links-coming-in","add-note-glyph","duplicate-glyph","clock-glyph","calendar-glyph","command-glyph","dice-glyph","file-explorer-glyph","graph-glyph","import-glyph","navigate-glyph","open-elsewhere-glyph","presentation-glyph","paper-plane-glyph","question-mark-glyph","restore-file-glyph","search-glyph","star-glyph","play-audio-glyph","stop-audio-glyph","tomorrow-glyph","wand-glyph","workspace-glyph","yesterday-glyph","box-glyph","merge-files-glyph","merge-files","two-blank-pages","scissors","paste","paste-text","split","select-all-text","wand","github-glyph","reading-glasses","user-manual-filled","discord-filled","chat-bubbles-filled","experiment-filled","bracket-glyph","box-glyph","check-small","dice-glyph","dice","discord","right-triangle","heading-glyph","help","keyboard-toggle","broken-link","experiment","left-arrow","link","link-glyph","links-coming-in","links-going-out","open-vault","paused","question-mark-glyph","right-arrow","sidebar-left","sidebar-right","sheets-in-box","star-list","sync-small","tabs","uppercase-lowercase-a","vault","stack-horizontal","stack-vertical","stretch-horizontal","stretch-vertical","distribute-space-horizontal","distribute-space-vertical"];function i(t){let e=Date.now().toString(36);return e+=Math.random().toString(36).substr(3,t),e}function n(t,e,o,i){let n,s={index:-1,subindex:-1},a=i;return o?a.forEach(((t,o)=>{if("SubmenuCommands"in t&&(n=t.SubmenuCommands.findIndex((t=>t.id==e.id)),n>=0))return s={index:o,subindex:n},s})):(n=a.findIndex((t=>t.id==e.id)),s={index:n,subindex:-1}),s}function s(t,e){let o,i=e.getLine(e.getCursor().line),n="";const s=/^(\>*(\[[!\w]+\])?\s*)#+\s/;let a;const r=i.match(s);r&&(a=r[0].trim()),t==a||""==t?o=i.replace(s,"$1"):(o=i.replace(/^\s*(#*|\>|\-|\d+\.)\s*/m,""),o=t+" "+o),n=""!=o?e.getRange(e.getCursor(),{line:e.getCursor().line,ch:i.length}):e.getRange(e.getCursor(),{line:e.getCursor().line,ch:0}),e.setLine(e.getCursor().line,o),e.setCursor({line:e.getCursor().line,ch:Number(o.length-n.length)})}function a(t,e){if(!e)return;const o=e.getSelection();if(!o||""===o.trim())return;const i=/<font\s+color=["']?[^"'>]+["']?>(.*?)<\/font>/gms,n=i.test(o);if(s=o,new RegExp(`^<font\\s+color=["']?${t}["']?>(.+)<\\/font>$`,"ms").test(s.trim()))return;var s;const a=o.replace(i,((e,o)=>o.split("\n").map((e=>e.trim()?`<font color="${t}">${e}</font>`:e)).join("\n"))),r=a===o?o.split("\n").map((e=>e.trim()?`<font color="${t}">${e}</font>`:e)).join("\n"):a,l=e.listSelections().map((e=>{const o=n?0:`<font color="${t}"></font>`.length;return e.anchor.line<e.head.line||e.anchor.line===e.head.line&&e.anchor.ch<e.head.ch?{anchor:{line:e.anchor.line,ch:e.anchor.ch},head:{line:e.head.line,ch:e.head.ch+o}}:{anchor:{line:e.anchor.line,ch:e.anchor.ch+o},head:{line:e.head.line,ch:e.head.ch}}}));e.replaceSelection(r),e.setSelections(l)}function r(t,e){if(!e)return;const o=e.getSelection();if(!o||""===o.trim())return;const i=/<span\s+style=["']?background:(?:#[0-9a-fA-F]{3,6}|rgba?\([^)]+\))["']?>([\s\S]*?)<\/span>/g.test(o);if(((t,e)=>{const o=e.replace(/([()[{*+.$^\\|?])/g,"\\$1");return new RegExp(`^<span\\s+style=["']?background:${o}["']?>([sS]+)<\\/span>$`).test(t.trim())})(o,t))return;let n;n=i?o.replace(/(background:)(?:#[0-9a-fA-F]{3,6}|rgba?\([^)]+\))/gi,`$1${t}`):o.split("\n").map((e=>e.trim()?`<span style="background:${t}">${e}</span>`:e)).join("\n");const s=e.listSelections().map((e=>{const o=i?0:`<span style="background:${t}"></span>`.length;return e.anchor.line<e.head.line||e.anchor.line===e.head.line&&e.anchor.ch<e.head.ch?{anchor:{line:e.anchor.line,ch:e.anchor.ch},head:{line:e.head.line,ch:e.head.ch+o}}:{anchor:{line:e.anchor.line,ch:e.anchor.ch+o},head:{line:e.head.line,ch:e.head.ch}}}));e.replaceSelection(n),e.setSelections(s)}let l;const c=e=>{l=t.requireApiVersion("0.15.0")?activeWindow.document:window.document;let o=l.getElementById("editingToolbarModalBar");o&&(o.style.visibility=0==e?"hidden":"visible")},d=e=>{l=t.requireApiVersion("0.15.0")?activeWindow.document:window.document,l.documentElement.style.setProperty("--toolbar-vertical-offset",`${e.verticalPosition}px`)},u=e=>{l=t.requireApiVersion("0.15.0")?activeWindow.document:window.document,l.documentElement.style.setProperty("--toolbar-horizontal-offset",`${e.horizontalPosition}px`)};var p={"Editing Toolbar append method":"Editing Toolbar append method","Choose where Editing Toolbar will append upon regeneration. To see the change, hit the refresh button below, or in the status bar menu.":"Choose where Editing Toolbar will append upon regeneration. To see the change, hit the refresh button below, or in the status bar menu.","Editing Toolbar aesthetic":"Editing Toolbar aesthetic","Choose between a glass morphism ,tiny and default style for Editing Toolbar. To see the change, hit the refresh button below, or in the status bar menu.":"Choose between a glass morphism ,tiny and default style for Editing Toolbar. To see the change, hit the refresh button below, or in the status bar menu.","Editing Toolbar position":"Editing Toolbar position","Choose between fixed position or cursor following mode.":"Choose between fixed position , cursor following  or Top mode .","Editing Toolbar columns":"Editing Toolbar columns","Choose the number of columns per row to display on Editing Toolbar.":"Choose the number of columns per row to display on Editing Toolbar.","Editing Toolbar refresh":"Editing Toolbar refresh","Editing Toolbar commands":"Editing Toolbar commands","Add a command onto Editing Toolbar from Obsidian's commands library. To reorder the commands, drag and drop the command items. To delete them, use the delete buttom to the right of the command item. Editing Toolbar will not automaticaly refresh after reordering commands. Use the refresh button above.":"Add a command onto Editing Toolbar from Obsidian's commands library. To reorder the commands, drag and drop the command items. To delete them, use the delete buttom to the right of the command item. Editing Toolbar will not automaticaly refresh after reordering commands. Use the refresh button above.","Format Brush Off!":"Format Brush Off!","Hide & Show":"Hide & Show","Editing Toolbar will only refresh automatically after you have either added or deleted a command from it. To see UI changes to editingToolbar (above settings changes) use the refresh button. If you forget to refresh in settings, no worries. There is also a refresh button in the editingToolbar status bar menu.":"Editing Toolbar will only refresh automatically after you have either added or deleted a command from it. To see UI changes to editingToolbar (above settings changes) use the refresh button. If you forget to refresh in settings, no worries. There is also a refresh button in the editingToolbar status bar menu.","Font-Color formatting brush ON!":"Font-Color formatting brush ON!",More:"More","Font Colors":"Font Colors","Format Brush":"Format Brush","Background color":"Background color",Refresh:"Refresh",Add:"Add",Delete:"Delete","Change Command name":"Change Command name","Add submenu":"Add submenu","add hr":"add hr","Enter the icon code, it looks like <svg>.... </svg> format":"Enter the icon code, it looks like <svg>.... </svg> format","Please enter a new name：":"Please enter a new name：","Drag the slider to move the position":"Drag the slider to move the position","Plugin Settings":"Plugin Settings","Background-color formatting brush ON!":"Background-color formatting brush ON!\nClick the  mouse middle or right key to close the formatting-brush","Clear formatting brush ON!":"Clear formatting brush ON!","Clear formatting brush ON!\nClick the  mouse middle or right key to close the formatting-brush":"Clear formatting brush ON!\nClick the  mouse middle or right key to close the formatting-brush","The toolbar is displayed when the mouse moves over it, otherwise it is automatically hidden":"The toolbar is displayed when the mouse moves over it, otherwise it is automatically hidden","Editing Toolbar Auto-hide":"Editing Toolbar Auto-hide","Custom Backgroud Color":"Custom Backgroud Color","Custom Font Color":"Custom Font Color","🎨 Set custom background":"🎨 Set custom background","🖌️ Set custom font color":"🖌️ Set custom font color","Click on the picker to adjust the colour":"Click on the picker to adjust the colour","Mobile enabled or not":"Mobile enabled or not","Whether to enable the plugin for the mobile client, the default is enabled.":"Whether to enable the plugin for the mobile client, the default is enabled.","Whether to enable on mobile devices with device width less than 768px, the default is disable.":"Whether to enable on mobile devices with device width less than 768px, the default is disable.",Reset:"Reset",Fix:"Fix","Fix Editing Toolbar":"Fix Editing Toolbar",General:"General",Appearance:"Appearance",Commands:"Commands","Choose between fixed position or cursor following mode":"Choose between fixed position , cursor following  or Top mode .","Add and manage commands":"Add and manage commands","Choose where Editing Toolbar will append upon regeneration.":"Choose where Editing Toolbar will append upon regeneration.","Whether to enable on mobile devices with device width less than 768px":"Whether to enable on mobile devices with device width less than 768px","Choose between a glass morphism, tiny and default style":"Choose between a glass morphism, tiny and default style","Refresh Toolbar":"Refresh Toolbar","Add Command":"Add Command",Settings:"Settings","Position Style":"Position Style",Columns:"Columns","Drag to Adjust Position":"Drag to Adjust Position","Vertical Position":"Vertical Position","Horizontal Position":"Horizontal Position","Toolbar Position":"Toolbar Position","Choose an icon":"Choose an icon","Search for an icon...":"Search for an icon...",All:"All",Obsidian:"Obsidian",Glyph:"Glyph",Custom:"Custom","Choose a command":"Choose a command","The command":"The command","already exists":"already exists","Enter the icon code, format as <svg>.... </svg>":"Enter the icon code, format as <svg>.... </svg>","No matching icons found":"No matching icons found","Custom Commands":"Custom Commands","Toolbar Commands":"Toolbar Commands",ID:"ID",Prefix:"Prefix",Suffix:"Suffix",Pattern:"Pattern","Custom Format Commands":"Custom Format Commands","Add, edit or delete custom format commands":"Add, edit or delete custom format commands",Edit:"Edit","Command ID":"Command ID",'Unique identifier, no spaces, e.g.: "my-custom-format"':'Unique identifier, no spaces, e.g.: "my-custom-format"',"Displayed name in toolbar and menu":"Displayed name in toolbar and menu","Add content before selected text":"Add content before selected text","Add content after selected text":"Add content after selected text","Character offset of cursor after formatting":"Character offset of cursor after formatting","Line offset of cursor after formatting":"Line offset of cursor after formatting","Whether to insert at the beginning of the next line":"Whether to insert at the beginning of the next line","Command icon (click to select)":"Command icon (click to select)","Choose Icon":"Choose Icon",Save:"Save",Cancel:"Cancel","Edit Custom Command":"Edit Custom Command","Add Custom Command":"Add Custom Command","Command ID and command name cannot be empty":"Command ID and command name cannot be empty","Command ID cannot contain spaces":"Command ID cannot contain spaces",'Command ID "${this.commandId}" already exists':'Command ID "${this.commandId}" already exists',"Cursor Position Offset":"Cursor Position Offset","Line Offset":"Line Offset","Line Head Format":"Line Head Format",Icon:"Icon","Command Name":"Command Name","Are you sure you want to restore all settings to default? This will lose all your custom configurations.":"Are you sure you want to restore all settings to default? This will lose all your custom configurations.","Restore default":"Restore default","Restore default settings":"Restore default settings","🔄Restore default settings":"🔄Restore default settings","🔧Data repair":"🔧Data repair","Command IDs have been successfully repaired!":"Command IDs have been successfully repaired!","No command IDs need to be repaired":"No command IDs need to be repaired","Error repairing command IDs, please check the console for details":"Error repairing command IDs, please check the console for details","Error restoring default settings, please check the console for details":"Error restoring default settings, please check the console for details","Successfully restored default settings!":"Successfully restored default settings!",Close:"Close",Tips:"Tips","This update changed the ID of some commands, please click this button to repair the commands to ensure the toolbar works properly":"This update changed the ID of some commands, please click this button to repair the commands to ensure the toolbar works properly","Repair command ID":"Repair command ID","This will reset all your custom configurations":"This will reset all your custom configurations","Notice:":"Notice:","This update rebuilds the entire code, reducing resource consumption":"This update rebuilds the entire code, reducing resource consumption","Optimized mobile usage, added canvas support, and added custom commands":"Optimized mobile usage, added canvas support, and added custom commands","⚠️This update is not compatible with 2.x version command ids, please click [Repair command] to be compatible":"⚠️This update is not compatible with 2.x version command ids, please click [Repair command] to be compatible","⚠️If you want to restore the default settings, please click [Restore default settings]":"⚠️If you want to restore the default settings, please click [Restore default settings]","Please execute a editingToolbar format command first, then enable the format brush":"Please execute a editingToolbar format command first, then enable the format brush","Format brush ON! Select text to apply【":"Format brush ON! Select text to apply【","】format":"】format\nClick the mouse middle or right key to close the formatting-brush","Add to Toolbar":"Add to Toolbar","This command is already in the toolbar":"This command is already in the toolbar","Command added to toolbar":"Command added to toolbar","Add this command to the toolbar":"Add this command to the toolbar","Callout Type":"Callout Type",Title:"Title","Optional, leave blank for default title":"Optional, leave blank for default title","Input title":"Input title","Collapse State":"Collapse State",Open:"Open",Closed:"Closed",Content:"Content",Insert:"Insert",Default:"Default","Input content":"Input content","Link Text":"Link Text","Link Alias":"Link Alias","Link URL":"Link URL","Embed Content":"Embed Content","Image Size":"Image Size","Insert New Line":"Insert New Line","Paste and Parse":"Paste and Parse","URL Format Error":"URL Format Error","Image Width":"Image Width","Image Height":"Image Height","If it is an image, turn on":"If it is an image, turn on","Insert a link on the next line":"Insert a link on the next line","Link Alias(optional)":"Link Alias(optional)",Alias:"Alias",Optional:"Optional","Default 0, format will keep the text selected":"Default 0, format will keep the text selected","to insert":"to insert","Latest Changes":"Latest Changes","📋View full changelog":"📋View full changelog","Open changelog":"Open changelog","Loading changelog...":"Loading changelog...","Open the complete changelog in your browser":"Open the complete changelog in your browser","Enable multiple configurations":"Enable multiple configurations","Enable different command configurations for each position style (following, top, fixed)":"Enable different command configurations for each position style (following, top, fixed)","Currently editing commands for":"Currently editing commands for","position style":"position style","Current Configuration":"Current Configuration","Switch between different command configurations":"Switch between different command configurations","Following Style":"Following Style","Top Style":"Top Style","Fixed Style":"Fixed Style","Mobile Style":"Mobile Style",configuration:"configuration","Deploy command to configurations":"Deploy command to configurations","All Configurations":"All Configurations",Deploy:"Deploy","Command deployed to selected configurations":"Command deployed to selected configurations","No configuration selected for deployment":"No configuration selected for deployment","Command already exists in selected configurations":"Command already exists in selected configurations","Command deployed to: ":"Command deployed to: ","Command deleted":"Command deleted","Confirm delete?":"Confirm delete?","Are you sure you want to restore all settings to default? But custom commands will be preserved.":"Are you sure you want to restore all settings to default? But custom commands will be preserved.","Successfully restored default settings! (Custom commands preserved)":"Successfully restored default settings! (Custom commands preserved)","This will reset all your custom configurations, but custom commands will be preserved":"This will reset all your custom configurations, but custom commands will be preserved","Import/Export":"Import/Export","Export Configuration":"Export Configuration","Export your toolbar configuration to share with others":"Export your toolbar configuration to share with others",Export:"Export","Import Configuration":"Import Configuration","Import toolbar configuration from JSON":"Import toolbar configuration from JSON",Import:"Import","Usage Instructions":"Usage Instructions","Export: Generate a JSON configuration that you can save or share":"Export: Generate a JSON configuration that you can save or share","Import: Paste a previously exported JSON configuration":"Import: Paste a previously exported JSON configuration","You can choose to export all settings, only toolbar commands, or only custom commands":"You can choose to export all settings, only toolbar commands, or only custom commands","When importing, the plugin will only update the settings included in the import data":"When importing, the plugin will only update the settings included in the import data","Warning: Importing configuration will overwrite your current settings. Consider exporting your current configuration first as a backup.":"Warning: Importing configuration will overwrite your current settings. Consider exporting your current configuration first as a backup.","Export Type":"Export Type","Choose what to export":"Choose what to export","All Settings":"All Settings","Toolbar Commands Only":"Toolbar Commands Only","Custom Commands Only":"Custom Commands Only","Export Content":"Export Content","Copy this content to share with others":"Copy this content to share with others","Loading...":"Loading...","Copy to Clipboard":"Copy to Clipboard","Configuration copied to clipboard":"Configuration copied to clipboard","Failed to copy configuration":"Failed to copy configuration","Paste the configuration JSON here":"Paste the configuration JSON here","Paste configuration here...":"Paste configuration here...","Invalid import data":"Invalid import data","Configuration imported successfully":"Configuration imported successfully","No valid configuration found in import data":"No valid configuration found in import data","Failed to import configuration. Invalid format.":"Failed to import configuration. Invalid format.","Import Mode":"Import Mode","Choose how to import the configuration":"Choose how to import the configuration","Update Mode (Add new items and update existing ones)":"Update Mode (Add new items and update existing ones)","Overwrite Mode (Replace all settings with imported ones)":"Overwrite Mode (Replace all settings with imported ones)","Configuration imported successfully (Overwrite mode)":"Configuration imported successfully (Overwrite mode)","Configuration imported successfully (Update mode)":"Configuration imported successfully (Update mode)","Warning: Overwrite mode will completely replace your current settings with the imported ones. Consider exporting your current configuration first as a backup.":"Warning: Overwrite mode will completely replace your current settings with the imported ones. Consider exporting your current configuration first as a backup.","Warning: Update mode will add new items and update existing ones based on the imported configuration.":"Warning: Update mode will add new items and update existing ones based on the imported configuration.","Add Format Command":"Add Format Command",Regex:"Regex","Prefix/Suffix":"Prefix/Suffix","Add Regex Command":"Add Regex Command","Please select text first":"Please select text first","The selected text does not meet the condition requirements":"The selected text does not meet the condition requirements","Regex command execution error:":"Regex command execution error:","Copy code":"Copy code","Copied!":"Copied!","Explain the syntax of JavaScript regular expressions":"Explain the syntax of JavaScript regular expressions","Apply regular expression replacement":"Apply regular expression replacement","Conditional matching":"Conditional matching","Complete regular expression code (copy to AI for explanation)":"Complete regular expression code (copy to AI for explanation)","Error:":"Error:","Regex pattern cannot be empty":"Regex pattern cannot be empty","Command already exists":"Command already exists","Choose icon":"Choose icon","URL to Markdown link":"URL to Markdown link","Convert MM/DD/YYYY to YYYY-MM-DD":"Convert MM/DD/YYYY to YYYY-MM-DD","Add bold to keywords":"Add bold to keywords","Format phone number":"Format phone number","Remove extra spaces":"Remove extra spaces","Convert HTML bold tags to Markdown format":"Convert HTML bold tags to Markdown format","Convert quoted text to quote block":"Convert quoted text to quote block","Convert CSV to Markdown table row":"Convert CSV to Markdown table row","Add uniform alias to Markdown links":"Add uniform alias to Markdown links","Delete empty lines (multiline mode)":"Delete empty lines (multiline mode)","Add list symbol to each line (multiline mode)":"Add list symbol to each line (multiline mode)","If the text contains important, set the text highlight (conditional format)":"If the text contains important, set the text highlight (conditional format)","Matching pattern":"Matching pattern","Regex pattern to match":"Regex pattern to match","Replacement pattern (use $1, $2, etc. to reference capture groups)":"Replacement pattern (use $1, $2, etc. to reference capture groups)","Ignore case":"Ignore case","Global replace":"Global replace","Multiline mode":"Multiline mode","Use condition":"Use condition","Condition pattern":"Condition pattern","Only apply custom command when text matches the condition":"Only apply custom command when text matches the condition","Must exist regular expression or text":"Must exist regular expression or text","Replacement pattern":"Replacement pattern","Match case-insensitive":"Match case-insensitive","^ and $ match the start and end of each line":"^ and $ match the start and end of each line","Replace all matches":"Replace all matches",Command:"Command","Error: ":"Error:","Input example text to view the formatting effect of the command...":"Input example text to view the formatting effect of the command...",Description:"Description","[Example]":"[Example]","[Requirements]":"[Requirements]","[Output]":"[Output]","AI question template:":"AI question template:","I need to convert the url to a markdown format link":"I need to convert the url to a markdown format link","For example, convert https://example.com to [https://example.com](https://example.com)":"For example, convert https://example.com to [https://example.com](https://example.com)","Use js regular expression to implement, and output the parameters in the following format (the result does not need to be escaped with json)":"Use js regular expression to implement, and output the parameters in the following format (the result does not need to be escaped with json)","[Description]":"[Description]","How to use AI to get regular expressions?":"How to use AI to get regular expressions?","Regular expression examples":"Regular expression examples","Edit regular expression command":"Edit regular expression command","Add regular expression command":"Add regular expression command","Result:":"Result:","Example text:":"Example text:",Preview:"Preview",Result:"Result","Please select text or copy text to clipboard first":"Please select text or copy text to clipboard first","Overwrite Import":"Overwrite Import","Update Import":"Update Import","Importing configuration...":"Importing configuration...","Following Style Only":"Following Style Only","Top Style Only":"Top Style Only","Fixed Style Only":"Fixed Style Only","Mobile Style Only":"Mobile Style Only","Unknown import type":"Unknown import type","All Toolbar Commands":"All Toolbar Commands","Initialize Commands":"Initialize Commands","Copy commands from the main menu configuration":"Copy commands from the main menu configuration","Initialize commands to default settings":"Initialize commands to default settings","Reset Commands":"Reset Commands","Commands reset successfully":"Commands reset successfully","Following style commands initialized from current menu commands":"Following style commands initialized from current menu commands","Commands initialized successfully":"Commands initialized successfully","Reset to Menu Commands":"Reset to Menu Commands","Are you sure you want to reset the current configuration?":"Are you sure you want to reset the current configuration?","Following style commands successfully initialized":"Following style commands successfully initialized","Top style commands successfully initialized":"Top style commands successfully initialized","Fixed style commands successfully initialized":"Fixed style commands successfully initialized","Mobile style commands successfully initialized":"Mobile style commands successfully initialized","Reset commands to default settings":"Reset commands to default settings",Clear:"Clear","Remove all commands from this configuration":"Remove all commands from this configuration","Are you sure you want to clear all commands under the current style?":"Are you sure you want to clear all commands under the current style?","Current style commands have been cleared":"Current style commands have been cleared","Manage Commands":"Manage Commands","Reset or clear all commands in this configuration":"Reset or clear all commands in this configuration","One-click clear":"One-click clear","Import Commands from Other Styles":"Import Commands from Other Styles","Copy commands from another style configuration":"Copy commands from another style configuration","Main menu only":"Main menu only","This import will update:":"This import will update:","Custom commands":"Custom commands","Toolbar commands":"Toolbar commands","General settings":"General settings","Please paste configuration data first":"Please paste configuration data first","Invalid import data format":"Invalid import data format","Import From":"Import From","This import will:":"This import will:","Update general settings":"Update general settings","Update Main Menu Commands":"Update Main Menu Commands","Update Custom Commands":"Update Custom Commands","Update Following Style Commands":"Update Following Style Commands","Update Top Style Commands":"Update Top Style Commands","Update Fixed Style Commands":"Update Fixed Style Commands","Update Mobile Style Commands":"Update Mobile Style Commands","Clear all Main Menu Commands":"Clear all Main Menu Commands","Clear all Custom Commands":"Clear all Custom Commands","Clear all Following Style Commands":"Clear all Following Style Commands","Clear all Top Style Commands":"Clear all Top Style Commands","Clear all Fixed Style Commands":"Clear all Fixed Style Commands","Clear all Mobile Style Commands":"Clear all Mobile Style Commands","Overwrite Mode (Replace settings with imported ones)":"Overwrite Mode (Replace settings with imported ones)","Warning: Overwrite mode will replace existing settings with imported ones.":"Warning: Overwrite mode will replace existing settings with imported ones.","Warning: Update mode will add new items and update existing ones.":"Warning: Update mode will add new items and update existing ones.","Enable Multiple Config":"Enable Multiple Config","Set Multiple Config to:":"Set Multiple Config to:",Enable:"Enable",Disable:"Disable","Set Position Style to:":"Set Position Style to:",Following:"Following",Top:"Top",Fixed:"Fixed",Mobile:"Mobile","All commands":"All commands","⚠️ Overwrite mode will replace existing settings with imported ones.":"⚠️ Overwrite mode will replace existing settings with imported ones.","ℹ️ Update mode will merge imported settings with existing ones.":"ℹ️ Update mode will merge imported settings with existing ones.","Do you want to continue?":"Do you want to continue?","Imported settings:":"Imported settings:","Imported commands:":"Imported commands:","Disable toolbar for this view":"Disable toolbar for this view","Enable toolbar for this view":"Enable toolbar for this view","Manage all view types":"Manage all view types","Current View: ":"Current View: ","Appearance Style":"Appearance Style","Position Settings":"Position Settings","All commands have been removed":"All commands have been removed","Join the Community":"Join the Community","Share your toolbar settings and styles in our":"Share your toolbar settings and styles in our","Get inspired by what others have created or showcase your own customizations.":"Get inspired by what others have created or showcase your own customizations.","Toolbar preview":"Toolbar preview (for example only)","Toolbar theme":"Toolbar theme","Select a preset toolbar theme, automatically setting the background color, icon color, and size":"Select a preset toolbar theme, automatically setting the background color, icon color, and size","Toolbar background color":"Toolbar background color","Set the background color of the toolbar":"Set the background color of the toolbar","Toolbar icon color":"Toolbar icon color","Set the color of the toolbar icon":"Set the color of the toolbar icon","Toolbar icon size":"Toolbar icon size","Set the size of the toolbar icon (px) default 18px":"Set the size of the toolbar icon (px) default 18px","Custom theme":"Custom theme","Fixed position offset":"Fixed position offset","Choose the offset of the Editing Toolbar in the fixed position.":"Choose the offset of the Editing Toolbar in the fixed position."},m={"Editing Toolbar append method":"工具栏的附加方法。","Choose where Editing Toolbar will append upon regeneration. To see the change, hit the refresh button below, or in the status bar menu.":"工具栏在Obsidian中的追加的位置，只对固定和跟随模式有效。如果你遇到工具栏显示问题，可以选择body试试。请点击下面或者状态栏菜单中的刷新按钮生效。","Editing Toolbar aesthetic":"工具栏样式","Choose between a glass morphism ,tiny and default style for Editing Toolbar. To see the change, hit the refresh button below, or in the status bar menu.":"样式有毛玻璃,简约和默认风格选择。请点击下面或者状态栏菜单中的刷新按钮生效。","Editing Toolbar position":"工具栏位置","Choose between fixed position or cursor following mode.":"在固定位置,光标跟随模式或者置顶模式之间进行选择。","Editing Toolbar columns":"工具栏栏目数","Choose the number of columns per row to display on Editing Toolbar.":"选择在Editing Toolbar上显示的每行的列数。","Editing Toolbar refresh":"刷新工具栏","Editing Toolbar commands":"在工具栏中添加命令","Add a command onto Editing Toolbar from Obsidian's commands library. To reorder the commands, drag and drop the command items. To delete them, use the delete buttom to the right of the command item. Editing Toolbar will not automaticaly refresh after reordering commands. Use the refresh button above.":"从Obsidian的命令库中添加一个命令到工具栏。要重新排列命令，可以拖放命令项。要删除它们，请使用命令项右边的删除按钮。图标选择Custom可以自定义图标","Format Brush Off!":"关闭格式刷！","Hide & Show":"隐藏 & 显示","Editing Toolbar will only refresh automatically after you have either added or deleted a command from it. To see UI changes to editingToolbar (above settings changes) use the refresh button. If you forget to refresh in settings, no worries. There is also a refresh button in the editingToolbar status bar menu.":"对外观的更改生效需要使用刷新按钮。如果你忘记在设置中刷新，在状态栏菜单中也有一个刷新按钮。","Font-Color formatting brush ON!":"字体颜色格式刷开启\n点击鼠标中键或者右键关闭格式刷",More:"更多","Font Colors":"字体颜色","Format Brush":"格式刷","Background color":"背景颜色",Refresh:"刷新",Add:"添加",Delete:"删除","Change Command name":"更改命令名称","Add submenu":"添加子菜单","add hr":"添加分割线","Enter the icon code, it looks like <svg>.... </svg> format":"输入图标代码，类似<svg>.... </svg>格式","Please enter a new name：":"请输入新名称：","Drag the slider to move the position":"拖动滑块来移动位置","Plugin Settings":"插件设置","Background-color formatting brush ON!":"开启背景色格式刷","Clear formatting brush ON!":"清除格式刷已开启","Clear formatting brush ON!\nClick the  mouse middle or right key to close the formatting-brush":"清除格式刷已开启\n点击鼠标中键或者右键关闭格式刷","The toolbar is displayed when the mouse moves over it, otherwise it is automatically hidden":"当鼠标移到工具栏上方时，工具栏显示，否则自动隐藏","Editing Toolbar Auto-hide":"工具栏是否自动隐藏","Custom Backgroud Color":"设置自定义背景色","Custom Font Color":"设置自定义字体颜色","🎨 Set custom background":"🎨 设置自定义背景","🖌️ Set custom font color":"🖌️ 设置自定义字体颜色","Click on the picker to adjust the colour":"点击选取器来调整颜色","Mobile enabled or not":"是否在移动端启用","Whether to enable on mobile devices with device width less than 768px, the default is disable.":"是否在设备宽度小于768的移动设备启用。默认不启用",Reset:"重置",Fix:"修复","Fix Editing Toolbar":"修复工具栏",General:"常规",Appearance:"外观",Commands:"命令","Choose between fixed position or cursor following mode":"选择固定位置或者光标跟随模式","Add and manage commands":"添加和管理命令","Choose where Editing Toolbar will append upon regeneration.":"选择工具栏在Obsidian中的追加的位置。","Whether to enable on mobile devices with device width less than 768px":"是否在移动设备中启用。默认不启用","Choose between a glass morphism, tiny and default style":"选择毛玻璃,简约和默认风格","Refresh Toolbar":"刷新工具栏","Add Command":"添加命令",Settings:"设置","Adjust Toolbar Position[Fixed mode]":"调整工具栏位置[固定模式]","Position Style":"位置样式",Columns:"列数","Drag to Adjust Position":"拖动调整位置","Vertical Position":"垂直位置","Horizontal Position":"水平位置","Toolbar Position":"工具栏位置","Choose an icon":"选择一个图标","Search for an icon...":"搜索图标...",All:"全部",Obsidian:"Obsidian",Glyph:"Glyph",Custom:"自定义","Choose a command":"选择一个命令","The command":"命令","already exists":"已存在","Enter the icon code, format as <svg>.... </svg>":"输入图标代码，格式为 <svg>.... </svg>","No matching icons found":"没有找到匹配的图标","Custom Commands":"自定义命令","Toolbar Commands":"工具栏命令",ID:"ID",Prefix:"前缀",Suffix:"后缀","Custom Format Commands":"自定义格式命令","Add, edit or delete custom format commands":"添加、编辑或删除自定义格式命令",Edit:"编辑","Command ID":"命令ID",'Unique identifier, no spaces, e.g.: "my-custom-format"':'唯一标识符，不包含空格，例如："my-custom-format"',"Displayed name in toolbar and menu":"在工具栏和菜单中显示的名称","Add content before selected text":"在选中的文本前添加内容","Add content after selected text":"在选中的文本后添加内容","Character offset of cursor after formatting":"格式化后光标的字符偏移量","Line offset of cursor after formatting":"格式化后光标的行偏移量","Whether to insert at the beginning of the next line":"是否在下一行首插入","Command icon (click to select)":"命令图标（点击选择）","Choose Icon":"选择图标",Save:"保存",Cancel:"取消","Edit Custom Command":"编辑自定义命令","Add Custom Command":"添加自定义命令","Command ID and command name cannot be empty":"命令ID和命令名称不能为空","Command ID cannot contain spaces":"命令ID不能包含空格",'Command ID "${this.commandId}" already exists':'命令ID "${this.commandId}" 已存在',"Command Name":"命令名称","Cursor Position Offset":"光标位置偏移量","Line Offset":"行偏移量","Line Head Format":"行首格式",Icon:"图标","Are you sure you want to restore all settings to default? This will lose all your custom configurations.":"确定要恢复所有设置为默认值吗？这将丢失您的所有自定义配置。","Restore default":"恢复默认值","Restore default settings":"恢复默认设置","🔄Restore default settings":"🔄恢复默认设置","🔧Data repair":"🔧数据修复","Command IDs have been successfully repaired!":"命令ID已成功修复！","No command IDs need to be repaired":"没有命令ID需要修复","Error repairing command IDs, please check the console for details":"修复命令ID时出错，请查看控制台了解详情","Error restoring default settings, please check the console for details":"恢复默认设置时出错，请查看控制台了解详情","Successfully restored default settings!":"已成功恢复默认设置！",Close:"关闭",Tips:"提示","This update changed the ID of some commands, please click this button to repair the commands to ensure the toolbar works properly":"此次更新更改了部分命令的ID，请点击此按钮修复命令以确保工具栏正常工作","Repair command ID":"修复命令ID","This will reset all your custom configurations":"这将重置您的所有自定义配置","Notice:":"注意","This update rebuilds the entire code, reducing resource consumption":"此次更新重构了全部代码，降低了资源占用","Optimized mobile usage, added canvas support, and added custom commands":"优化了移动端，增加了对canvas支持，增加了自定义命令","⚠️This update is not compatible with 2.x version command ids, please click [Repair command] to be compatible":"⚠️此次更新不兼容2.x旧版本命令id，请点击【修复命令】进行兼容","⚠️If you want to restore the default settings, please click [Restore default settings]":"⚠️如果想恢复默认设置，请点击【恢复默认设置】","Please execute a editingToolbar format command first, then enable the format brush":"请先执行一个格式命令，然后再启用格式刷","Format brush ON! Select text to apply【":"格式刷已开启\n选中文本应用【","】format":"】格式\n点击鼠标中键或者右键关闭格式刷","Add to Toolbar":"添加到工具栏","This command is already in the toolbar":"该命令已存在于工具栏中","Command added to toolbar":"命令已添加到工具栏","Add this command to the toolbar":"添加该命令到工具栏","Callout Type":"Callout 类型",Title:"标题","Optional, leave blank for default title":"可选，留空则使用默认标题","Input title":"输入标题","Collapse State":"折叠状态",Open:"展开",Closed:"折叠",Content:"内容",Insert:"插入",Default:"默认","Input content":"输入内容","Link Text":"链接文本","Link Alias":"链接别名","Link URL":"链接地址","Embed Content":"嵌入内容","Image Size":"图片尺寸","Insert New Line":"插入新行","Paste and Parse":"粘贴并解析","URL Format Error":"URL格式错误","Image Width":"图片宽度","Image Height":"图片高度","Insert a link on the next line":"在下一行插入链接","If it is an image, turn on":"如果是图片，请开启","Link Alias(optional)":"链接别名(可选)",Alias:"别名",Optional:"可选","Default 0, format will keep the text selected":"默认0，格式化将保持文本选中","to insert":"插入","Latest Changes":"最新更新","📋View full changelog":"📋查看完整更新日志","Open changelog":"打开更新日志","Loading changelog...":"加载更新日志...","Open the complete changelog in your browser":"在浏览器中打开完整更新日志","Enable multiple configurations":"启用多配置","Enable different command configurations for each position style (following, top, fixed)":"启用每个位置样式的不同命令配置（following，top，fixed）","Currently editing commands for":"当前编辑的命令配置为：","position style":"样式","Current Configuration":"当前配置","Switch between different command configurations":"切换不同的命令配置","Following Style":"跟随样式","Top Style":"顶部样式","Fixed Style":"固定样式","Mobile Style":"移动端样式",configuration:"配置","Deploy command to configurations":"部署命令到配置","All Configurations":"所有配置",Deploy:"部署","Command deployed to selected configurations":"命令已部署到选中的配置","No configuration selected for deployment":"没有选中的配置","Command already exists in selected configurations":"命令已存在于选中的配置","Command deployed to: ":"命令已部署到：","Command deleted":"命令已删除","Confirm delete?":"确认删除？","Are you sure you want to restore all settings to default? But custom commands will be preserved.":"您确定要将所有设置恢复为默认值吗？但自定义命令将被保留。","Successfully restored default settings! (Custom commands preserved)":"成功恢复默认设置！（自定义命令已保留）","This will reset all your custom configurations, but custom commands will be preserved":"这将重置您的所有自定义配置，但自定义命令将被保留","Import/Export":"导入/导出","Export Configuration":"导出配置","Export your toolbar configuration to share with others":"导出您的工具栏配置以与他人共享",Export:"导出","Import Configuration":"导入配置","Import toolbar configuration from JSON":"从JSON导入工具栏配置",Import:"导入","Usage Instructions":"使用说明","Export: Generate a JSON configuration that you can save or share":"导出：生成可保存或共享的JSON配置","Import: Paste a previously exported JSON configuration":"导入：粘贴先前导出的JSON配置","You can choose to export all settings, only toolbar commands, or only custom commands":"您可以选择导出所有设置、仅工具栏命令或仅自定义命令","When importing, the plugin will only update the settings included in the import data":"导入时，插件将仅更新导入数据中包含的设置","Warning: Importing configuration will overwrite your current settings. Consider exporting your current configuration first as a backup.":"警告：导入配置将覆盖您当前的设置。建议先导出当前配置作为备份。","Export Type":"导出类型","Choose what to export":"选择要导出的内容","All Settings":"所有设置","Toolbar Commands Only":"仅工具栏命令","Custom Commands Only":"仅自定义命令","Export Content":"导出内容","Copy this content to share with others":"复制此内容以与他人共享","Loading...":"加载中...","Copy to Clipboard":"复制到剪贴板","Configuration copied to clipboard":"配置已复制到剪贴板","Failed to copy configuration":"复制配置失败","Paste the configuration JSON here":"在此处粘贴配置JSON","Paste configuration here...":"在此处粘贴配置...","Invalid import data":"无效的导入数据","Configuration imported successfully":"配置导入成功","No valid configuration found in import data":"导入数据中未找到有效配置","Failed to import configuration. Invalid format.":"导入配置失败。格式无效。","Import Mode":"导入模式","Choose how to import the configuration":"选择如何导入配置","Update Mode (Add new items and update existing ones)":"更新模式（添加新项目并更新现有项目）","Overwrite Mode (Replace all settings with imported ones)":"覆盖模式（用导入的配置替换所有设置）","Configuration imported successfully (Overwrite mode)":"配置导入成功（覆盖模式）","Configuration imported successfully (Update mode)":"配置导入成功（更新模式）","Warning: Overwrite mode will completely replace your current settings with the imported ones. Consider exporting your current configuration first as a backup.":"警告：覆盖模式将完全替换您当前的设置与导入的设置。建议先导出当前配置作为备份。","Warning: Update mode will add new items and update existing ones based on the imported configuration.":"警告：更新模式将根据导入的配置添加新项目并更新现有项目。","Add Format Command":"添加格式命令",Regex:"正则","Prefix/Suffix":"前缀/后缀","Add Regex Command":"添加正则表达式命令","Please select text first":"请先选中文本","The selected text does not meet the condition requirements":"选中的文本不满足条件要求","Regex command execution error:":"正则表达式命令执行错误：","Copy code":"复制代码","Copied!":"已复制！","Explain the syntax of JavaScript regular expressions":"解释JavaScript正则表达式的语法","Apply regular expression replacement":"应用正则表达式替换","Conditional matching":"条件匹配","Complete regular expression code (copy to AI for explanation)":"完整正则表达式代码（复制到AI解释）","Error:":"错误：","Regex pattern cannot be empty":"正则表达式不能为空","Command already exists":"命令已存在","Choose icon":"选择图标","URL to Markdown link":"URL转Markdown链接","Convert MM/DD/YYYY to YYYY-MM-DD":"将MM/DD/YYYY日期格式转换为YYYY-MM-DD","Add bold to keywords":"添加粗体到关键词","Format phone number":"格式化电话号码","Remove extra spaces":"删除多余空格","Convert HTML bold tags to Markdown format":"将HTML粗体标签转换为Markdown格式","Convert quoted text to quote block":"将引用的文本转换为引用块","Convert CSV to Markdown table row":"将CSV转换为Markdown表格行","Add uniform alias to Markdown links":"添加统一别名到Markdown链接","Delete empty lines (multiline mode)":"删除空行（多行模式）","Add list symbol to each line (multiline mode)":"添加列表符号到每行（多行模式）","If the text contains important, set the text highlight (conditional format)":"如果文本包含重要内容，设置文本高亮（条件格式）","Matching pattern":"匹配模式","Regex pattern to match":"正则表达式匹配","Replacement pattern (use $1, $2, etc. to reference capture groups)":"替换模式（使用$1, $2等引用捕获组）","Ignore case":"忽略大小写","Global replace":"全局替换","Multiline mode":"多行模式","Use condition":"使用条件","Condition pattern":"条件模式","Only apply custom command when text matches the condition":"仅在文本匹配条件时应用自定义命令","Must exist regular expression or text":"必须存在正则表达式或文本","Replacement pattern":"替换模式","Match case-insensitive":"匹配不区分大小写","^ and $ match the start and end of each line":"^ 和 $ 匹配每行的开始和结束","Replace all matches":"替换所有匹配",Command:"命令","Error: ":"错误：","Input example text to view the formatting effect of the command...":"输入示例文本以查看命令的格式化效果...",Description:"描述","[Example]":"[示例]","[Requirements]":"[要求]","[Output]":"[输出]","AI question template:":"AI问题模板：","I need to convert the url to a markdown format link":"我需要将URL转换为Markdown格式链接","For example, convert https://example.com to [https://example.com](https://example.com)":"例如，将https://example.com转换为[https://example.com](https://example.com)","Use js regular expression to implement, and output the parameters in the following format (the result does not need to be escaped with json)":"使用js正则表达式实现，并输出以下格式的参数（结果不需要用json转义）","[Description]":"[描述]","How to use AI to get regular expressions?":"如何使用AI获取正则表达式？","Regular expression examples":"正则表达式示例","Edit regular expression command":"编辑正则表达式命令","Add regular expression command":"添加正则表达式命令","Result:":"结果：","Example text:":"示例文本：",Preview:"预览",Result:"结果","Update Import":"增量导入","Overwrite Import":"覆盖导入","Importing configuration...":"正在导入配置...","Following Style Only":"仅Following样式","Top Style Only":"仅Top样式","Fixed Style Only":"仅Fixed样式","Mobile Style Only":"仅Mobile样式","Unknown import type":"未知导入类型","All Toolbar Commands":"所有工具栏命令","Following style commands successfully initialized":"Following样式初始化成功","Top style commands successfully initialized":"Top样式初始化成功","Fixed style commands successfully initialized":"Fixed样式初始化成功","Mobile style commands successfully initialized":"Mobile样式初始化成功","Commands initialized successfully":"命令初始化成功","Reset Commands":"重置命令","Are you sure you want to reset the current configuration?":"您确定要将当前配置进行重置吗？","Commands reset successfully":"命令重置成功","Initialize Commands":"初始化命令","Initialize commands to default settings":"初始化命令到默认设置","Reset commands to default settings":"重置命令到默认设置",Clear:"清除","Remove all commands from this configuration":"清除当前样式下的所有命令","Are you sure you want to clear all commands under the current style?":"您确定要清除当前样式下的所有命令吗？","Current style commands have been cleared":"当前样式下的命令已清除","Manage Commands":"管理命令","Reset or clear all commands in this configuration":"重置或清除当前样式下的所有命令","Import Commands from Other Styles":"从其他样式导入命令","Copy commands from another style configuration":"从另一个样式配置复制命令","Main menu only":"Main menu only","This import will update:":"此次导入将更新：","Custom commands":"自定义命令","Toolbar commands":"工具栏命令","All settings":"所有设置","Following style only":"跟随样式","Top style only":"顶部样式","Fixed style only":"固定样式","Mobile style only":"移动端样式","Main Menu Commands":"主菜单命令","Following Style Commands":"跟随样式命令","Top Style Commands":"顶部样式命令","Fixed Style Commands":"固定样式命令","Mobile Style Commands":"移动端样式命令","General settings":"常规设置","Please paste configuration data first":"请先粘贴配置数据","Invalid import data format":"无效的导入数据格式","Do you want to continue?":"您确定要继续吗？","Warning: Update mode will add new items and update existing ones.":"警告：更新模式将添加新项目并更新现有项目。","Warning: Overwrite mode will completely replace your current settings with the imported ones.":"警告：覆盖模式将完全替换您当前的设置与导入的设置。","Overwrite Mode (Replace settings with imported ones)":"覆盖模式（用导入的配置替换所有设置）","Warning: Overwrite mode will replace existing settings with imported ones.":"警告：覆盖模式将用导入的配置替换所有设置。","Enable Multiple Config":"启用多配置","One-click clear":"一键清除","This import will:":"此次导入将：","Update general settings":"更新常规设置","Update Main Menu Commands":"更新主菜单命令","Update Custom Commands":"更新自定义命令","Update Following Style Commands":"更新跟随样式命令","Update Top Style Commands":"更新顶部样式命令","Update Fixed Style Commands":"更新固定样式命令","Clear all Main Menu Commands":"清除所有主菜单命令","Clear all Custom Commands":"清除所有自定义命令","Clear all Following Style Commands":"清除所有跟随样式命令","Clear all Top Style Commands":"清除所有顶部样式命令","Clear all Fixed Style Commands":"清除所有固定样式命令","Clear all Mobile Style Commands":"清除所有移动端样式命令","Set Multiple Config to:":"设置多配置为：",Enable:"启用",Disable:"禁用","Set Position Style to:":"设置位置样式为：",Following:"跟随",Top:"顶部",Fixed:"固定",Mobile:"移动端","All commands":"所有命令","⚠️ Overwrite mode will replace existing settings with imported ones.":"⚠️ 覆盖模式将用导入的配置替换所有设置。","ℹ️ Update mode will merge imported settings with existing ones.":"ℹ️ 更新模式将合并导入的设置与现有的设置。","Imported settings:":"导入的设置：","Imported commands:":"导入的命令：","Disable toolbar for this view":"禁用此视图的工具栏","Enable toolbar for this view":"启用此视图的工具栏","Manage all view types":"管理所有视图类型","Current View: ":"当前视图：","Appearance Style":"外观样式","Position Settings":"位置设置","Join the Community":"加入社区","Share your toolbar settings and styles in our":"分享您的工具栏设置和样式：","section!":"社区！","Get inspired by what others have created or showcase your own customizations.":"获取灵感或展示您的自定义设置。","Toolbar preview":"工具栏预览（按钮仅供参考）","Toolbar theme":"工具栏主题","Select a preset toolbar theme, automatically setting the background color, icon color, and size":"选择预设的工具栏主题，自动设置背景颜色、图标颜色和大小","Toolbar background color":"工具栏背景颜色","Set the background color of the toolbar":"设置工具栏的背景颜色","Toolbar icon color":"工具栏图标颜色","Set the color of the toolbar icon":"设置工具栏图标颜色","Toolbar icon size":"工具栏图标大小","Set the size of the toolbar icon (px) default 18px":"设置工具栏图标大小（px）默认18px","Custom theme":"自定义主题","Fixed position offset":"固定位置偏移","Choose the offset of the Editing Toolbar in the fixed position.":"选择固定位置工具栏的偏移量。"},h=Object.assign({},m);const g={ar:{},cs:{},da:{},de:{},en:p,"en-gb":{},es:{},fr:{},hi:{},id:{},it:{},ja:{},ko:{},nl:{},nn:{},pl:{},pt:{},"pt-br":{},ro:{},ru:{},tr:{},"zh-cn":m,"zh-tw":h}[t.moment.locale()];function f(t){return g&&g[t]||p[t]}class b extends t.FuzzySuggestModal{constructor(t,e,o=!1,i,n){super(t.app),this.customCallback=null,this.plugin=t,this.command=e,this.issub=o,this.customCallback=i||null,this.setPlaceholder(f("Choose an icon")),this.currentEditingConfig=n||""}capitalJoin(t){return t.split(" ").map((t=>t[0].toUpperCase()+t.substring(1))).join(" ")}getItems(){return o}getItemText(t){return this.capitalJoin(t.replace("feather-","").replace("remix-","").replace("bx-","").replace(/([A-Z])/g," $1").trim().replace(/-/gi," "))}renderSuggestion(e,o){const i=createSpan({cls:"editingToolbarIconPick"});o.appendChild(i),t.setIcon(i,e.item),super.renderSuggestion(e,o)}onChooseItem(t){return e(this,void 0,void 0,(function*(){if("Custom"===t)return this.customCallback?void new y(this.app,this.plugin,{id:this.command.id,name:this.command.name,icon:""},this.issub,(t=>{this.customCallback(t)})).open():void new y(this.app,this.plugin,this.command,this.issub,null,this.currentEditingConfig).open();if(this.customCallback)return void this.customCallback(t);const e=this.plugin.getCurrentCommands(this.currentEditingConfig);if(this.command.icon){let o=n(this.plugin,this.command,this.issub,e);this.issub?e[o.index].SubmenuCommands[o.subindex].icon=t:e[o.index].icon=t,this.plugin.updateCurrentCommands(e)}else this.command.icon=t,e.push(this.command),this.plugin.updateCurrentCommands(e);yield this.plugin.saveSettings(),setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100),console.log(`%c命令 '${this.command.name}' 已添加到编辑工具栏`,"color: Violet")}))}}class y extends t.Modal{constructor(t,e,o,i,n,s){super(t),this.customCallback=null,this.plugin=e,this.item=o,this.issub=i,this.customCallback=n||null,this.currentEditingConfig=s||"",this.containerEl.addClass("editingToolbar-Modal"),this.containerEl.addClass("customicon")}onOpen(){const{contentEl:t}=this;t.createEl("b",{text:f("Enter the icon code, format as <svg>.... </svg>")});const o=document.createElement("textarea");o.className="wideInputPromptInputEl",o.placeholder="",o.value=this.item.icon||"",o.style.width="100%",o.style.height="200px",t.appendChild(o),o.addEventListener("input",(()=>e(this,void 0,void 0,(function*(){const t=o.value;if(this.customCallback)return void(this.item.icon=t);this.item.icon=t;const e=this.plugin.getCurrentCommands(this.currentEditingConfig),i=n(this.plugin,this.item,this.issub,e);if(this.issub){let e=i.subindex;-1===e?this.plugin.settings.menuCommands[i.index].SubmenuCommands.push(this.item):this.plugin.settings.menuCommands[i.index].SubmenuCommands[e].icon=t}else{let t=i.index;-1===t?this.plugin.settings.menuCommands.push(this.item):this.plugin.settings.menuCommands[t].icon=this.item.icon}yield this.plugin.saveSettings()})))),this.submitEnterCallback&&o.addEventListener("keydown",this.submitEnterCallback)}onClose(){const{contentEl:t}=this;t.empty(),this.customCallback?this.customCallback(this.item.icon||""):setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100)}}class v extends t.FuzzySuggestModal{constructor(t,e){super(t.app),this.plugin=t,this.app,this.setPlaceholder(f("Choose a command")),this.currentEditingConfig=e||""}getItems(){return app.commands.listCommands()}getItemText(t){return t.name}onChooseItem(o){return e(this,void 0,void 0,(function*(){const e=this.plugin.getCurrentCommands(this.currentEditingConfig);e.findIndex((t=>t.id==o.id))>-1?new t.Notice(f("The command")+o.name+f("already exists"),3e3):o.icon?(e.push(o),this.plugin.updateCurrentCommands(e),yield this.plugin.saveSettings(),setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100),console.log(`%c命令 '${o.name}' 已添加到编辑工具栏`,"color: Violet")):new b(this.plugin,o,!1).open()}))}}class C extends t.Modal{constructor(t,e,o,i,n){super(e.app),this.plugin=e,this.item=o,this.issub=i,this.currentEditingConfig=n||"",this.containerEl.addClass("editingToolbar-Modal"),this.containerEl.addClass("changename")}onOpen(){var o;const{contentEl:i}=this;i.createEl("b",{text:f("Please enter a new name：")});const s=new t.TextComponent(i);s.inputEl.classList.add("InputPromptInputEl"),s.setPlaceholder("").setValue(null!==(o=this.item.name)&&void 0!==o?o:"").onChange(t.debounce((t=>e(this,void 0,void 0,(function*(){const e=this.plugin.getCurrentCommands(this.currentEditingConfig);let o=n(this.plugin,this.item,this.issub,e);if(this.item.name=t,this.issub){let i=o.subindex;-1===i?e[o.index].SubmenuCommands.push(this.item):e[o.index].SubmenuCommands[i].name=t}else{let t=o.index;-1===t?e.push(this.item):e[t].name=this.item.name}this.plugin.updateCurrentCommands(e),yield this.plugin.saveSettings()}))),100,!0)).inputEl.addEventListener("keydown",this.submitEnterCallback)}onClose(){const{contentEl:t}=this;t.empty(),setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100)}}class w extends t.Modal{constructor(t,e){super(e.app),this.needSave=!1,this.plugin=e,this.containerEl.addClass("editingToolbar-Modal")}onOpen(){const{contentEl:o}=this;o.createEl("p",{text:f("Drag the slider to move the position")});const i=o.createDiv({cls:"slider-container"}),n=i.createDiv({cls:"vertical-slider-container"});n.createEl("p",{text:f("Vertical Position")});const s=i.createDiv({cls:"horizontal-slider-container"});s.createEl("p",{text:f("Horizontal Position")});const a=i.createDiv({cls:"columns-slider-container"});a.createEl("p",{text:f("Editing Toolbar columns")});const r=document.body.clientHeight,l=document.body.clientWidth,c=Math.floor(r/3),p=-Math.floor(r),m=Math.floor(l/2),h=-Math.floor(l/2),g=new t.SliderComponent(n).setLimits(p,c,5).setValue(this.plugin.settings.verticalPosition||0).onChange(t.debounce((t=>{this.needSave=!0,this.plugin.settings.verticalPosition=t,d(this.plugin.settings)}),100,!0)).setDynamicTooltip(),b=new t.SliderComponent(s).setLimits(h,m,10).setValue(this.plugin.settings.horizontalPosition||0).onChange(t.debounce((t=>{this.needSave=!0,this.plugin.settings.horizontalPosition=t,u(this.plugin.settings)}),100,!0)).setDynamicTooltip(),y=new t.SliderComponent(a).setLimits(1,32,1).setValue(this.plugin.settings.cMenuNumRows||12).onChange(t.debounce((t=>e(this,void 0,void 0,(function*(){this.needSave=!0,this.plugin.settings.cMenuNumRows=t,yield this.plugin.saveSettings(),setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100)}))),100,!0)).setDynamicTooltip();i.createDiv({cls:"reset-container"}).createEl("button",{text:f("Reset"),cls:"reset-button"}).addEventListener("click",(()=>{this.needSave=!0,g.setValue(0),b.setValue(0),y.setValue(12),this.plugin.settings.verticalPosition=0,this.plugin.settings.horizontalPosition=0,this.plugin.settings.cMenuNumRows=12,d(this.plugin.settings),u(this.plugin.settings)}))}onClose(){return e(this,void 0,void 0,(function*(){const{contentEl:t}=this;t.empty(),this.needSave&&(yield this.plugin.saveSettings())}))}}const x=["body","workspace"],k=["default","tiny","glass","custom"],S=["following","top","fixed"],T={lastVersion:"0.0.0",aestheticStyle:"default",positionStyle:"top",menuCommands:[{id:"editing-toolbar:editor-undo",name:"Undo editor",icon:"undo-glyph"},{id:"editing-toolbar:editor-redo",name:"Redo editor",icon:"redo-glyph"},{id:"editing-toolbar:toggle-format-brush",name:"Format Brush",icon:"paintbrush"},{id:"editing-toolbar:format-eraser",name:"Clear text formatting",icon:"eraser"},{id:"editing-toolbar:header2-text",name:"Header 2",icon:"header-2"},{id:"editing-toolbar:header3-text",name:"Header 3",icon:"header-3"},{id:"SubmenuCommands-header",name:"submenu",icon:"header-n",SubmenuCommands:[{id:"editing-toolbar:header1-text",name:"Header 1",icon:"header-1"},{id:"editing-toolbar:header4-text",name:"Header 4",icon:"header-4"},{id:"editing-toolbar:header5-text",name:"Header 5",icon:"header-5"},{id:"editing-toolbar:header6-text",name:"Header 6",icon:"header-6"}]},{id:"editing-toolbar:toggle-bold",name:"Bold",icon:"bold-glyph"},{id:"editing-toolbar:toggle-italics",name:"Italics",icon:"italic-glyph"},{id:"editing-toolbar:toggle-strikethrough",name:"Strikethrough",icon:"strikethrough-glyph"},{id:"editing-toolbar:underline",name:"Underline",icon:"underline-glyph"},{id:"editing-toolbar:toggle-highlight",name:"==Highlight==",icon:"highlight-glyph"},{id:"SubmenuCommands-lucdf3en5",name:"submenu",icon:"edit",SubmenuCommands:[{id:"editing-toolbar:editor-copy",name:"Copy",icon:"lucide-copy"},{id:"editing-toolbar:editor-cut",name:"Cut",icon:"lucide-scissors"},{id:"editing-toolbar:editor-paste",name:"Paste",icon:"lucide-clipboard-type"},{id:"editing-toolbar:editor:swap-line-down",name:"Swap line down",icon:"lucide-corner-right-down"},{id:"editing-toolbar:editor:swap-line-up",name:"Swap line up",icon:"lucide-corner-right-up"}]},{id:"editing-toolbar:editor:attach-file",name:"Attach file",icon:"lucide-paperclip"},{id:"editing-toolbar:editor:insert-table",name:"Insert Table",icon:"lucide-table"},{id:"editing-toolbar:editor:cycle-list-checklist",name:"Cycle list checklist",icon:"check-circle"},{id:"SubmenuCommands-luc8efull",name:"submenu",icon:"message-square",SubmenuCommands:[{id:"editing-toolbar:editor:toggle-blockquote",name:"Blockquote",icon:"lucide-text-quote"},{id:"editing-toolbar:insert-callout",name:"Insert Callout ",icon:"lucide-quote"}]},{id:"SubmenuCommands-mdcmder",name:"submenu",icon:'<svg width="18" height="18" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M464 608 l0 -568 q0 -3 -2.5 -5.5 q-2.5 -2.5 -5.5 -2.5 l-80 0 q-3 0 -5.5 2.5 q-2.5 2.5 -2.5 5.5 l0 568 l-232 0 q-3 0 -5.5 2.5 q-2.5 2.5 -2.5 5.5 l0 80 q0 3 2.5 5.5 q2.5 2.5 5.5 2.5 l560 0 q3 0 5.5 -2.5 q2.5 -2.5 2.5 -5.5 l0 -80 q0 -3 -2.5 -5.5 q-2.5 -2.5 -5.5 -2.5 l-232 0 ZM864 696 q17 0 28.5 11.5 q11.5 11.5 11.5 28.5 q0 17 -11.5 28.5 q-11.5 11.5 -28.5 11.5 q-17 0 -28.5 -11.5 q-11.5 -11.5 -11.5 -28.5 q0 -17 11.5 -28.5 q11.5 -11.5 28.5 -11.5 ZM864 640 q-40 0 -68 28 q-28 28 -28 68 q0 40 28 68 q28 28 68 28 q40 0 68 -28 q28 -28 28 -68 q0 -40 -28 -68 q-28 -28 -68 -28 ZM576 322 l0 -63 q0 -3 2 -5 l89 -70 l-89 -70 q-2 -2 -2 -5 l0 -63 q0 -4 3.5 -5.5 q3.5 -1.5 6.5 0.5 l170 133 q4 3 4.5 8.5 q0.5 5.5 -2.5 9.5 l-2 2 l-170 133 q-3 2 -6.5 0.5 q-3.5 -1.5 -3.5 -5.5 ZM256 322 l0 -63 q0 -3 -2 -5 l-89 -70 l89 -70 q2 -2 2 -5 l0 -63 q0 -4 -3.5 -5.5 q-3.5 -1.5 -6.5 0.5 l-170 133 q-4 3 -4.5 8.5 q-0.5 5.5 2.5 9.5 l2 2 l170 133 q3 2 6.5 0.5 q3.5 -1.5 3.5 -5.5 Z"></path></g></svg>',SubmenuCommands:[{id:"editing-toolbar:superscript",name:"Superscript",icon:"superscript-glyph"},{id:"editing-toolbar:subscript",name:"Subscript",icon:"subscript-glyph"},{id:"editing-toolbar:editor:toggle-code",name:"Inline code",icon:"code-glyph"},{id:"editing-toolbar:codeblock",name:"Code block",icon:"codeblock-glyph"},{id:"editing-toolbar:editor:insert-wikilink",name:"Insert wikilink [[]]",icon:'<svg width="15" height="15" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M306 134 l91 0 q1 0 1 -8 l0 -80 q0 -8 -1 -8 l-91 0 q-1 0 -1 7 q0 -8 -5 -8 l-45 0 q-5 0 -5 8 l0 784 q0 8 5 8 l45 0 q5 0 5 -8 q0 8 1 8 l91 0 q1 0 1 -8 l0 -80 q0 -8 -1 -8 l-91 0 q-1 0 -1 8 l0 -623 q0 8 1 8 ZM139 134 l91 0 q1 0 1 -8 l0 -80 q0 -8 -1 -8 l-91 0 q-1 0 -1 7 q0 -8 -5 -8 l-45 0 q-5 0 -5 8 l0 784 q0 8 5 8 l45 0 q5 0 5 -8 q0 8 1 8 l91 0 q1 0 1 -8 l0 -80 q0 -8 -1 -8 l-91 0 q-1 0 -1 8 l0 -623 q0 8 1 8 ZM711 134 q1 0 1 -8 l0 623 q0 -8 -1 -8 l-91 0 q-1 0 -1 8 l0 80 q0 8 1 8 l91 0 q1 0 1 -8 q0 8 4 8 l46 0 q4 0 4 -8 l0 -784 q0 -8 -4 -8 l-46 0 q-4 0 -4 8 q0 -7 -1 -7 l-91 0 q-1 0 -1 8 l0 80 q0 8 1 8 l91 0 ZM878 134 q1 0 1 -8 l0 623 q0 -8 -1 -8 l-91 0 q-1 0 -1 8 l0 80 q0 8 1 8 l91 0 q1 0 1 -8 q0 8 5 8 l45 0 q4 0 4 -8 l0 -784 q0 -8 -4 -8 l-45 0 q-5 0 -5 8 q0 -7 -1 -7 l-91 0 q-1 0 -1 8 l0 80 q0 8 1 8 l91 0 Z"></path></g></svg>'},{id:"editing-toolbar:editor:insert-embed",name:"Insert embed ![[]]",icon:"note-glyph"},{id:"editing-toolbar:insert-link",name:"Insert link []()",icon:"link-glyph"},{id:"editing-toolbar:hrline",name:"Horizontal divider",icon:'<svg width="18" height="18" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M912 424 l0 -80 q0 -3 -2.5 -5.5 q-2.5 -2.5 -5.5 -2.5 l-784 0 q-3 0 -5.5 2.5 q-2.5 2.5 -2.5 5.5 l0 80 q0 3 2.5 5.5 q2.5 2.5 5.5 2.5 l784 0 q3 0 5.5 -2.5 q2.5 -2.5 2.5 -5.5 Z"></path></g></svg>'},{id:"editing-toolbar:toggle-inline-math",name:"Inline math",icon:"lucide-sigma"},{id:"editing-toolbar:editor:insert-mathblock",name:"MathBlock",icon:"lucide-sigma-square"}]},{id:"SubmenuCommands-list",name:"submenu-list",icon:"bullet-list-glyph",SubmenuCommands:[{id:"editing-toolbar:editor:toggle-checklist-status",name:"Checklist",icon:"checkbox-glyph"},{id:"editing-toolbar:toggle-numbered-list",name:"Numbered list",icon:'<svg width="18" height="18" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M860 424 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-457 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l457 0 ZM860 756 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-457 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l457 0 ZM860 92 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-457 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l457 0 ZM264 136 l-3 -3 l-51 -57 l56 0 q14 0 24.5 -10 q10.5 -10 11.5 -25 l0 -1 q0 -15 -10.5 -25.5 q-10.5 -10.5 -24.5 -10.5 l-137 0 q-15 0 -25 10 q-10 10 -11 24.5 q-1 14.5 9 25.5 l63 70 l49 54 q7 7 7 16.5 q0 9.5 -7.5 16.5 q-7.5 7 -18.5 7 q-11 0 -18.5 -6.5 q-7.5 -6.5 -8.5 -16.5 l0 0 q0 -15 -10.5 -25.5 q-10.5 -10.5 -25.5 -10.5 q-15 0 -25.5 10.5 q-10.5 10.5 -10.5 25.5 q0 26 13.5 47.5 q13.5 21.5 36 34.5 q22.5 13 49 13 q26.5 0 49.5 -13 q23 -13 36 -34.5 q13 -21.5 13 -47.5 q0 -20 -7.5 -37.5 q-7.5 -17.5 -21.5 -30.5 l-1 -1 ZM173 794 q11 11 25 10.5 q14 -0.5 24.5 -10.5 q10.5 -10 10.5 -25 l0 -293 q0 -15 -10 -25.5 q-10 -10.5 -25 -10.5 q-15 0 -25.5 10 q-10.5 10 -11.5 25 l0 211 q-10 -8 -23.5 -7 q-13.5 1 -22.5 11 l-1 0 q-10 11 -9.5 25.5 q0.5 14.5 10.5 24.5 l58 54 Z"></path></g></svg>'},{id:"editing-toolbar:toggle-bullet-list",name:"Bullet list",icon:'<svg width="18" height="18" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M860 424 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-477 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l477 0 ZM860 756 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-477 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l477 0 ZM860 92 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-477 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l477 0 ZM176 716 l0 0 ZM112 716 q0 -27 18.5 -45.5 q18.5 -18.5 45.5 -18.5 q27 0 45.5 18.5 q18.5 18.5 18.5 45.5 q0 27 -18.5 45.5 q-18.5 18.5 -45.5 18.5 q-27 0 -45.5 -18.5 q-18.5 -18.5 -18.5 -45.5 ZM176 384 l0 0 ZM112 384 q0 -27 18.5 -45.5 q18.5 -18.5 45.5 -18.5 q27 0 45.5 18.5 q18.5 18.5 18.5 45.5 q0 27 -18.5 45.5 q-18.5 18.5 -45.5 18.5 q-27 0 -45.5 -18.5 q-18.5 -18.5 -18.5 -45.5 ZM176 52 l0 0 ZM112 52 q0 -27 18.5 -45.5 q18.5 -18.5 45.5 -18.5 q27 0 45.5 18.5 q18.5 18.5 18.5 45.5 q0 27 -18.5 45.5 q-18.5 18.5 -45.5 18.5 q-27 0 -45.5 -18.5 q-18.5 -18.5 -18.5 -45.5 Z"></path></g></svg>'},{id:"editing-toolbar:undent-list",name:"Unindent-list",icon:'<svg width="18" height="18" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M872 302 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-429 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l429 0 ZM872 542 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-429 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l429 0 ZM872 784 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 ZM872 62 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 ZM244 534 l-123 -122 q-8 -7 -8 -18 q0 -11 8 -18 l123 -122 q8 -7 19 -7 q11 0 18.5 7.5 q7.5 7.5 7.5 18.5 l0 242 q0 11 -7.5 18.5 q-7.5 7.5 -18.5 7.5 q-11 0 -19 -7 Z"></path></g></svg>'},{id:"editing-toolbar:indent-list",name:"Indent list",icon:'<svg width="18" height="18" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M872 302 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-429 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l429 0 ZM872 542 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-429 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l429 0 ZM872 784 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 ZM872 62 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 ZM158 534 l124 -122 q7 -7 7 -18 q0 -11 -7 -18 l-124 -122 q-7 -7 -18 -7 q-11 0 -19 7.5 q-8 7.5 -8 18.5 l0 242 q0 11 8 18.5 q8 7.5 19 7.5 q11 0 18 -7 Z"></path></g></svg>'}]},{id:"SubmenuCommands-aligin",name:"submenu-aligin",icon:'<svg width="18" height="18" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M724 304 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-421 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l421 0 ZM872 540 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 ZM724 776 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-421 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l421 0 ZM872 68 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 Z"></path></g></svg>',SubmenuCommands:[{id:"editing-toolbar:justify",name:'<p aligin="justify"></p>',icon:'<svg width="18" height="18" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M112 736 l0 0 ZM120 736 l784 0 q8 0 8 -8 l0 -80 q0 -8 -8 -8 l-784 0 q-8 0 -8 8 l0 80 q0 8 8 8 ZM112 331 l0 0 ZM120 331 l784 0 q8 0 8 -8 l0 -80 q0 -8 -8 -8 l-784 0 q-8 0 -8 8 l0 80 q0 8 8 8 ZM112 128 l0 0 ZM120 128 l784 0 q8 0 8 -8 l0 -80 q0 -8 -8 -8 l-784 0 q-8 0 -8 8 l0 80 q0 8 8 8 ZM112 533 l0 0 ZM120 533 l784 0 q8 0 8 -8 l0 -80 q0 -8 -8 -8 l-784 0 q-8 0 -8 8 l0 80 q0 8 8 8 Z"></path></g></svg>'},{id:"editing-toolbar:left",name:'<p aligin="left"></p>',icon:'<svg width="18" height="18" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M572 304 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-421 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l421 0 ZM872 540 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 ZM572 776 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-421 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l421 0 ZM872 68 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 Z"></path></g></svg>'},{id:"editing-toolbar:center",name:"<center>",icon:'<svg width="18" height="18" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M724 304 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-421 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l421 0 ZM872 540 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 ZM724 776 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-421 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l421 0 ZM872 68 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 Z"></path></g></svg>'},{id:"editing-toolbar:right",name:'<p aligin="right"></p>',icon:'<svg width="18" height="18" focusable="false" fill="currentColor"  viewBox="0 0 1024 1024"><g transform="scale(1, -1) translate(0, -896) scale(0.9, 0.9) "><path class="path" d="M872 304 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-421 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l421 0 ZM872 540 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 ZM872 776 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-421 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l421 0 ZM872 68 q17 0 28.5 -11.5 q11.5 -11.5 11.5 -28 q0 -16.5 -11.5 -28.5 q-11.5 -12 -27.5 -12 l-721 0 q-17 0 -28.5 11.5 q-11.5 11.5 -11.5 28 q0 16.5 11.5 28.5 q11.5 12 27.5 12 l721 0 Z"></path></g></svg>'}]},{id:"editing-toolbar:change-font-color",name:"Change font color[html]",icon:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" fill="currentColor"><g fill-rule="evenodd"><path id="change-font-color-icon" d="M3 18h18v3H3z" style="fill:#2DC26B"></path><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"></path></g></svg>'},{id:"editing-toolbar:change-background-color",name:"Change Backgroundcolor[html]",icon:'<svg width="18" height="24" viewBox="0 0 256 256" version="1.1" xmlns="http://www.w3.org/2000/svg"><g   stroke="none" stroke-width="1" fill="currentColor" fill-rule="evenodd"><g  ><g fill="currentColor"><g transform="translate(119.502295, 137.878331) rotate(-135.000000) translate(-119.502295, -137.878331) translate(48.002295, 31.757731)" ><path d="M100.946943,60.8084699 L43.7469427,60.8084699 C37.2852111,60.8084699 32.0469427,66.0467383 32.0469427,72.5084699 L32.0469427,118.70847 C32.0469427,125.170201 37.2852111,130.40847 43.7469427,130.40847 L100.946943,130.40847 C107.408674,130.40847 112.646943,125.170201 112.646943,118.70847 L112.646943,72.5084699 C112.646943,66.0467383 107.408674,60.8084699 100.946943,60.8084699 Z M93.646,79.808 L93.646,111.408 L51.046,111.408 L51.046,79.808 L93.646,79.808 Z" fill-rule="nonzero"></path><path d="M87.9366521,16.90916 L87.9194966,68.2000001 C87.9183543,69.4147389 86.9334998,70.399264 85.7187607,70.4 L56.9423078,70.4 C55.7272813,70.4 54.7423078,69.4150264 54.7423078,68.2 L54.7423078,39.4621057 C54.7423078,37.2523513 55.5736632,35.1234748 57.0711706,33.4985176 L76.4832996,12.4342613 C78.9534987,9.75382857 83.1289108,9.5834005 85.8093436,12.0535996 C87.1658473,13.303709 87.9372691,15.0644715 87.9366521,16.90916 Z" fill-rule="evenodd"></path><path d="M131.3,111.241199 L11.7,111.241199 C5.23826843,111.241199 0,116.479467 0,122.941199 L0,200.541199 C0,207.002931 5.23826843,212.241199 11.7,212.241199 L131.3,212.241199 C137.761732,212.241199 143,207.002931 143,200.541199 L143,122.941199 C143,116.479467 137.761732,111.241199 131.3,111.241199 Z M124,130.241 L124,193.241 L19,193.241 L19,130.241 L124,130.241 Z" fill-rule="nonzero"></path></g></g><path d="M51,218 L205,218 C211.075132,218 216,222.924868 216,229 C216,235.075132 211.075132,240 205,240 L51,240 C44.9248678,240 40,235.075132 40,229 C40,222.924868 44.9248678,218 51,218 Z" id="change-background-color-icon" style="fill:#FA541C"></path></g></g></svg>'},{id:"editing-toolbar:fullscreen-focus",name:"Fullscreen focus mode",icon:"fullscreen"},{id:"editing-toolbar:workplace-fullscreen-focus",name:"Workplace-Fullscreen ",icon:"exit-fullscreen"}],followingCommands:[],topCommands:[],fixedCommands:[],mobileCommands:[],enableMultipleConfig:!1,appendMethod:"workspace",shouldShowMenuOnSelect:!1,cMenuVisibility:!0,cMenuBottomValue:4.25,cMenuNumRows:12,cMenuWidth:610,cMenuFontColor:"#2DC26B",cMenuBackgroundColor:"#d3f8b6",autohide:!1,custom_bg1:"#FFB78B8C",custom_bg2:"#CDF4698C",custom_bg3:"#A0CCF68C",custom_bg4:"#F0A7D88C",custom_bg5:"#ADEFEF8C",custom_fc1:"#D83931",custom_fc2:"#DE7802",custom_fc3:"#245BDB",custom_fc4:"#6425D0",custom_fc5:"#646A73",isLoadOnMobile:!1,horizontalPosition:0,verticalPosition:0,formatBrushes:{},customCommands:[],viewTypeSettings:{},toolbarBackgroundColor:"rgba(var(--background-secondary-rgb), 0.7)",toolbarIconColor:"var(--text-normal)",toolbarIconSize:18};class E{static isAllowedViewType(t,e){var o,i,n,s;if(!t)return!1;const a=t.getViewType(),r=null===(n=null===(i=null===(o=window.app)||void 0===o?void 0:o.plugins)||void 0===i?void 0:i.plugins)||void 0===n?void 0:n["editing-toolbar"];if((null===(s=null==r?void 0:r.settings)||void 0===s?void 0:s.viewTypeSettings)&&void 0!==r.settings.viewTypeSettings[a])return r.settings.viewTypeSettings[a];return(e||["markdown","canvas","thino_view","meld-encrypted-view"]).includes(a)}static isSourceMode(t){var e;return!!t&&"source"===(null===(e=t.getMode)||void 0===e?void 0:e.call(t))}}let M;const I={markdown:".markdown-source-view",thino_view:".markdown-source-view",canvas:".canvas-wrapper",excalidraw:".view-header",image:".image-container",pdf:".view-content",meld_encrypted_view:".markdown-source-view"};function q(){M=t.requireApiVersion("0.15.0")?activeWindow.document:window.document;const e=M.getElementById("editingToolbarModalBar");e&&e.remove();const o=function(){const e=[];e.push(app.workspace.rootSplit);const o=app.workspace.floatingSplit;return null==o||o.children.forEach((o=>{o instanceof t.WorkspaceWindow&&e.push(o)})),e}();o&&o.forEach((t=>{(null==t?void 0:t.containerEl)&&(t=>{let e=t.querySelectorAll("#editingToolbarModalBar"),o=t.querySelectorAll("#editingToolbarPopoverBar");e.forEach((t=>{t&&(t.firstChild&&t.removeChild(t.firstChild),t.remove())})),o.forEach((t=>{t&&(t.firstChild&&t.removeChild(t.firstChild),t.remove())}))})(null==t?void 0:t.containerEl)}))}function A(e,o){var i,n;M=t.requireApiVersion("0.15.0")?activeWindow.document:window.document;let s="top"==o.positionStyle?null===(n=null===(i=e.workspace.activeLeaf)||void 0===i?void 0:i.view.containerEl)||void 0===n?void 0:n.querySelector("#editingToolbarModalBar"):M.getElementById("editingToolbarModalBar");return s||null}const D=(t,e)=>e.reduce(((t,e)=>t&&"undefined"!==t[e]?t[e]:void 0),t);function _(t,e){return t&&void 0!==t[1][0]?e+t.flat(2).join("+").replace("Mod","Ctrl")+e:e+"–"+e}function B(t,e,o=!0){let i=t.commands.findCommand(e),n=o?"*":"";if(i){let e=i.hotkeys?[[D(i.hotkeys,[0,"modifiers"])],[D(i.hotkeys,[0,"key"])]]:void 0,o=t.hotkeyManager.customKeys[i.id];var s=o?[[D(o,[0,"modifiers"])],[D(o,[0,"key"])]]:void 0;return s?_(s,n):_(e,"")}return"–"}function O(t){return/<[^>]+>/g.test(t)}function N(e,o,i){M=t.requireApiVersion("0.15.0")?activeWindow.document:window.document;const n=o.commandsManager.getActiveEditor();let s=A(e,o),l=null==s?void 0:s.querySelector("#"+i);if(l){let t=l.rows,e=t.length;for(let s=1;s<e;s++){let e=t[s].cells;for(let t=0;t<e.length;t++)e[t].onclick=function(){let t=this.style.backgroundColor;if(""!=t){if(t=F(t),"x-color-picker-table"==i){o.settings.cMenuFontColor=t,a(t,n),M.querySelectorAll("#change-font-color-icon").forEach((e=>{e.style.fill=t}))}else if("x-backgroundcolor-picker-table"==i){o.settings.cMenuBackgroundColor=t,r(t,n),M.querySelectorAll("#change-background-color-icon").forEach((e=>{e.style.fill=t}))}o.saveSettings()}}}}}const F=function(t){let e=t;if(/^(rgb|RGB)/.test(e)){let t=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),o="#";for(let e=0;e<t.length;e++){let i=Number(t[e]).toString(16);"0"===i&&(i+=i),1==i.length&&(i="0"+i),o+=i}return 7!==o.length&&(o=e),o}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e))return e;{let t=e.replace(/#/,"").split("");if(6===t.length)return e;if(3===t.length){let e="#";for(let o=0;o<t.length;o+=1)e+=t[o]+t[o];return e}}};function L(t){t.quiteAllFormatBrushes()}function R(t,e){let o=e.getSelection();if(!o||""===o.trim())return;if(o.match(/^>\s*\[\![\w\s]*\]/m)){let t=o.split("\n"),i=[],n=!1,s=0,a=!1;for(let e=0;e<t.length;e++){let o=t[e],r=o.match(/^(>+)\s*\[\!([\w\s]*)\]\s*(.*?)$/);if(!r||a)if(n){let t=o.match(/^(>+)\s*/);if(t&&t[1].length>=s){let t=o.replace(new RegExp(`^>{${s}}\\s*`),"");i.push(t)}else n=!1,i.push(o)}else i.push(o);else s=r[1].length,a=!0,r[3].trim()&&i.push(r[3].trim()),n=!0}return void e.replaceSelection(i.join("\n"))}o=o.replace(/(^#+\s|^#(?=\s)|^\>|^\- \[( |x)\]|^\+ |\<[^\<\>]+?\>|^1\. |^\s*\- |^\-+$|^\*+$)/gm,""),o=o.replace(/^[ ]+|[ ]+$/gm,""),o=o.replace(/\!?\[\[([^\[\]\|]*\|)*([^\(\)\[\]]+)\]\]/g,"$2"),o=o.replace(/\!?\[+([^\[\]\(\)]+)\]+\(([^\(\)]+)\)/g,"$1"),o=o.replace(/`([^`]+)`/g,"$1"),o=o.replace(/_([^_]+)_/g,"$1"),o=o.replace(/==([^=]+)==/g,"$1"),o=o.replace(/\*\*\*([^\*]+)\*\*\*/g,"$1"),o=o.replace(/\*\*?([^\*]+)\*\*?/g,"$1"),o=o.replace(/~~([^~]+)~~/g,"$1"),e.replaceSelection(o)}function P(e,o,i,n,s=!1){let a=A(e,i);const r=e.workspace.getActiveViewOfType(t.ItemView);if(!E.isAllowedViewType(r))return void(a&&(a.style.visibility="hidden"));if("following"!==i.positionStyle)return;const l="markdown"===(null==r?void 0:r.getViewType());let c=30;if(c="tiny"===i.settings.aestheticStyle?30:o+14,l)if(E.isSourceMode(r)){if(a){const t=s||n.somethingSelected();a.style.visibility=t?"visible":"hidden","visible"===a.style.visibility&&(a.style.height=c+"px",a.addClass("editingToolbarFlex"),a.removeClass("editingToolbarGrid"),function(t,e){var o,i,n,s;const a=e.containerEl.getBoundingClientRect(),r=t.offsetWidth,l=t.offsetHeight,c=12,d=window.innerWidth,u=e.getCursor("from");e.getCursor("to");const p=e.coordsAtPos(u),m=null!==(i=null===(o=M.getElementsByClassName("mod-left-split")[0])||void 0===o?void 0:o.clientWidth)&&void 0!==i?i:0,h=null!==(s=null===(n=M.getElementsByClassName("side-dock-ribbon mod-left")[0])||void 0===n?void 0:n.clientWidth)&&void 0!==s?s:0,g=m+h;let f=p.left-g-28;f+r>d-g&&(f=d-g-r-c);f=Math.max(0,f);let b=function(t,e,o,i){const n=t.getCursor("from"),s=t.getCursor("to"),a=t.coordsAtPos(s),r=n.line===s.line;let l=e.top-i-10;if(r)l<=o.top&&(l=a.bottom+10);else{if(t.getCursor("head").ch==t.getCursor("from").ch)l=e.top-i-10,l<=o.top&&(l=o.top+2*i);else{const e=(t=>{var e,o,i;let n,s=t.getCursor("head");if(t.getCursor("head").ch!==t.getCursor("from").ch&&(s.ch=Math.max(0,s.ch-1)),t.cursorCoords)n=t.cursorCoords(!0,"window");else{if(!t.coordsAtPos)return;{const a=t.posToOffset(s);n=null!==(i=null===(o=(e=t.cm).coordsAtPos)||void 0===o?void 0:o.call(e,a))&&void 0!==i?i:t.coordsAtPos(a)}}return n})(t);l=e.bottom+10,l>=o.bottom-i&&(l=o.bottom-2*i)}}return l}(e,p,a,l);b=Math.max(0,b),t.style.left=`${f}px`,t.style.top=`${b}px`}(a,n))}}else a&&(a.style.visibility="hidden");else a&&(a.style.visibility="visible",a.style.height=c+"px",a.addClass("editingToolbarFlex"),a.removeClass("editingToolbarGrid"))}function $(e,o){let i=o.settings;M=t.requireApiVersion("0.15.0")?activeWindow.document:window.document;const n={default:"editingToolbarDefaultAesthetic",tiny:"editingToolbarTinyAesthetic",glass:"editingToolbarGlassAesthetic",custom:"editingToolbarCustomAesthetic"};!function(){function s(t,e){Object.values(n).forEach((e=>{t.removeClass(e)}));const o=n[e]||n.default;t.addClass(o)}const a=()=>{var n,a;let r=0,l=0,c=26;o.toolbarIconSize&&(c=o.toolbarIconSize+8);let d=createEl("div");if(d)if("top"==o.positionStyle)d.className+=" top",i.autohide&&(d.className+=" autohide");else if("following"==o.positionStyle)d.style.visibility="hidden";else if("fixed"==o.positionStyle){let t=i.toolbarIconSize||18;d.setAttribute("style",`left: calc(50% - calc(${i.cMenuNumRows*(t+10)}px / 2));\n       bottom: 4.25em; \n       grid-template-columns: repeat(${i.cMenuNumRows}, ${t+10}px);\n       gap: ${(t-18)/4}px`)}d.setAttribute("id","editingToolbarModalBar");let u=createEl("div");if(u.addClass("editingToolbarpopover"),u.addClass("editingToolbarTinyAesthetic"),u.setAttribute("id","editingToolbarPopoverBar"),u.style.visibility="hidden",u.style.height="0",s(d,i.aestheticStyle),s(u,i.aestheticStyle),"top"==o.positionStyle){let t=e.workspace.activeLeaf.view.containerEl,o=null;const i=e.workspace.activeLeaf.view.getViewType(),n=I[i];if(n&&(o=null==t?void 0:t.querySelector(n)),!o){const e=null==t?void 0:t.querySelector(".view-content");if(e){const t=e.querySelectorAll(":scope > div");o=t.length>0?t[0]:e}}if(!o)return void console.log("Editing Toolbar: Failed to find target DOM element for toolbar insertion");(null==t?void 0:t.querySelector("#editingToolbarPopoverBar"))||("excalidraw"==i?o.insertAdjacentElement("afterend",u):o.insertAdjacentElement("afterbegin",u)),"excalidraw"==i?o.insertAdjacentElement("afterend",d):o.insertAdjacentElement("afterbegin",d),l=null==o?void 0:o.offsetWidth}else"body"==i.appendMethod?M.body.appendChild(d):"workspace"==i.appendMethod&&(null===(n=M.body)||void 0===n||n.querySelector(".mod-vertical.mod-root").insertAdjacentElement("afterbegin",d));let p=null===(a=e.workspace.activeLeaf.view.containerEl)||void 0===a?void 0:a.querySelector("#editingToolbarPopoverBar");o.getCurrentCommands().forEach(((n,s)=>{let a;if("SubmenuCommands"in n){let u;r>=l-4*c&&l>100?(o.setIS_MORE_Button(!0),u=new t.ButtonComponent(p)):u=new t.ButtonComponent(d),u.setClass("editingToolbarCommandsubItem"+s),s>=i.cMenuNumRows?u.setClass("editingToolbarSecond"):"top"!=o.positionStyle&&u.buttonEl.setAttribute("aria-label-position","top"),O(n.icon)?u.buttonEl.innerHTML=n.icon:u.setIcon(n.icon),r+=c+2;let m=function(t){let e=createEl("div");return e.addClass(t),e}("subitem");m&&n.SubmenuCommands.forEach((n=>{let r=B(e,n.id);a="–"==r?n.name:n.name+"("+r+")";let l=new t.ButtonComponent(m).setTooltip(a).setClass("menu-item").onClick((()=>{e.commands.executeCommandById(n.id);const t=o.commandsManager.getActiveEditor(),s=t&&t.somethingSelected();0==i.cMenuVisibility?d.style.visibility="hidden":"following"==o.positionStyle?s||(d.style.visibility="hidden"):d.style.visibility="visible"}));s<i.cMenuNumRows&&"top"!=o.positionStyle&&l.buttonEl.setAttribute("aria-label-position","top"),"editingToolbar-Divider-Line"==n.id&&l.setClass("editingToolbar-Divider-Line"),O(n.icon)?l.buttonEl.innerHTML=n.icon:l.setIcon(n.icon),u.buttonEl.insertAdjacentElement("afterbegin",m)}))}else if("editing-toolbar:change-font-color"==n.id){let s=new t.ButtonComponent(d);s.setClass("editingToolbarCommandsubItem-font-color").setTooltip(f("Font Colors")).onClick((()=>{e.commands.executeCommandById(n.id);const t=o.commandsManager.getActiveEditor(),s=t&&t.somethingSelected();0==i.cMenuVisibility?d.style.visibility="hidden":"following"==o.positionStyle?s||(d.style.visibility="hidden"):d.style.visibility="visible"})),O(n.icon)?s.buttonEl.innerHTML=n.icon:s.setIcon(n.icon),r+=c;let a=createEl("div");if(a.addClass("subitem"),a){a.innerHTML=function(t){return`<div class='x-color-picker-wrapper'>\n<div class='x-color-picker' >\n  <table class="x-color-picker-table" id='x-color-picker-table'>\n    <tbody>\n      <tr>\n        <th colspan="10" class="ui-widget-content">Theme Colors</th>\n      </tr>\n      <tr>\n        <td style="background-color:#ffffff"><span></span></td>\n        <td style="background-color:#000000"><span></span></td>\n        <td style="background-color:#eeece1"><span></span></td>\n        <td style="background-color:#1f497d"><span></span></td>\n        <td style="background-color:#4f81bd"><span></span></td>\n        <td style="background-color:#c0504d"><span></span></td>\n        <td style="background-color:#9bbb59"><span></span></td>\n        <td style="background-color:#8064a2"><span></span></td>\n        <td style="background-color:#4bacc6"><span></span></td>\n        <td style="background-color:#f79646"><span></span></td>\n      </tr>\n      <tr>\n        <th colspan="10"></th>\n      </tr>\n      <tr class="top">\n        <td style="background-color:#f2f2f2"><span></span></td>\n        <td style="background-color:#7f7f7f"><span></span></td>\n        <td style="background-color:#ddd9c3"><span></span></td>\n        <td style="background-color:#c6d9f0"><span></span></td>\n        <td style="background-color:#dbe5f1"><span></span></td>\n        <td style="background-color:#f2dcdb"><span></span></td>\n        <td style="background-color:#ebf1dd"><span></span></td>\n        <td style="background-color:#e5e0ec"><span></span></td>\n        <td style="background-color:#dbeef3"><span></span></td>\n        <td style="background-color:#fdeada"><span></span></td>\n      </tr>\n      <tr class="in">\n        <td style="background-color:#d8d8d8"><span></span></td>\n        <td style="background-color:#595959"><span></span></td>\n        <td style="background-color:#c4bd97"><span></span></td>\n        <td style="background-color:#8db3e2"><span></span></td>\n        <td style="background-color:#b8cce4"><span></span></td>\n        <td style="background-color:#e5b9b7"><span></span></td>\n        <td style="background-color:#d7e3bc"><span></span></td>\n        <td style="background-color:#ccc1d9"><span></span></td>\n        <td style="background-color:#b7dde8"><span></span></td>\n        <td style="background-color:#fbd5b5"><span></span></td>\n      </tr>\n      <tr class="in">\n        <td style="background-color:#bfbfbf"><span></span></td>\n        <td style="background-color:#3f3f3f"><span></span></td>\n        <td style="background-color:#938953"><span></span></td>\n        <td style="background-color:#548dd4"><span></span></td>\n        <td style="background-color:#95b3d7"><span></span></td>\n        <td style="background-color:#d99694"><span></span></td>\n        <td style="background-color:#c3d69b"><span></span></td>\n        <td style="background-color:#b2a2c7"><span></span></td>\n        <td style="background-color:#92cddc"><span></span></td>\n        <td style="background-color:#fac08f"><span></span></td>\n      </tr>\n      <tr class="in">\n        <td style="background-color:#a5a5a5"><span></span></td>\n        <td style="background-color:#262626"><span></span></td>\n        <td style="background-color:#494429"><span></span></td>\n        <td style="background-color:#17365d"><span></span></td>\n        <td style="background-color:#366092"><span></span></td>\n        <td style="background-color:#953734"><span></span></td>\n        <td style="background-color:#76923c"><span></span></td>\n        <td style="background-color:#5f497a"><span></span></td>\n        <td style="background-color:#31859b"><span></span></td>\n        <td style="background-color:#e36c09"><span></span></td>\n      </tr>\n      <tr class="bottom">\n        <td style="background-color:#7f7f7f"><span></span></td>\n        <td style="background-color:#0c0c0c"><span></span></td>\n        <td style="background-color:#1d1b10"><span></span></td>\n        <td style="background-color:#0f243e"><span></span></td>\n        <td style="background-color:#244061"><span></span></td>\n        <td style="background-color:#632423"><span></span></td>\n        <td style="background-color:#4f6128"><span></span></td>\n        <td style="background-color:#3f3151"><span></span></td>\n        <td style="background-color:#205867"><span></span></td>\n        <td style="background-color:#974806"><span></span></td>\n      </tr>\n       <tr>\n        <th colspan="10"></th>\n      </tr>\n      <tr>\n        <th colspan="10" class="ui-widget-content">Standard Colors</th>\n      </tr>\n      <tr>\n        <td style="background-color:#c00000"><span></span></td>\n        <td style="background-color:#ff0000"><span></span></td>\n        <td style="background-color:#ffc000"><span></span></td>\n        <td style="background-color:#ffff00"><span></span></td>\n        <td style="background-color:#92d050"><span></span></td>\n        <td style="background-color:#00b050"><span></span></td>\n        <td style="background-color:#00b0f0"><span></span></td>\n        <td style="background-color:#0070c0"><span></span></td>\n        <td style="background-color:#002060"><span></span></td>\n        <td style="background-color:#7030a0"><span></span></td>\n      </tr>\n      <tr>\n      <th colspan="10" class="ui-widget-content">Custom Font Colors</th>\n    </tr>\n    <tr>\n      <td style="background-color:${t.settings.custom_fc1}"><span></span></td>\n      <td style="background-color:${t.settings.custom_fc2}"><span></span></td>\n      <td style="background-color:${t.settings.custom_fc3}"><span></span></td>\n      <td style="background-color:${t.settings.custom_fc4}"><span></span></td>\n      <td style="background-color:${t.settings.custom_fc5}"><span></span></td>\n    </tr>\n    </tbody>\n  </table>\n</div>\n</div>`}(o),s.buttonEl.insertAdjacentElement("afterbegin",a),N(e,o,"x-color-picker-table");let i=a.querySelector(".x-color-picker-wrapper");new t.ButtonComponent(i).setIcon("paintbrush").setTooltip(f("Format Brush")).onClick((()=>{L(o),o.setEN_FontColor_Format_Brush(!0),o.Temp_Notice=new t.Notice(f("Font-Color formatting brush ON!"),0)})),new t.ButtonComponent(i).setIcon("palette").setTooltip(f("Custom Font Color")).onClick((()=>{e.setting.open(),e.setting.openTabById("editing-toolbar"),setTimeout((()=>{const t=e.setting.activeTab.containerEl.querySelector(".editing-toolbar-tabs");if(t){const o=t.children[1];null==o||o.click(),setTimeout((()=>{var t;let o=e.setting.activeTab.containerEl.querySelector(".custom_font");o&&(null===(t=o.addClass)||void 0===t||t.call(o,"toolbar-cta"))}),100)}}),200)}))}}else if("editing-toolbar:change-background-color"==n.id){let s=new t.ButtonComponent(d);s.setClass("editingToolbarCommandsubItem-font-color").setTooltip(f("Background color")).onClick((()=>{e.commands.executeCommandById(n.id);const t=o.commandsManager.getActiveEditor(),s=t&&t.somethingSelected();0==i.cMenuVisibility?d.style.visibility="hidden":"following"==o.positionStyle?s||(d.style.visibility="hidden"):d.style.visibility="visible"})),O(n.icon)?s.buttonEl.innerHTML=n.icon:s.setIcon(n.icon),r+=c;let a=createEl("div");if(a.addClass("subitem"),a){a.innerHTML=function(t){return`<div class='x-color-picker-wrapper'>\n<div class='x-color-picker' >\n  <table class="x-color-picker-table" id='x-backgroundcolor-picker-table'>\n    <tbody>\n      <tr>\n        <th colspan="5" class="ui-widget-content">Translucent Colors</th>\n      </tr>\n      <tr class="top">\n        <td style="background-color:rgba(140, 140, 140, 0.12)"><span></span></td>\n        <td style="background-color:rgba(92, 92, 92, 0.2)"><span></span></td>\n        <td style="background-color:rgba(163, 67, 31, 0.2)"><span></span></td>\n        <td style="background-color:rgba(240, 107, 5, 0.2)"><span></span></td>\n        <td style="background-color:rgba(240, 200, 0, 0.2)"><span></span></td>\n        </tr>\n        <tr class="bottom">\n        <td style="background-color:rgba(3, 135, 102, 0.2)"><span></span></td>\n        <td style="background-color:rgba(3, 135, 102, 0.2)"><span></span></td>\n        <td style="background-color:rgba(5, 117, 197, 0.2)"><span></span></td>\n        <td style="background-color:rgba(74, 82, 199, 0.2)"><span></span></td>\n        <td style="background-color:rgba(136, 49, 204, 0.2)"><span></span></td>\n      </tr>\n\n      <tr>\n      <th colspan="5" class="ui-widget-content">Highlighter Colors</th>\n    </tr>\n    \n    <tr class="top">\n      <td style="background-color:rgb(255, 248, 143)"><span></span></td>\n      <td style="background-color:rgb(211, 248, 182)"><span></span></td>\n      <td style="background-color:rgb(175, 250, 209)"><span></span></td>\n      <td style="background-color:rgb(177, 255, 255)"><span></span></td>\n      <td style="background-color:rgb(253, 191, 255)"><span></span></td>\n      </tr>\n      <tr class="bottom">\n      <td style="background-color:rgb(210, 203, 255);"><span></span></td>\n      <td style="background-color:rgb(64, 169, 255);"><span></span></td>\n      <td style="background-color:rgb(255, 77, 79);"><span></span></td>\n      <td style="background-color:rgb(212, 177, 6);"><span></span></td>\n      <td style="background-color:rgb(146, 84, 222);"><span></span></td>\n    </tr>\n    <tr>\n    <th colspan="5" class="ui-widget-content">Custom Colors</th>\n  </tr>\n    <tr class="bottom">\n    <td style="background-color: ${t.settings.custom_bg1};"><span></span></td>\n    <td style="background-color:${t.settings.custom_bg2};"><span></span></td>\n    <td style="background-color:${t.settings.custom_bg3};"><span></span></td>\n    <td style="background-color:${t.settings.custom_bg4};"><span></span></td>\n    <td style="background-color:${t.settings.custom_bg5};"><span></span></td>\n  </tr>\n    </tbody>\n  </table>\n</div>\n</div>`}(o),s.buttonEl.insertAdjacentElement("afterbegin",a),N(e,o,"x-backgroundcolor-picker-table");let i=a.querySelector(".x-color-picker-wrapper");new t.ButtonComponent(i).setIcon("paintbrush").setTooltip(f("Format Brush")).onClick((()=>{L(o),o.setEN_BG_Format_Brush(!0),o.Temp_Notice=new t.Notice(f("Font-Color formatting brush ON!"),0)})),new t.ButtonComponent(i).setIcon("palette").setTooltip(f("Custom Backgroud Color")).onClick((()=>{e.setting.open(),e.setting.openTabById("editing-toolbar"),setTimeout((()=>{const t=e.setting.activeTab.containerEl.querySelector(".editing-toolbar-tabs");if(t){const o=t.children[1];null==o||o.click(),setTimeout((()=>{var t;let o=e.setting.activeTab.containerEl.querySelector(".custom_bg");o&&(null===(t=o.addClass)||void 0===t||t.call(o,"toolbar-cta"))}),100)}}),200)}))}}else{let u;r>=l-4*c&&l>100?(o.setIS_MORE_Button(!0),u=new t.ButtonComponent(p)):u=new t.ButtonComponent(d);let m=B(e,n.id);a="–"==m?n.name:n.name+"("+m+")",u.setTooltip(a).onClick((()=>{e.commands.executeCommandById(n.id);const t=o.commandsManager.getActiveEditor(),s=t&&t.somethingSelected();0==i.cMenuVisibility?d.style.visibility="hidden":"following"==o.positionStyle?s||(d.style.visibility="hidden"):d.style.visibility="visible"})),u.setClass("editingToolbarCommandItem"),s>=i.cMenuNumRows?u.setClass("editingToolbarSecond"):"top"!=o.positionStyle&&u.buttonEl.setAttribute("aria-label-position","top"),"editingToolbar-Divider-Line"==n.id&&u.setClass("editingToolbar-Divider-Line"),O(n.icon)?u.buttonEl.innerHTML=n.icon:u.setIcon(n.icon),r+=c}})),function(e,o,i){const n=e.workspace.getActiveViewOfType(t.ItemView);if(!E.isAllowedViewType(n))return;let s=n.containerEl.querySelector("#editingToolbarPopoverBar");if(!o.IS_MORE_Button)return;let a=i.createEl("span");a.addClass("more-menu");let r=new t.ButtonComponent(a);r.setClass("editingToolbarCommandItem").setTooltip(f("More")).onClick((()=>{"hidden"==s.style.visibility?(s.style.visibility="visible",s.style.height="32px"):(s.style.visibility="hidden",s.style.height="0")})),r.buttonEl.innerHTML='<svg  width="14" height="14"  version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" enable-background="new 0 0 1024 1024" xml:space="preserve"><path fill="#666" d="M510.29 14.13 q17.09 -15.07 40.2 -14.07 q23.12 1 39.2 18.08 l334.66 385.92 q25.12 30.15 34.16 66.83 q9.04 36.68 0.5 73.87 q-8.54 37.19 -32.66 67.34 l-335.67 390.94 q-15.07 18.09 -38.69 20.1 q-23.62 2.01 -41.71 -13.07 q-18.08 -15.08 -20.09 -38.19 q-2.01 -23.12 13.06 -41.21 l334.66 -390.94 q11.06 -13.06 11.56 -29.65 q0.5 -16.58 -10.55 -29.64 l-334.67 -386.92 q-15.07 -17.09 -13.56 -40.7 q1.51 -23.62 19.59 -38.7 ZM81.17 14.13 q17.08 -15.07 40.19 -14.07 q23.11 1 39.2 18.08 l334.66 385.92 q25.12 30.15 34.16 66.83 q9.04 36.68 0.5 73.87 q-8.54 37.19 -32.66 67.34 l-335.67 390.94 q-15.07 18.09 -38.69 20.6 q-23.61 2.51 -41.7 -12.57 q-18.09 -15.08 -20.1 -38.69 q-2.01 -23.62 13.06 -41.71 l334.66 -390.94 q11.06 -13.06 11.56 -29.65 q0.5 -16.58 -10.55 -29.64 l-334.66 -386.92 q-15.08 -17.09 -13.57 -40.7 q1.51 -23.62 19.6 -38.7 Z"/></svg>',o.setIS_MORE_Button(!1)}(e,o,d),Math.abs(o.settings.cMenuWidth-Number(r))>r+4&&(o.settings.cMenuWidth=Number(r),setTimeout((()=>{o.saveSettings()}),100))};if(!o.isLoadMobile())return;const r=e.workspace.getActiveViewOfType(t.ItemView);E.isAllowedViewType(r)&&(A(e,o)||(a(),u(o.settings),d(o.settings),function(e,o){M=t.requireApiVersion("0.15.0")?activeWindow.document:window.document;let i=M.querySelectorAll("#change-font-color-icon");i&&i.forEach((t=>{t.style.fill=e}));let n=M.querySelectorAll("#change-background-color-icon");n&&n.forEach((t=>{t.style.fill=o}))}
/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */(i.cMenuFontColor,i.cMenuBackgroundColor)))}()}function V(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function z(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?V(Object(o),!0).forEach((function(e){U(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):V(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function U(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function W(){return W=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},W.apply(this,arguments)}function j(t,e){if(null==t)return{};var o,i,n=function(t,e){if(null==t)return{};var o,i,n={},s=Object.keys(t);for(i=0;i<s.length;i++)o=s[i],e.indexOf(o)>=0||(n[o]=t[o]);return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)o=s[i],e.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}function Z(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var Y=Z(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),G=Z(/Edge/i),X=Z(/firefox/i),J=Z(/safari/i)&&!Z(/chrome/i)&&!Z(/android/i),K=Z(/iP(ad|od|hone)/i),Q=Z(/chrome/i)&&Z(/android/i),tt={capture:!1,passive:!1};function et(t,e,o){t.addEventListener(e,o,!Y&&tt)}function ot(t,e,o){t.removeEventListener(e,o,!Y&&tt)}function it(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function nt(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function st(t,e,o,i){if(t){o=o||document;do{if(null!=e&&(">"===e[0]?t.parentNode===o&&it(t,e):it(t,e))||i&&t===o)return t;if(t===o)break}while(t=nt(t))}return null}var at,rt=/\s+/g;function lt(t,e,o){if(t&&e)if(t.classList)t.classList[o?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(rt," ").replace(" "+e+" "," ");t.className=(i+(o?" "+e:"")).replace(rt," ")}}function ct(t,e,o){var i=t&&t.style;if(i){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=o+("string"==typeof o?"":"px")}}function dt(t,e){var o="";if("string"==typeof t)o=t;else do{var i=ct(t,"transform");i&&"none"!==i&&(o=i+" "+o)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(o)}function ut(t,e,o){if(t){var i=t.getElementsByTagName(e),n=0,s=i.length;if(o)for(;n<s;n++)o(i[n],n);return i}return[]}function pt(){var t=document.scrollingElement;return t||document.documentElement}function mt(t,e,o,i,n){if(t.getBoundingClientRect||t===window){var s,a,r,l,c,d,u;if(t!==window&&t.parentNode&&t!==pt()?(a=(s=t.getBoundingClientRect()).top,r=s.left,l=s.bottom,c=s.right,d=s.height,u=s.width):(a=0,r=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(e||o)&&t!==window&&(n=n||t.parentNode,!Y))do{if(n&&n.getBoundingClientRect&&("none"!==ct(n,"transform")||o&&"static"!==ct(n,"position"))){var p=n.getBoundingClientRect();a-=p.top+parseInt(ct(n,"border-top-width")),r-=p.left+parseInt(ct(n,"border-left-width")),l=a+s.height,c=r+s.width;break}}while(n=n.parentNode);if(i&&t!==window){var m=dt(n||t),h=m&&m.a,g=m&&m.d;m&&(l=(a/=g)+(d/=g),c=(r/=h)+(u/=h))}return{top:a,left:r,bottom:l,right:c,width:u,height:d}}}function ht(t,e,o){for(var i=vt(t,!0),n=mt(t)[e];i;){var s=mt(i)[o];if(!("top"===o||"left"===o?n>=s:n<=s))return i;if(i===pt())break;i=vt(i,!1)}return!1}function gt(t,e,o,i){for(var n=0,s=0,a=t.children;s<a.length;){if("none"!==a[s].style.display&&a[s]!==ke.ghost&&(i||a[s]!==ke.dragged)&&st(a[s],o.draggable,t,!1)){if(n===e)return a[s];n++}s++}return null}function ft(t,e){for(var o=t.lastElementChild;o&&(o===ke.ghost||"none"===ct(o,"display")||e&&!it(o,e));)o=o.previousElementSibling;return o||null}function bt(t,e){var o=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===ke.clone||e&&!it(t,e)||o++;return o}function yt(t){var e=0,o=0,i=pt();if(t)do{var n=dt(t),s=n.a,a=n.d;e+=t.scrollLeft*s,o+=t.scrollTop*a}while(t!==i&&(t=t.parentNode));return[e,o]}function vt(t,e){if(!t||!t.getBoundingClientRect)return pt();var o=t,i=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var n=ct(o);if(o.clientWidth<o.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!o.getBoundingClientRect||o===document.body)return pt();if(i||e)return o;i=!0}}}while(o=o.parentNode);return pt()}function Ct(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function wt(t,e){return function(){if(!at){var o=arguments;1===o.length?t.call(this,o[0]):t.apply(this,o),at=setTimeout((function(){at=void 0}),e)}}}function xt(t,e,o){t.scrollLeft+=e,t.scrollTop+=o}function kt(t){var e=window.Polymer,o=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):o?o(t).clone(!0)[0]:t.cloneNode(!0)}function St(t,e,o){var i={};return Array.from(t.children).forEach((function(n){var s,a,r,l;if(st(n,e.draggable,t,!1)&&!n.animated&&n!==o){var c=mt(n);i.left=Math.min(null!==(s=i.left)&&void 0!==s?s:1/0,c.left),i.top=Math.min(null!==(a=i.top)&&void 0!==a?a:1/0,c.top),i.right=Math.max(null!==(r=i.right)&&void 0!==r?r:-1/0,c.right),i.bottom=Math.max(null!==(l=i.bottom)&&void 0!==l?l:-1/0,c.bottom)}})),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Tt="Sortable"+(new Date).getTime();function Et(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==ct(t,"display")&&t!==ke.ghost){e.push({target:t,rect:mt(t)});var o=z({},e[e.length-1].rect);if(t.thisAnimationDuration){var i=dt(t,!0);i&&(o.top-=i.f,o.left-=i.e)}t.fromRect=o}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var o in t)if(t.hasOwnProperty(o))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[o][i])return Number(o);return-1}(e,{target:t}),1)},animateAll:function(o){var i=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof o&&o());var n=!1,s=0;e.forEach((function(t){var e=0,o=t.target,a=o.fromRect,r=mt(o),l=o.prevFromRect,c=o.prevToRect,d=t.rect,u=dt(o,!0);u&&(r.top-=u.f,r.left-=u.e),o.toRect=r,o.thisAnimationDuration&&Ct(l,r)&&!Ct(a,r)&&(d.top-r.top)/(d.left-r.left)==(a.top-r.top)/(a.left-r.left)&&(e=function(t,e,o,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))*i.animation}(d,l,c,i.options)),Ct(r,a)||(o.prevFromRect=a,o.prevToRect=r,e||(e=i.options.animation),i.animate(o,d,r,e)),e&&(n=!0,s=Math.max(s,e),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),e),o.thisAnimationDuration=e)})),clearTimeout(t),n?t=setTimeout((function(){"function"==typeof o&&o()}),s):"function"==typeof o&&o(),e=[]},animate:function(t,e,o,i){if(i){ct(t,"transition",""),ct(t,"transform","");var n=dt(this.el),s=n&&n.a,a=n&&n.d,r=(e.left-o.left)/(s||1),l=(e.top-o.top)/(a||1);t.animatingX=!!r,t.animatingY=!!l,ct(t,"transform","translate3d("+r+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),ct(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),ct(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){ct(t,"transition",""),ct(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),i)}}}}var Mt=[],It={initializeByDefault:!0},qt={mount:function(t){for(var e in It)It.hasOwnProperty(e)&&!(e in t)&&(t[e]=It[e]);Mt.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),Mt.push(t)},pluginEvent:function(t,e,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var n=t+"Global";Mt.forEach((function(i){e[i.pluginName]&&(e[i.pluginName][n]&&e[i.pluginName][n](z({sortable:e},o)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](z({sortable:e},o)))}))},initializePlugins:function(t,e,o,i){for(var n in Mt.forEach((function(i){var n=i.pluginName;if(t.options[n]||i.initializeByDefault){var s=new i(t,e,t.options);s.sortable=t,s.options=t.options,t[n]=s,W(o,s.defaults)}})),t.options)if(t.options.hasOwnProperty(n)){var s=this.modifyOption(t,n,t.options[n]);void 0!==s&&(t.options[n]=s)}},getEventProperties:function(t,e){var o={};return Mt.forEach((function(i){"function"==typeof i.eventProperties&&W(o,i.eventProperties.call(e[i.pluginName],t))})),o},modifyOption:function(t,e,o){var i;return Mt.forEach((function(n){t[n.pluginName]&&n.optionListeners&&"function"==typeof n.optionListeners[e]&&(i=n.optionListeners[e].call(t[n.pluginName],o))})),i}};var At=["evt"],Dt=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.evt,n=j(o,At);qt.pluginEvent.bind(ke)(t,e,z({dragEl:Bt,parentEl:Ot,ghostEl:Nt,rootEl:Ft,nextEl:Lt,lastDownEl:Rt,cloneEl:Pt,cloneHidden:$t,dragStarted:Qt,putSortable:jt,activeSortable:ke.active,originalEvent:i,oldIndex:Vt,oldDraggableIndex:Ht,newIndex:zt,newDraggableIndex:Ut,hideGhostForTarget:ve,unhideGhostForTarget:Ce,cloneNowHidden:function(){$t=!0},cloneNowShown:function(){$t=!1},dispatchSortableEvent:function(t){_t({sortable:e,name:t,originalEvent:i})}},n))};function _t(t){!function(t){var e=t.sortable,o=t.rootEl,i=t.name,n=t.targetEl,s=t.cloneEl,a=t.toEl,r=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,u=t.newDraggableIndex,p=t.originalEvent,m=t.putSortable,h=t.extraEventProperties;if(e=e||o&&o[Tt]){var g,f=e.options,b="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||Y||G?(g=document.createEvent("Event")).initEvent(i,!0,!0):g=new CustomEvent(i,{bubbles:!0,cancelable:!0}),g.to=a||o,g.from=r||o,g.item=n||o,g.clone=s,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=u,g.originalEvent=p,g.pullMode=m?m.lastPutMode:void 0;var y=z(z({},h),qt.getEventProperties(i,e));for(var v in y)g[v]=y[v];o&&o.dispatchEvent(g),f[b]&&f[b].call(e,g)}}(z({putSortable:jt,cloneEl:Pt,targetEl:Bt,rootEl:Ft,oldIndex:Vt,oldDraggableIndex:Ht,newIndex:zt,newDraggableIndex:Ut},t))}var Bt,Ot,Nt,Ft,Lt,Rt,Pt,$t,Vt,zt,Ht,Ut,Wt,jt,Zt,Yt,Gt,Xt,Jt,Kt,Qt,te,ee,oe,ie,ne=!1,se=!1,ae=[],re=!1,le=!1,ce=[],de=!1,ue=[],pe="undefined"!=typeof document,me=K,he=G||Y?"cssFloat":"float",ge=pe&&!Q&&!K&&"draggable"in document.createElement("div"),fe=function(){if(pe){if(Y)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),be=function(t,e){var o=ct(t),i=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),n=gt(t,0,e),s=gt(t,1,e),a=n&&ct(n),r=s&&ct(s),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+mt(n).width,c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+mt(s).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&a.float&&"none"!==a.float){var d="left"===a.float?"left":"right";return!s||"both"!==r.clear&&r.clear!==d?"horizontal":"vertical"}return n&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=i&&"none"===o[he]||s&&"none"===o[he]&&l+c>i)?"vertical":"horizontal"},ye=function(t){function e(t,o){return function(i,n,s,a){var r=i.options.group.name&&n.options.group.name&&i.options.group.name===n.options.group.name;if(null==t&&(o||r))return!0;if(null==t||!1===t)return!1;if(o&&"clone"===t)return t;if("function"==typeof t)return e(t(i,n,s,a),o)(i,n,s,a);var l=(o?i:n).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var o={},i=t.group;i&&"object"==H(i)||(i={name:i}),o.name=i.name,o.checkPull=e(i.pull,!0),o.checkPut=e(i.put),o.revertClone=i.revertClone,t.group=o},ve=function(){!fe&&Nt&&ct(Nt,"display","none")},Ce=function(){!fe&&Nt&&ct(Nt,"display","")};pe&&!Q&&document.addEventListener("click",(function(t){if(se)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),se=!1,!1}),!0);var we=function(t){if(Bt){t=t.touches?t.touches[0]:t;var e=(n=t.clientX,s=t.clientY,ae.some((function(t){var e=t[Tt].options.emptyInsertThreshold;if(e&&!ft(t)){var o=mt(t),i=n>=o.left-e&&n<=o.right+e,r=s>=o.top-e&&s<=o.bottom+e;return i&&r?a=t:void 0}})),a);if(e){var o={};for(var i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[Tt]._onDragOver(o)}}var n,s,a},xe=function(t){Bt&&Bt.parentNode[Tt]._isOutsideThisEl(t.target)};function ke(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=W({},e),t[Tt]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return be(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ke.supportPointer&&"PointerEvent"in window&&(!J||K),emptyInsertThreshold:5};for(var i in qt.initializePlugins(this,t,o),o)!(i in e)&&(e[i]=o[i]);for(var n in ye(e),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!e.forceFallback&&ge,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?et(t,"pointerdown",this._onTapStart):(et(t,"mousedown",this._onTapStart),et(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(et(t,"dragover",this),et(t,"dragenter",this)),ae.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),W(this,Et())}function Se(t,e,o,i,n,s,a,r){var l,c,d=t[Tt],u=d.options.onMove;return!window.CustomEvent||Y||G?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=o,l.draggedRect=i,l.related=n||e,l.relatedRect=s||mt(e),l.willInsertAfter=r,l.originalEvent=a,t.dispatchEvent(l),u&&(c=u.call(d,l,a)),c}function Te(t){t.draggable=!1}function Ee(){de=!1}function Me(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,i=0;o--;)i+=e.charCodeAt(o);return i.toString(36)}function Ie(t){return setTimeout(t,0)}function qe(t){return clearTimeout(t)}ke.prototype={constructor:ke,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(te=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Bt):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,o=this.el,i=this.options,n=i.preventOnFilter,s=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,r=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||r,c=i.filter;if(function(t){ue.length=0;var e=t.getElementsByTagName("input"),o=e.length;for(;o--;){var i=e[o];i.checked&&ue.push(i)}}(o),!Bt&&!(/mousedown|pointerdown/.test(s)&&0!==t.button||i.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!J||!r||"SELECT"!==r.tagName.toUpperCase())&&!((r=st(r,i.draggable,o,!1))&&r.animated||Rt===r)){if(Vt=bt(r),Ht=bt(r,i.draggable),"function"==typeof c){if(c.call(this,t,r,this))return _t({sortable:e,rootEl:l,name:"filter",targetEl:r,toEl:o,fromEl:o}),Dt("filter",e,{evt:t}),void(n&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=st(l,i.trim(),o,!1))return _t({sortable:e,rootEl:i,name:"filter",targetEl:r,fromEl:o,toEl:o}),Dt("filter",e,{evt:t}),!0}))))return void(n&&t.preventDefault());i.handle&&!st(l,i.handle,o,!1)||this._prepareDragStart(t,a,r)}}},_prepareDragStart:function(t,e,o){var i,n=this,s=n.el,a=n.options,r=s.ownerDocument;if(o&&!Bt&&o.parentNode===s){var l=mt(o);if(Ft=s,Ot=(Bt=o).parentNode,Lt=Bt.nextSibling,Rt=o,Wt=a.group,ke.dragged=Bt,Zt={target:Bt,clientX:(e||t).clientX,clientY:(e||t).clientY},Jt=Zt.clientX-l.left,Kt=Zt.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Bt.style["will-change"]="all",i=function(){Dt("delayEnded",n,{evt:t}),ke.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!X&&n.nativeDraggable&&(Bt.draggable=!0),n._triggerDragStart(t,e),_t({sortable:n,name:"choose",originalEvent:t}),lt(Bt,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){ut(Bt,t.trim(),Te)})),et(r,"dragover",we),et(r,"mousemove",we),et(r,"touchmove",we),a.supportPointer?(et(r,"pointerup",n._onDrop),!this.nativeDraggable&&et(r,"pointercancel",n._onDrop)):(et(r,"mouseup",n._onDrop),et(r,"touchend",n._onDrop),et(r,"touchcancel",n._onDrop)),X&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Bt.draggable=!0),Dt("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(G||Y))i();else{if(ke.eventCanceled)return void this._onDrop();a.supportPointer?(et(r,"pointerup",n._disableDelayedDrag),et(r,"pointercancel",n._disableDelayedDrag)):(et(r,"mouseup",n._disableDelayedDrag),et(r,"touchend",n._disableDelayedDrag),et(r,"touchcancel",n._disableDelayedDrag)),et(r,"mousemove",n._delayedDragTouchMoveHandler),et(r,"touchmove",n._delayedDragTouchMoveHandler),a.supportPointer&&et(r,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(i,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Bt&&Te(Bt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ot(t,"mouseup",this._disableDelayedDrag),ot(t,"touchend",this._disableDelayedDrag),ot(t,"touchcancel",this._disableDelayedDrag),ot(t,"pointerup",this._disableDelayedDrag),ot(t,"pointercancel",this._disableDelayedDrag),ot(t,"mousemove",this._delayedDragTouchMoveHandler),ot(t,"touchmove",this._delayedDragTouchMoveHandler),ot(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?et(document,"pointermove",this._onTouchMove):et(document,e?"touchmove":"mousemove",this._onTouchMove):(et(Bt,"dragend",this),et(Ft,"dragstart",this._onDragStart));try{document.selection?Ie((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(ne=!1,Ft&&Bt){Dt("dragStarted",this,{evt:e}),this.nativeDraggable&&et(document,"dragover",xe);var o=this.options;!t&&lt(Bt,o.dragClass,!1),lt(Bt,o.ghostClass,!0),ke.active=this,t&&this._appendGhost(),_t({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Yt){this._lastX=Yt.clientX,this._lastY=Yt.clientY,ve();for(var t=document.elementFromPoint(Yt.clientX,Yt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Yt.clientX,Yt.clientY))!==e;)e=t;if(Bt.parentNode[Tt]._isOutsideThisEl(t),e)do{if(e[Tt]){if(e[Tt]._onDragOver({clientX:Yt.clientX,clientY:Yt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=nt(e));Ce()}},_onTouchMove:function(t){if(Zt){var e=this.options,o=e.fallbackTolerance,i=e.fallbackOffset,n=t.touches?t.touches[0]:t,s=Nt&&dt(Nt,!0),a=Nt&&s&&s.a,r=Nt&&s&&s.d,l=me&&ie&&yt(ie),c=(n.clientX-Zt.clientX+i.x)/(a||1)+(l?l[0]-ce[0]:0)/(a||1),d=(n.clientY-Zt.clientY+i.y)/(r||1)+(l?l[1]-ce[1]:0)/(r||1);if(!ke.active&&!ne){if(o&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(Nt){s?(s.e+=c-(Gt||0),s.f+=d-(Xt||0)):s={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");ct(Nt,"webkitTransform",u),ct(Nt,"mozTransform",u),ct(Nt,"msTransform",u),ct(Nt,"transform",u),Gt=c,Xt=d,Yt=n}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Nt){var t=this.options.fallbackOnBody?document.body:Ft,e=mt(Bt,!0,me,!0,t),o=this.options;if(me){for(ie=t;"static"===ct(ie,"position")&&"none"===ct(ie,"transform")&&ie!==document;)ie=ie.parentNode;ie!==document.body&&ie!==document.documentElement?(ie===document&&(ie=pt()),e.top+=ie.scrollTop,e.left+=ie.scrollLeft):ie=pt(),ce=yt(ie)}lt(Nt=Bt.cloneNode(!0),o.ghostClass,!1),lt(Nt,o.fallbackClass,!0),lt(Nt,o.dragClass,!0),ct(Nt,"transition",""),ct(Nt,"transform",""),ct(Nt,"box-sizing","border-box"),ct(Nt,"margin",0),ct(Nt,"top",e.top),ct(Nt,"left",e.left),ct(Nt,"width",e.width),ct(Nt,"height",e.height),ct(Nt,"opacity","0.8"),ct(Nt,"position",me?"absolute":"fixed"),ct(Nt,"zIndex","100000"),ct(Nt,"pointerEvents","none"),ke.ghost=Nt,t.appendChild(Nt),ct(Nt,"transform-origin",Jt/parseInt(Nt.style.width)*100+"% "+Kt/parseInt(Nt.style.height)*100+"%")}},_onDragStart:function(t,e){var o=this,i=t.dataTransfer,n=o.options;Dt("dragStart",this,{evt:t}),ke.eventCanceled?this._onDrop():(Dt("setupClone",this),ke.eventCanceled||((Pt=kt(Bt)).removeAttribute("id"),Pt.draggable=!1,Pt.style["will-change"]="",this._hideClone(),lt(Pt,this.options.chosenClass,!1),ke.clone=Pt),o.cloneId=Ie((function(){Dt("clone",o),ke.eventCanceled||(o.options.removeCloneOnHide||Ft.insertBefore(Pt,Bt),o._hideClone(),_t({sortable:o,name:"clone"}))})),!e&&lt(Bt,n.dragClass,!0),e?(se=!0,o._loopId=setInterval(o._emulateDragOver,50)):(ot(document,"mouseup",o._onDrop),ot(document,"touchend",o._onDrop),ot(document,"touchcancel",o._onDrop),i&&(i.effectAllowed="move",n.setData&&n.setData.call(o,i,Bt)),et(document,"drop",o),ct(Bt,"transform","translateZ(0)")),ne=!0,o._dragStartId=Ie(o._dragStarted.bind(o,e,t)),et(document,"selectstart",o),Qt=!0,window.getSelection().removeAllRanges(),J&&ct(document.body,"user-select","none"))},_onDragOver:function(t){var e,o,i,n,s=this.el,a=t.target,r=this.options,l=r.group,c=ke.active,d=Wt===l,u=r.sort,p=jt||c,m=this,h=!1;if(!de){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=st(a,r.draggable,s,!0),q("dragOver"),ke.eventCanceled)return h;if(Bt.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||m._ignoreWhileAnimating===a)return D(!1);if(se=!1,c&&!r.disabled&&(d?u||(i=Ot!==Ft):jt===this||(this.lastPutMode=Wt.checkPull(this,c,Bt,t))&&l.checkPut(this,c,Bt,t))){if(n="vertical"===this._getDirection(t,a),e=mt(Bt),q("dragOverValid"),ke.eventCanceled)return h;if(i)return Ot=Ft,A(),this._hideClone(),q("revert"),ke.eventCanceled||(Lt?Ft.insertBefore(Bt,Lt):Ft.appendChild(Bt)),D(!0);var g=ft(s,r.draggable);if(!g||function(t,e,o){var i=mt(ft(o.el,o.options.draggable)),n=St(o.el,o.options,Nt),s=10;return e?t.clientX>n.right+s||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>n.bottom+s||t.clientX>i.right&&t.clientY>i.top}(t,n,this)&&!g.animated){if(g===Bt)return D(!1);if(g&&s===t.target&&(a=g),a&&(o=mt(a)),!1!==Se(Ft,s,Bt,e,a,o,t,!!a))return A(),g&&g.nextSibling?s.insertBefore(Bt,g.nextSibling):s.appendChild(Bt),Ot=s,_(),D(!0)}else if(g&&function(t,e,o){var i=mt(gt(o.el,0,o.options,!0)),n=St(o.el,o.options,Nt),s=10;return e?t.clientX<n.left-s||t.clientY<i.top&&t.clientX<i.right:t.clientY<n.top-s||t.clientY<i.bottom&&t.clientX<i.left}(t,n,this)){var f=gt(s,0,r,!0);if(f===Bt)return D(!1);if(o=mt(a=f),!1!==Se(Ft,s,Bt,e,a,o,t,!1))return A(),s.insertBefore(Bt,f),Ot=s,_(),D(!0)}else if(a.parentNode===s){o=mt(a);var b,y,v,C=Bt.parentNode!==s,w=!function(t,e,o){var i=o?t.left:t.top,n=o?t.right:t.bottom,s=o?t.width:t.height,a=o?e.left:e.top,r=o?e.right:e.bottom,l=o?e.width:e.height;return i===a||n===r||i+s/2===a+l/2}(Bt.animated&&Bt.toRect||e,a.animated&&a.toRect||o,n),x=n?"top":"left",k=ht(a,"top","top")||ht(Bt,"top","top"),S=k?k.scrollTop:void 0;if(te!==a&&(y=o[x],re=!1,le=!w&&r.invertSwap||C),b=function(t,e,o,i,n,s,a,r){var l=i?t.clientY:t.clientX,c=i?o.height:o.width,d=i?o.top:o.left,u=i?o.bottom:o.right,p=!1;if(!a)if(r&&oe<c*n){if(!re&&(1===ee?l>d+c*s/2:l<u-c*s/2)&&(re=!0),re)p=!0;else if(1===ee?l<d+oe:l>u-oe)return-ee}else if(l>d+c*(1-n)/2&&l<u-c*(1-n)/2)return function(t){return bt(Bt)<bt(t)?1:-1}(e);if((p=p||a)&&(l<d+c*s/2||l>u-c*s/2))return l>d+c/2?1:-1;return 0}(t,a,o,n,w?1:r.swapThreshold,null==r.invertedSwapThreshold?r.swapThreshold:r.invertedSwapThreshold,le,te===a),0!==b){var T=bt(Bt);do{T-=b,v=Ot.children[T]}while(v&&("none"===ct(v,"display")||v===Nt))}if(0===b||v===a)return D(!1);te=a,ee=b;var E=a.nextElementSibling,M=!1,I=Se(Ft,s,Bt,e,a,o,t,M=1===b);if(!1!==I)return 1!==I&&-1!==I||(M=1===I),de=!0,setTimeout(Ee,30),A(),M&&!E?s.appendChild(Bt):a.parentNode.insertBefore(Bt,M?E:a),k&&xt(k,0,S-k.scrollTop),Ot=Bt.parentNode,void 0===y||le||(oe=Math.abs(y-mt(a)[x])),_(),D(!0)}if(s.contains(Bt))return D(!1)}return!1}function q(r,l){Dt(r,m,z({evt:t,isOwner:d,axis:n?"vertical":"horizontal",revert:i,dragRect:e,targetRect:o,canSort:u,fromSortable:p,target:a,completed:D,onMove:function(o,i){return Se(Ft,s,Bt,e,o,mt(o),t,i)},changed:_},l))}function A(){q("dragOverAnimationCapture"),m.captureAnimationState(),m!==p&&p.captureAnimationState()}function D(e){return q("dragOverCompleted",{insertion:e}),e&&(d?c._hideClone():c._showClone(m),m!==p&&(lt(Bt,jt?jt.options.ghostClass:c.options.ghostClass,!1),lt(Bt,r.ghostClass,!0)),jt!==m&&m!==ke.active?jt=m:m===ke.active&&jt&&(jt=null),p===m&&(m._ignoreWhileAnimating=a),m.animateAll((function(){q("dragOverAnimationComplete"),m._ignoreWhileAnimating=null})),m!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(a===Bt&&!Bt.animated||a===s&&!a.animated)&&(te=null),r.dragoverBubble||t.rootEl||a===document||(Bt.parentNode[Tt]._isOutsideThisEl(t.target),!e&&we(t)),!r.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),h=!0}function _(){zt=bt(Bt),Ut=bt(Bt,r.draggable),_t({sortable:m,name:"change",toEl:s,newIndex:zt,newDraggableIndex:Ut,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){ot(document,"mousemove",this._onTouchMove),ot(document,"touchmove",this._onTouchMove),ot(document,"pointermove",this._onTouchMove),ot(document,"dragover",we),ot(document,"mousemove",we),ot(document,"touchmove",we)},_offUpEvents:function(){var t=this.el.ownerDocument;ot(t,"mouseup",this._onDrop),ot(t,"touchend",this._onDrop),ot(t,"pointerup",this._onDrop),ot(t,"pointercancel",this._onDrop),ot(t,"touchcancel",this._onDrop),ot(document,"selectstart",this)},_onDrop:function(t){var e=this.el,o=this.options;zt=bt(Bt),Ut=bt(Bt,o.draggable),Dt("drop",this,{evt:t}),Ot=Bt&&Bt.parentNode,zt=bt(Bt),Ut=bt(Bt,o.draggable),ke.eventCanceled||(ne=!1,le=!1,re=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),qe(this.cloneId),qe(this._dragStartId),this.nativeDraggable&&(ot(document,"drop",this),ot(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),J&&ct(document.body,"user-select",""),ct(Bt,"transform",""),t&&(Qt&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),Nt&&Nt.parentNode&&Nt.parentNode.removeChild(Nt),(Ft===Ot||jt&&"clone"!==jt.lastPutMode)&&Pt&&Pt.parentNode&&Pt.parentNode.removeChild(Pt),Bt&&(this.nativeDraggable&&ot(Bt,"dragend",this),Te(Bt),Bt.style["will-change"]="",Qt&&!ne&&lt(Bt,jt?jt.options.ghostClass:this.options.ghostClass,!1),lt(Bt,this.options.chosenClass,!1),_t({sortable:this,name:"unchoose",toEl:Ot,newIndex:null,newDraggableIndex:null,originalEvent:t}),Ft!==Ot?(zt>=0&&(_t({rootEl:Ot,name:"add",toEl:Ot,fromEl:Ft,originalEvent:t}),_t({sortable:this,name:"remove",toEl:Ot,originalEvent:t}),_t({rootEl:Ot,name:"sort",toEl:Ot,fromEl:Ft,originalEvent:t}),_t({sortable:this,name:"sort",toEl:Ot,originalEvent:t})),jt&&jt.save()):zt!==Vt&&zt>=0&&(_t({sortable:this,name:"update",toEl:Ot,originalEvent:t}),_t({sortable:this,name:"sort",toEl:Ot,originalEvent:t})),ke.active&&(null!=zt&&-1!==zt||(zt=Vt,Ut=Ht),_t({sortable:this,name:"end",toEl:Ot,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){Dt("nulling",this),Ft=Bt=Ot=Nt=Lt=Pt=Rt=$t=Zt=Yt=Qt=zt=Ut=Vt=Ht=te=ee=jt=Wt=ke.dragged=ke.ghost=ke.clone=ke.active=null,ue.forEach((function(t){t.checked=!0})),ue.length=Gt=Xt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Bt&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],o=this.el.children,i=0,n=o.length,s=this.options;i<n;i++)st(t=o[i],s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Me(t));return e},sort:function(t,e){var o={},i=this.el;this.toArray().forEach((function(t,e){var n=i.children[e];st(n,this.options.draggable,i,!1)&&(o[t]=n)}),this),e&&this.captureAnimationState(),t.forEach((function(t){o[t]&&(i.removeChild(o[t]),i.appendChild(o[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return st(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(void 0===e)return o[t];var i=qt.modifyOption(this,t,e);o[t]=void 0!==i?i:e,"group"===t&&ye(o)},destroy:function(){Dt("destroy",this);var t=this.el;t[Tt]=null,ot(t,"mousedown",this._onTapStart),ot(t,"touchstart",this._onTapStart),ot(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ot(t,"dragover",this),ot(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),ae.splice(ae.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!$t){if(Dt("hideClone",this),ke.eventCanceled)return;ct(Pt,"display","none"),this.options.removeCloneOnHide&&Pt.parentNode&&Pt.parentNode.removeChild(Pt),$t=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if($t){if(Dt("showClone",this),ke.eventCanceled)return;Bt.parentNode!=Ft||this.options.group.revertClone?Lt?Ft.insertBefore(Pt,Lt):Ft.appendChild(Pt):Ft.insertBefore(Pt,Bt),this.options.group.revertClone&&this.animate(Bt,Pt),ct(Pt,"display",""),$t=!1}}else this._hideClone()}},pe&&et(document,"touchmove",(function(t){(ke.active||ne)&&t.cancelable&&t.preventDefault()})),ke.utils={on:et,off:ot,css:ct,find:ut,is:function(t,e){return!!st(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t},throttle:wt,closest:st,toggleClass:lt,clone:kt,index:bt,nextTick:Ie,cancelNextTick:qe,detectDirection:be,getChild:gt,expando:Tt},ke.get=function(t){return t[Tt]},ke.mount=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(ke.utils=z(z({},ke.utils),t.utils)),qt.mount(t)}))},ke.create=function(t,e){return new ke(t,e)},ke.version="1.15.6";var Ae,De,_e,Be,Oe,Ne,Fe=[],Le=!1;function Re(){Fe.forEach((function(t){clearInterval(t.pid)})),Fe=[]}function Pe(){clearInterval(Ne)}var $e=wt((function(t,e,o,i){if(e.scroll){var n,s=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,l=e.scrollSpeed,c=pt(),d=!1;De!==o&&(De=o,Re(),Ae=e.scroll,n=e.scrollFn,!0===Ae&&(Ae=vt(o,!0)));var u=0,p=Ae;do{var m=p,h=mt(m),g=h.top,f=h.bottom,b=h.left,y=h.right,v=h.width,C=h.height,w=void 0,x=void 0,k=m.scrollWidth,S=m.scrollHeight,T=ct(m),E=m.scrollLeft,M=m.scrollTop;m===c?(w=v<k&&("auto"===T.overflowX||"scroll"===T.overflowX||"visible"===T.overflowX),x=C<S&&("auto"===T.overflowY||"scroll"===T.overflowY||"visible"===T.overflowY)):(w=v<k&&("auto"===T.overflowX||"scroll"===T.overflowX),x=C<S&&("auto"===T.overflowY||"scroll"===T.overflowY));var I=w&&(Math.abs(y-s)<=r&&E+v<k)-(Math.abs(b-s)<=r&&!!E),q=x&&(Math.abs(f-a)<=r&&M+C<S)-(Math.abs(g-a)<=r&&!!M);if(!Fe[u])for(var A=0;A<=u;A++)Fe[A]||(Fe[A]={});Fe[u].vx==I&&Fe[u].vy==q&&Fe[u].el===m||(Fe[u].el=m,Fe[u].vx=I,Fe[u].vy=q,clearInterval(Fe[u].pid),0==I&&0==q||(d=!0,Fe[u].pid=setInterval(function(){i&&0===this.layer&&ke.active._onTouchMove(Oe);var e=Fe[this.layer].vy?Fe[this.layer].vy*l:0,o=Fe[this.layer].vx?Fe[this.layer].vx*l:0;"function"==typeof n&&"continue"!==n.call(ke.dragged.parentNode[Tt],o,e,t,Oe,Fe[this.layer].el)||xt(Fe[this.layer].el,o,e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&p!==c&&(p=vt(p,!1)));Le=d}}),30),Ve=function(t){var e=t.originalEvent,o=t.putSortable,i=t.dragEl,n=t.activeSortable,s=t.dispatchSortableEvent,a=t.hideGhostForTarget,r=t.unhideGhostForTarget;if(e){var l=o||n;a();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,d=document.elementFromPoint(c.clientX,c.clientY);r(),l&&!l.el.contains(d)&&(s("spill"),this.onSpill({dragEl:i,putSortable:o}))}};function ze(){}function He(){}ze.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var i=gt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),o&&o.animateAll()},drop:Ve},W(ze,{pluginName:"revertOnSpill"}),He.prototype={onSpill:function(t){var e=t.dragEl,o=t.putSortable||this.sortable;o.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),o.animateAll()},drop:Ve},W(He,{pluginName:"removeOnSpill"}),ke.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?et(document,"dragover",this._handleAutoScroll):this.options.supportPointer?et(document,"pointermove",this._handleFallbackAutoScroll):e.touches?et(document,"touchmove",this._handleFallbackAutoScroll):et(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?ot(document,"dragover",this._handleAutoScroll):(ot(document,"pointermove",this._handleFallbackAutoScroll),ot(document,"touchmove",this._handleFallbackAutoScroll),ot(document,"mousemove",this._handleFallbackAutoScroll)),Pe(),Re(),clearTimeout(at),at=void 0},nulling:function(){Oe=De=Ae=Le=Ne=_e=Be=null,Fe.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var o=this,i=(t.touches?t.touches[0]:t).clientX,n=(t.touches?t.touches[0]:t).clientY,s=document.elementFromPoint(i,n);if(Oe=t,e||this.options.forceAutoScrollFallback||G||Y||J){$e(t,this.options,s,e);var a=vt(s,!0);!Le||Ne&&i===_e&&n===Be||(Ne&&Pe(),Ne=setInterval((function(){var s=vt(document.elementFromPoint(i,n),!0);s!==a&&(a=s,Re()),$e(t,o.options,s,e)}),10),_e=i,Be=n)}else{if(!this.options.bubbleScroll||vt(s,!0)===pt())return void Re();$e(t,this.options,vt(s,!1),!1)}}},W(t,{pluginName:"scroll",initializeByDefault:!0})}),ke.mount(He,ze);class Ue extends t.Modal{constructor(t,e){super(t),this.changelogContent="",this.changelogLoaded=!1,this.plugin=e}loadChangelog(){return e(this,void 0,void 0,(function*(){try{const e=yield t.request({url:"https://raw.githubusercontent.com/PKM-er/obsidian-editing-toolbar/master/CHANGELOG.md",method:"GET"});if(!e)throw new Error("无法获取 Changelog 内容");{const t=e.split("\n");let o="",i=[],n=!1;for(const e of t)if(e.startsWith("## ")&&!o)o=e.substring(3).trim(),n=!0,i.push(e);else{if(e.startsWith("## ")&&n)break;n&&i.push(e)}this.changelogContent=i.join("\n")}}catch(t){console.error("加载 Changelog 时出错:",t),this.changelogContent="### 无法加载更新说明\n\n请[点击此处查看最新更新说明](https://github.com/PKM-er/obsidian-editing-toolbar/blob/master/CHANGELOG.md)"}this.changelogLoaded=!0,this.updateChangelogDisplay()}))}updateChangelogDisplay(){this.changelogContainer&&this.changelogContentEl&&this.changelogLoaded&&(this.changelogContentEl.empty(),t.MarkdownRenderer.renderMarkdown(this.changelogContent,this.changelogContentEl,"",this.plugin))}fixCommandIds(){return e(this,void 0,void 0,(function*(){try{const e={"editor:toggle-numbered-list":"editing-toolbar:toggle-numbered-list","editor:toggle-bullet-list":"editing-toolbar:toggle-bullet-list","editor:toggle-highlight":"editing-toolbar:toggle-highlight","toggle-highlight":"editing-toolbar:toggle-highlight","editing-toolbar:editor:toggle-bold":"editing-toolbar:toggle-bold","editing-toolbar:editor:toggle-italics":"editing-toolbar:toggle-italics","editing-toolbar:editor:toggle-strikethrough":"editing-toolbar:toggle-strikethrough","editing-toolbar:editor:toggle-inline-math":"editing-toolbar:toggle-inline-math","editing-toolbar:editor:insert-callout":"editing-toolbar:insert-callout","editing-toolbar:editor:insert-link":"editing-toolbar:insert-link","cMenuToolbar-Divider-Line":"editingToolbar-Divider-Line"};let o=!1;const i=this.plugin.settings,n=t=>{t&&Array.isArray(t)&&t.forEach((t=>{t.id&&e[t.id]&&(t.id=e[t.id],o=!0),"editing-toolbar:format-eraser"===t.id&&(t.icon="eraser",o=!0),"editing-toolbar:change-font-color"===t.id&&(t.icon='<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" fill="currentColor"><g fill-rule="evenodd"><path id="change-font-color-icon" d="M3 18h18v3H3z" style="fill:#2DC26B"></path><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"></path></g></svg>',o=!0),t.SubmenuCommands&&n(t.SubmenuCommands)}))},s=t=>{if(!t||!Array.isArray(t))return!1;for(const e of t){if("editing-toolbar:toggle-format-brush"===e.id)return!0;if(e.SubmenuCommands){if(s(e.SubmenuCommands))return!0}}return!1},a=t=>{if(!t||!Array.isArray(t))return!1;if(!s(t)&&t.length>=2){const e={id:"editing-toolbar:toggle-format-brush",name:"Format Brush",icon:"paintbrush"};return t.splice(2,0,e),!0}return!1};i.menuCommands&&(n(i.menuCommands),a(i.menuCommands)&&(o=!0)),i.enableMultipleConfig&&(i.followingCommands&&(n(i.followingCommands),a(i.followingCommands)&&(o=!0)),i.topCommands&&(n(i.topCommands),a(i.topCommands)&&(o=!0)),i.fixedCommands&&(n(i.fixedCommands),a(i.fixedCommands)&&(o=!0)),i.mobileCommands&&(n(i.mobileCommands),a(i.mobileCommands)&&(o=!0))),o?(yield this.plugin.saveSettings(),new t.Notice(f("Command IDs have been successfully repaired!")),dispatchEvent(new Event("editingToolbar-NewCommand"))):new t.Notice(f("No command IDs need to be repaired"))}catch(e){console.error("修复命令ID时出错:",e),new t.Notice(f("Error repairing command IDs, please check the console for details"))}}))}reloadPlugin(t){return e(this,void 0,void 0,(function*(){const{plugins:e}=this.app;try{yield e.disablePlugin(t),yield e.enablePlugin(t)}catch(t){console.error(t)}}))}restoreDefaultSettings(){return e(this,void 0,void 0,(function*(){try{const e=this.plugin.settings.lastVersion,o=this.plugin.settings.customCommands;this.plugin.settings=Object.assign(Object.assign({},T),{lastVersion:e,customCommands:o}),yield this.plugin.saveSettings(),new t.Notice(f("Successfully restored default settings! (Custom commands preserved)")),this.reloadPlugin(this.plugin.manifest.id),this.close()}catch(e){console.error("恢复默认设置时出错:",e),new t.Notice(f("Error restoring default settings, please check the console for details"))}}))}onOpen(){const{contentEl:o}=this;o.createEl("h2",{text:this.plugin.manifest.version+"⚡Tips"}),o.createEl("p",{text:f("Notice:")});const i=o.createEl("ul");i.createEl("li",{text:f("⚠️This update is not compatible with 2.x version command ids, please click [Repair command] to be compatible")}),i.createEl("li",{text:f("⚠️If you want to restore the default settings, please click [Restore default settings]")}),this.changelogContainer=o.createDiv({cls:"changelog-container"}),this.changelogContainer.createEl("h3",{text:f("Latest Changes")}),this.changelogContentEl=this.changelogContainer.createDiv({cls:"changelog-content"}),this.changelogContentEl.setText(f("Loading changelog...")),setTimeout((()=>{this.loadChangelog()}),100),new t.Setting(o).setName(f("🔧Data repair")).setDesc(f("This update changed the ID of some commands, please click this button to repair the commands to ensure the toolbar works properly")).addButton((t=>t.setButtonText(f("Repair command ID")).onClick((()=>e(this,void 0,void 0,(function*(){yield this.fixCommandIds()})))))),new t.Setting(o).setName(f("🔄Restore default settings")).setDesc(f("This will reset all your custom configurations, but custom commands will be preserved")).addButton((t=>t.setButtonText(f("Restore default")).onClick((()=>e(this,void 0,void 0,(function*(){confirm(f("Are you sure you want to restore all settings to default? But custom commands will be preserved."))&&(yield this.restoreDefaultSettings())})))))),new t.Setting(o).setName(f("📋View full changelog")).setDesc(f("Open the complete changelog in your browser")).addButton((t=>t.setButtonText(f("Open changelog")).onClick((()=>{window.open("https://github.com/PKM-er/obsidian-editing-toolbar/blob/master/CHANGELOG.md","_blank")})))),new t.Setting(o).addButton((t=>t.setButtonText(f("Close")).onClick((()=>{this.close()})))),o.createEl("style",{text:"\n            .changelog-container {\n                margin-top: 20px;\n                margin-bottom: 20px;\n                padding: 10px;\n                border: 1px solid var(--background-modifier-border);\n                border-radius: 5px;\n                max-height: 200px;\n                overflow-y: auto;\n            }\n            .changelog-content {\n                padding: 0 10px;\n            }\n            .changelog-content a {\n                text-decoration: underline;\n            }\n            "})}onClose(){const{contentEl:t}=this;t.empty()}}function We(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}
/*! Pickr 1.8.4 MIT | https://github.com/Simonwep/pickr */
var je=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){self,t.exports=(()=>{var t={d:(e,o)=>{for(var i in o)t.o(o,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:o[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.d(e,{default:()=>D});var o={};function i(t,e,o,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e instanceof HTMLCollection||e instanceof NodeList?e=Array.from(e):Array.isArray(e)||(e=[e]),Array.isArray(o)||(o=[o]);for(const s of e)for(const e of o)s[t](e,i,{capture:!1,...n});return Array.prototype.slice.call(arguments,1)}t.r(o),t.d(o,{adjustableInputNumbers:()=>d,createElementFromString:()=>a,createFromTemplate:()=>r,eventPath:()=>l,off:()=>s,on:()=>n,resolveElement:()=>c});const n=i.bind(null,"addEventListener"),s=i.bind(null,"removeEventListener");function a(t){const e=document.createElement("div");return e.innerHTML=t.trim(),e.firstElementChild}function r(t){const e=(t,e)=>{const o=t.getAttribute(e);return t.removeAttribute(e),o},o=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e(t,":obj"),s=e(t,":ref"),a=n?i[n]={}:i;s&&(i[s]=t);for(const i of Array.from(t.children)){const t=e(i,":arr"),n=o(i,t?{}:a);t&&(a[t]||(a[t]=[])).push(Object.keys(n).length?n:i)}return i};return o(a(t))}function l(t){let e=t.path||t.composedPath&&t.composedPath();if(e)return e;let o=t.target.parentElement;for(e=[t.target,o];o=o.parentElement;)e.push(o);return e.push(document,window),e}function c(t){return t instanceof Element?t:"string"==typeof t?t.split(/>>/g).reduce(((t,e,o,i)=>(t=t.querySelector(e),o<i.length-1?t.shadowRoot:t)),document):null}function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>t;function o(o){const i=[.001,.01,.1][Number(o.shiftKey||2*o.ctrlKey)]*(o.deltaY<0?1:-1);let n=0,s=t.selectionStart;t.value=t.value.replace(/[\d.]+/g,((t,o)=>o<=s&&o+t.length>=s?(s=o,e(Number(t),i,n)):(n++,t))),t.focus(),t.setSelectionRange(s,s),o.preventDefault(),t.dispatchEvent(new Event("input"))}n(t,"focus",(()=>n(window,"wheel",o,{passive:!1}))),n(t,"blur",(()=>s(window,"wheel",o)))}const{min:u,max:p,floor:m,round:h}=Math;function g(t,e,o){e/=100,o/=100;const i=m(t=t/360*6),n=t-i,s=o*(1-e),a=o*(1-n*e),r=o*(1-(1-n)*e),l=i%6;return[255*[o,a,s,s,r,o][l],255*[r,o,o,a,s,s][l],255*[s,s,r,o,o,a][l]]}function f(t,e,o){return g(t,e,o).map((t=>h(t).toString(16).padStart(2,"0")))}function b(t,e,o){const i=g(t,e,o),n=i[0]/255,s=i[1]/255,a=i[2]/255,r=u(1-n,1-s,1-a);return[100*(1===r?0:(1-n-r)/(1-r)),100*(1===r?0:(1-s-r)/(1-r)),100*(1===r?0:(1-a-r)/(1-r)),100*r]}function y(t,e,o){const i=(2-(e/=100))*(o/=100)/2;return 0!==i&&(e=1===i?0:i<.5?e*o/(2*i):e*o/(2-2*i)),[t,100*e,100*i]}function v(t,e,o){const i=u(t/=255,e/=255,o/=255),n=p(t,e,o),s=n-i;let a,r;if(0===s)a=r=0;else{r=s/n;const i=((n-t)/6+s/2)/s,l=((n-e)/6+s/2)/s,c=((n-o)/6+s/2)/s;t===n?a=c-l:e===n?a=1/3+i-c:o===n&&(a=2/3+l-i),a<0?a+=1:a>1&&(a-=1)}return[360*a,100*r,100*n]}function C(t,e,o,i){return e/=100,o/=100,[...v(255*(1-u(1,(t/=100)*(1-(i/=100))+i)),255*(1-u(1,e*(1-i)+i)),255*(1-u(1,o*(1-i)+i)))]}function w(t,e,o){e/=100;const i=2*(e*=(o/=100)<.5?o:1-o)/(o+e)*100,n=100*(o+e);return[t,isNaN(i)?0:i,n]}function x(t){return v(...t.match(/.{2}/g).map((t=>parseInt(t,16))))}function k(t){t=t.match(/^[a-zA-Z]+$/)?function(t){if("black"===t.toLowerCase())return"#000";const e=document.createElement("canvas").getContext("2d");return e.fillStyle=t,"#000"===e.fillStyle?null:e.fillStyle}(t):t;const e={cmyk:/^cmyk[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)/i,rgba:/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsla:/^((hsla)|hsl)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsva:/^((hsva)|hsv)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},o=t=>t.map((t=>/^(|\d+)\.\d+|\d+$/.test(t)?Number(t):void 0));let i;t:for(const n in e){if(!(i=e[n].exec(t)))continue;const s=t=>!!i[2]==("number"==typeof t);switch(n){case"cmyk":{const[,t,e,s,a]=o(i);if(t>100||e>100||s>100||a>100)break t;return{values:C(t,e,s,a),type:n}}case"rgba":{const[,,,t,e,a,r]=o(i);if(t>255||e>255||a>255||r<0||r>1||!s(r))break t;return{values:[...v(t,e,a),r],a:r,type:n}}case"hexa":{let[,t]=i;4!==t.length&&3!==t.length||(t=t.split("").map((t=>t+t)).join(""));const e=t.substring(0,6);let o=t.substring(6);return o=o?parseInt(o,16)/255:void 0,{values:[...x(e),o],a:o,type:n}}case"hsla":{const[,,,t,e,a,r]=o(i);if(t>360||e>100||a>100||r<0||r>1||!s(r))break t;return{values:[...w(t,e,a),r],a:r,type:n}}case"hsva":{const[,,,t,e,a,r]=o(i);if(t>360||e>100||a>100||r<0||r>1||!s(r))break t;return{values:[t,e,a,r],a:r,type:n}}}}return{values:null,type:null}}function S(){const t=(t,e)=>function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return e(~o?t.map((t=>Number(t.toFixed(o)))):t)},e={h:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,v:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a:arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,toHSVA(){const o=[e.h,e.s,e.v,e.a];return o.toString=t(o,(t=>`hsva(${t[0]}, ${t[1]}%, ${t[2]}%, ${e.a})`)),o},toHSLA(){const o=[...y(e.h,e.s,e.v),e.a];return o.toString=t(o,(t=>`hsla(${t[0]}, ${t[1]}%, ${t[2]}%, ${e.a})`)),o},toRGBA(){const o=[...g(e.h,e.s,e.v),e.a];return o.toString=t(o,(t=>`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${e.a})`)),o},toCMYK(){const o=b(e.h,e.s,e.v);return o.toString=t(o,(t=>`cmyk(${t[0]}%, ${t[1]}%, ${t[2]}%, ${t[3]}%)`)),o},toHEXA(){const t=f(e.h,e.s,e.v),o=e.a>=1?"":Number((255*e.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return o&&t.push(o),t.toString=()=>`#${t.join("").toUpperCase()}`,t},clone:()=>S(e.h,e.s,e.v,e.a)};return e}const T=t=>Math.max(Math.min(t,1),0);function E(t){const e={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},t),_keyboard(t){const{options:o}=e,{type:i,key:n}=t;if(document.activeElement===o.wrapper){const{lock:o}=e.options,s="ArrowUp"===n,a="ArrowRight"===n,r="ArrowDown"===n,l="ArrowLeft"===n;if("keydown"===i&&(s||a||r||l)){let i=0,n=0;"v"===o?i=s||a?1:-1:"h"===o?i=s||a?-1:1:(n=s?-1:r?1:0,i=l?-1:a?1:0),e.update(T(e.cache.x+.01*i),T(e.cache.y+.01*n)),t.preventDefault()}else n.startsWith("Arrow")&&(e.options.onstop(),t.preventDefault())}},_tapstart(t){n(document,["mouseup","touchend","touchcancel"],e._tapstop),n(document,["mousemove","touchmove"],e._tapmove),t.cancelable&&t.preventDefault(),e._tapmove(t)},_tapmove(t){const{options:o,cache:i}=e,{lock:n,element:s,wrapper:a}=o,r=a.getBoundingClientRect();let l=0,c=0;if(t){const e=t&&t.touches&&t.touches[0];l=t?(e||t).clientX:0,c=t?(e||t).clientY:0,l<r.left?l=r.left:l>r.left+r.width&&(l=r.left+r.width),c<r.top?c=r.top:c>r.top+r.height&&(c=r.top+r.height),l-=r.left,c-=r.top}else i&&(l=i.x*r.width,c=i.y*r.height);"h"!==n&&(s.style.left=`calc(${l/r.width*100}% - ${s.offsetWidth/2}px)`),"v"!==n&&(s.style.top=`calc(${c/r.height*100}% - ${s.offsetHeight/2}px)`),e.cache={x:l/r.width,y:c/r.height};const d=T(l/r.width),u=T(c/r.height);switch(n){case"v":return o.onchange(d);case"h":return o.onchange(u);default:return o.onchange(d,u)}},_tapstop(){e.options.onstop(),s(document,["mouseup","touchend","touchcancel"],e._tapstop),s(document,["mousemove","touchmove"],e._tapmove)},trigger(){e._tapmove()},update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{left:i,top:n,width:s,height:a}=e.options.wrapper.getBoundingClientRect();"h"===e.options.lock&&(o=t),e._tapmove({clientX:i+s*t,clientY:n+a*o})},destroy(){const{options:t,_tapstart:o,_keyboard:i}=e;s(document,["keydown","keyup"],i),s([t.wrapper,t.element],"mousedown",o),s([t.wrapper,t.element],"touchstart",o,{passive:!1})}},{options:o,_tapstart:i,_keyboard:a}=e;return n([o.wrapper,o.element],"mousedown",i),n([o.wrapper,o.element],"touchstart",i,{passive:!1}),n(document,["keydown","keyup"],a),e}function M(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({onchange:()=>0,className:"",elements:[]},t);const e=n(t.elements,"click",(e=>{t.elements.forEach((o=>o.classList[e.target===o?"add":"remove"](t.className))),t.onchange(e),e.stopPropagation()}));return{destroy:()=>s(...e)}}const I={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8},q=(t,e,o)=>{const{container:i,margin:n,position:s,variantFlipOrder:a,positionFlipOrder:r}={container:document.documentElement.getBoundingClientRect(),...I,...o},{left:l,top:c}=e.style;e.style.left="0",e.style.top="0";const d=t.getBoundingClientRect(),u=e.getBoundingClientRect(),p={t:d.top-u.height-n,b:d.bottom+n,r:d.right+n,l:d.left-u.width-n},m={vs:d.left,vm:d.left+d.width/2+-u.width/2,ve:d.left+d.width-u.width,hs:d.top,hm:d.bottom-d.height/2-u.height/2,he:d.bottom-u.height},[h,g="middle"]=s.split("-"),f=r[h],b=a[g],{top:y,left:v,bottom:C,right:w}=i;for(const t of f){const o="t"===t||"b"===t,i=p[t],[n,s]=o?["top","left"]:["left","top"],[a,r]=o?[u.height,u.width]:[u.width,u.height],[l,c]=o?[C,w]:[w,C],[d,h]=o?[y,v]:[v,y];if(!(i<d||i+a>l))for(const a of b){const l=m[(o?"v":"h")+a];if(!(l<h||l+r>c))return e.style[s]=l-u[s]+"px",e.style[n]=i-u[n]+"px",t+a}}return e.style.left=l,e.style.top=c,null};function A(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class D{constructor(t){A(this,"_initializingActive",!0),A(this,"_recalc",!0),A(this,"_nanopop",null),A(this,"_root",null),A(this,"_color",S()),A(this,"_lastColor",S()),A(this,"_swatchColors",[]),A(this,"_setupAnimationFrame",null),A(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]}),this.options=t=Object.assign({...D.DEFAULT_OPTIONS},t);const{swatches:e,components:o,theme:i,sliders:n,lockOpacity:s,padding:a}=t;["nano","monolith"].includes(i)&&!n&&(t.sliders="h"),o.interaction||(o.interaction={});const{preview:r,opacity:l,hue:c,palette:d}=o;o.opacity=!s&&l,o.palette=d||r||l||c,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),e&&e.length&&e.forEach((t=>this.addSwatch(t)));const{button:u,app:p}=this._root;this._nanopop=((t,e,o)=>{const i="object"!=typeof t||t instanceof HTMLElement?{reference:t,popper:e,...o}:t;return{update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;const{reference:e,popper:o}=Object.assign(i,t);if(!o||!e)throw new Error("Popper- or reference-element missing.");return q(e,o,i)}}})(u,p,{margin:a}),u.setAttribute("role","button"),u.setAttribute("aria-label",this._t("btn:toggle"));const m=this;this._setupAnimationFrame=requestAnimationFrame((function e(){if(!p.offsetWidth)return m._setupAnimationFrame=requestAnimationFrame(e);m.setColor(t.default),m._rePositioningPicker(),t.defaultRepresentation&&(m._representation=t.defaultRepresentation,m.setColorRepresentation(m._representation)),t.showAlways&&m.show(),m._initializingActive=!1,m._emit("init")}))}_preBuild(){const{options:t}=this;for(const e of["el","container"])t[e]=c(t[e]);this._root=(t=>{const{components:e,useAsButton:o,inline:i,appClass:n,theme:s,lockOpacity:a}=t.options,l=t=>t?"":'style="display:none" hidden',c=e=>t._t(e),d=r(`\n      <div :ref="root" class="pickr">\n\n        ${o?"":'<button type="button" :ref="button" class="pcr-button"></button>'}\n\n        <div :ref="app" class="pcr-app ${n||""}" data-theme="${s}" ${i?'style="position: unset"':""} aria-label="${c("ui:dialog")}" role="window">\n          <div class="pcr-selection" ${l(e.palette)}>\n            <div :obj="preview" class="pcr-color-preview" ${l(e.preview)}>\n              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${c("btn:last-color")}"></button>\n              <div :ref="currentColor" class="pcr-current-color"></div>\n            </div>\n\n            <div :obj="palette" class="pcr-color-palette">\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${c("aria:palette")}" role="listbox"></div>\n            </div>\n\n            <div :obj="hue" class="pcr-color-chooser" ${l(e.hue)}>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${c("aria:hue")}" role="slider"></div>\n            </div>\n\n            <div :obj="opacity" class="pcr-color-opacity" ${l(e.opacity)}>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${c("aria:opacity")}" role="slider"></div>\n            </div>\n          </div>\n\n          <div class="pcr-swatches ${e.palette?"":"pcr-last"}" :ref="swatches"></div>\n\n          <div :obj="interaction" class="pcr-interaction" ${l(Object.keys(e.interaction).length)}>\n            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${l(e.interaction.input)} aria-label="${c("aria:input")}">\n\n            <input :arr="options" class="pcr-type" data-type="HEXA" value="${a?"HEX":"HEXA"}" type="button" ${l(e.interaction.hex)}>\n            <input :arr="options" class="pcr-type" data-type="RGBA" value="${a?"RGB":"RGBA"}" type="button" ${l(e.interaction.rgba)}>\n            <input :arr="options" class="pcr-type" data-type="HSLA" value="${a?"HSL":"HSLA"}" type="button" ${l(e.interaction.hsla)}>\n            <input :arr="options" class="pcr-type" data-type="HSVA" value="${a?"HSV":"HSVA"}" type="button" ${l(e.interaction.hsva)}>\n            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${l(e.interaction.cmyk)}>\n\n            <input :ref="save" class="pcr-save" value="${c("btn:save")}" type="button" ${l(e.interaction.save)} aria-label="${c("aria:btn:save")}">\n            <input :ref="cancel" class="pcr-cancel" value="${c("btn:cancel")}" type="button" ${l(e.interaction.cancel)} aria-label="${c("aria:btn:cancel")}">\n            <input :ref="clear" class="pcr-clear" value="${c("btn:clear")}" type="button" ${l(e.interaction.clear)} aria-label="${c("aria:btn:clear")}">\n          </div>\n        </div>\n      </div>\n    `),u=d.interaction;return u.options.find((t=>!t.hidden&&!t.classList.add("active"))),u.type=()=>u.options.find((t=>t.classList.contains("active"))),d})(this),t.useAsButton&&(this._root.button=t.el),t.container.appendChild(this._root.root)}_finalBuild(){const t=this.options,e=this._root;if(t.container.removeChild(e.root),t.inline){const o=t.el.parentElement;t.el.nextSibling?o.insertBefore(e.app,t.el.nextSibling):o.appendChild(e.app)}else t.container.appendChild(e.app);t.useAsButton?t.inline&&t.el.remove():t.el.parentNode.replaceChild(e.root,t.el),t.disabled&&this.disable(),t.comparison||(e.button.style.transition="none",t.useAsButton||(e.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const t=this,e=this.options.components,o=(t.options.sliders||"v").repeat(2),[i,n]=o.match(/^[vh]+$/g)?o:[],s=()=>this._color||(this._color=this._lastColor.clone()),a={palette:E({element:t._root.palette.picker,wrapper:t._root.palette.palette,onstop:()=>t._emit("changestop","slider",t),onchange(o,i){if(!e.palette)return;const n=s(),{_root:a,options:r}=t,{lastColor:l,currentColor:c}=a.preview;t._recalc&&(n.s=100*o,n.v=100-100*i,n.v<0&&(n.v=0),t._updateOutput("slider"));const d=n.toRGBA().toString(0);this.element.style.background=d,this.wrapper.style.background=`\n                        linear-gradient(to top, rgba(0, 0, 0, ${n.a}), transparent),\n                        linear-gradient(to left, hsla(${n.h}, 100%, 50%, ${n.a}), rgba(255, 255, 255, ${n.a}))\n                    `,r.comparison?r.useAsButton||t._lastColor||l.style.setProperty("--pcr-color",d):(a.button.style.setProperty("--pcr-color",d),a.button.classList.remove("clear"));const u=n.toHEXA().toString();for(const{el:e,color:o}of t._swatchColors)e.classList[u===o.toHEXA().toString()?"add":"remove"]("pcr-active");c.style.setProperty("--pcr-color",d)}}),hue:E({lock:"v"===n?"h":"v",element:t._root.hue.picker,wrapper:t._root.hue.slider,onstop:()=>t._emit("changestop","slider",t),onchange(o){if(!e.hue||!e.palette)return;const i=s();t._recalc&&(i.h=360*o),this.element.style.backgroundColor=`hsl(${i.h}, 100%, 50%)`,a.palette.trigger()}}),opacity:E({lock:"v"===i?"h":"v",element:t._root.opacity.picker,wrapper:t._root.opacity.slider,onstop:()=>t._emit("changestop","slider",t),onchange(o){if(!e.opacity||!e.palette)return;const i=s();t._recalc&&(i.a=Math.round(100*o)/100),this.element.style.background=`rgba(0, 0, 0, ${i.a})`,a.palette.trigger()}}),selectable:M({elements:t._root.interaction.options,className:"active",onchange(e){t._representation=e.target.getAttribute("data-type").toUpperCase(),t._recalc&&t._updateOutput("swatch")}})};this._components=a}_bindEvents(){const{_root:t,options:e}=this,o=[n(t.interaction.clear,"click",(()=>this._clearColor())),n([t.interaction.cancel,t.preview.lastColor],"click",(()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")})),n(t.interaction.save,"click",(()=>{!this.applyColor()&&!e.showAlways&&this.hide()})),n(t.interaction.result,["keyup","input"],(t=>{this.setColor(t.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),t.stopImmediatePropagation()})),n(t.interaction.result,["focus","blur"],(t=>{this._recalc="blur"===t.type,this._recalc&&this._updateOutput(null)})),n([t.palette.palette,t.palette.picker,t.hue.slider,t.hue.picker,t.opacity.slider,t.opacity.picker],["mousedown","touchstart"],(()=>this._recalc=!0),{passive:!0})];if(!e.showAlways){const i=e.closeWithKey;o.push(n(t.button,"click",(()=>this.isOpen()?this.hide():this.show())),n(document,"keyup",(t=>this.isOpen()&&(t.key===i||t.code===i)&&this.hide())),n(document,["touchstart","mousedown"],(e=>{this.isOpen()&&!l(e).some((e=>e===t.app||e===t.button))&&this.hide()}),{capture:!0}))}if(e.adjustableNumbers){const e={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};d(t.interaction.result,((t,o,i)=>{const n=e[this.getColorRepresentation().toLowerCase()];if(n){const e=n[i],s=t+(e>=100?1e3*o:o);return s<=0?0:Number((s<e?s:e).toPrecision(3))}return t}))}if(e.autoReposition&&!e.inline){let t=null;const i=this;o.push(n(window,["scroll","resize"],(()=>{i.isOpen()&&(e.closeOnScroll&&i.hide(),null===t?(t=setTimeout((()=>t=null),100),requestAnimationFrame((function e(){i._rePositioningPicker(),null!==t&&requestAnimationFrame(e)}))):(clearTimeout(t),t=setTimeout((()=>t=null),100)))}),{capture:!0}))}this._eventBindings=o}_rePositioningPicker(){const{options:t}=this;if(!t.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:t.position})){const t=this._root.app,e=t.getBoundingClientRect();t.style.top=(window.innerHeight-e.height)/2+"px",t.style.left=(window.innerWidth-e.width)/2+"px"}}_updateOutput(t){const{_root:e,_color:o,options:i}=this;if(e.interaction.type()){const t=`to${e.interaction.type().getAttribute("data-type")}`;e.interaction.result.value="function"==typeof o[t]?o[t]().toString(i.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",o,t,this)}_clearColor(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{_root:e,options:o}=this;o.useAsButton||e.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),e.button.classList.add("clear"),o.showAlways||this.hide(),this._lastColor=null,this._initializingActive||t||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(t){const{values:e,type:o,a:i}=k(t),{lockOpacity:n}=this.options,s=void 0!==i&&1!==i;return e&&3===e.length&&(e[3]=void 0),{values:!e||n&&s?null:e,type:o}}_t(t){return this.options.i18n[t]||D.I18N_DEFAULTS[t]}_emit(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];this._eventListener[t].forEach((t=>t(...o,this)))}on(t,e){return this._eventListener[t].push(e),this}off(t,e){const o=this._eventListener[t]||[],i=o.indexOf(e);return~i&&o.splice(i,1),this}addSwatch(t){const{values:e}=this._parseLocalColor(t);if(e){const{_swatchColors:t,_root:o}=this,i=S(...e),s=a(`<button type="button" style="--pcr-color: ${i.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return o.swatches.appendChild(s),t.push({el:s,color:i}),this._eventBindings.push(n(s,"click",(()=>{this.setHSVA(...i.toHSVA(),!0),this._emit("swatchselect",i),this._emit("change",i,"swatch",this)}))),!0}return!1}removeSwatch(t){const e=this._swatchColors[t];if(e){const{el:o}=e;return this._root.swatches.removeChild(o),this._swatchColors.splice(t,1),!0}return!1}applyColor(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{preview:e,button:o}=this._root,i=this._color.toRGBA().toString(0);return e.lastColor.style.setProperty("--pcr-color",i),this.options.useAsButton||o.style.setProperty("--pcr-color",i),o.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||t||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach((t=>s(...t))),Object.keys(this._components).forEach((t=>this._components[t].destroy()))}destroyAndRemove(){this.destroy();const{root:t,app:e}=this._root;t.parentElement&&t.parentElement.removeChild(t),e.parentElement.removeChild(e),Object.keys(this).forEach((t=>this[t]=null))}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:360,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=this._recalc;if(this._recalc=!1,t<0||t>360||e<0||e>100||o<0||o>100||i<0||i>1)return!1;this._color=S(t,e,o,i);const{hue:a,opacity:r,palette:l}=this._components;return a.update(t/360),r.update(i),l.update(e/100,1-o/100),n||this.applyColor(),s&&this._updateOutput(),this._recalc=s,!0}setColor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===t)return this._clearColor(e),!0;const{values:o,type:i}=this._parseLocalColor(t);if(o){const t=i.toUpperCase(),{options:n}=this._root.interaction,s=n.find((e=>e.getAttribute("data-type")===t));if(s&&!s.hidden)for(const t of n)t.classList[t===s?"add":"remove"]("active");return!!this.setHSVA(...o,e)&&this.setColorRepresentation(t)}return!1}setColorRepresentation(t){return t=t.toUpperCase(),!!this._root.interaction.options.find((e=>e.getAttribute("data-type").startsWith(t)&&!e.click()))}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}return A(D,"utils",o),A(D,"version","1.8.4"),A(D,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),A(D,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),A(D,"create",(t=>new D(t))),e.default})()})),Ze=We(je),Ye=[],Ge=[];!function(t,e){if(t&&"undefined"!=typeof document){var o,i=!0===e.prepend?"prepend":"append",n=!0===e.singleTag,s="string"==typeof e.container?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(n){var a=Ye.indexOf(s);-1===a&&(a=Ye.push(s)-1,Ge[a]={}),o=Ge[a]&&Ge[a][i]?Ge[a][i]:Ge[a][i]=r()}else o=r();65279===t.charCodeAt(0)&&(t=t.substring(1)),o.styleSheet?o.styleSheet.cssText+=t:o.appendChild(document.createTextNode(t))}function r(){var t=document.createElement("style");if(t.setAttribute("type","text/css"),e.attributes)for(var o=Object.keys(e.attributes),n=0;n<o.length;n++)t.setAttribute(o[n],e.attributes[o[n]]);var a="prepend"===i?"afterbegin":"beforeend";return s.insertAdjacentElement(a,t),t}}('/*! Pickr 1.8.4 MIT | https://github.com/Simonwep/pickr */\n.pickr{position:relative;overflow:visible;transform:translateY(0)}.pickr *{box-sizing:border-box;outline:none;border:none;-webkit-appearance:none}.pickr .pcr-button{position:relative;height:2em;width:2em;padding:0.5em;cursor:pointer;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Helvetica Neue",Arial,sans-serif;border-radius:.15em;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" stroke="%2342445A" stroke-width="5px" stroke-linecap="round"><path d="M45,45L5,5"></path><path d="M45,5L5,45"></path></svg>\') no-repeat center;background-size:0;transition:all 0.3s}.pickr .pcr-button::before{position:absolute;content:\'\';top:0;left:0;width:100%;height:100%;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:.5em;border-radius:.15em;z-index:-1}.pickr .pcr-button::before{z-index:initial}.pickr .pcr-button::after{position:absolute;content:\'\';top:0;left:0;height:100%;width:100%;transition:background 0.3s;background:var(--pcr-color);border-radius:.15em}.pickr .pcr-button.clear{background-size:70%}.pickr .pcr-button.clear::before{opacity:0}.pickr .pcr-button.clear:focus{box-shadow:0 0 0 1px rgba(255,255,255,0.85),0 0 0 3px var(--pcr-color)}.pickr .pcr-button.disabled{cursor:not-allowed}.pickr *,.pcr-app *{box-sizing:border-box;outline:none;border:none;-webkit-appearance:none}.pickr input:focus,.pickr input.pcr-active,.pickr button:focus,.pickr button.pcr-active,.pcr-app input:focus,.pcr-app input.pcr-active,.pcr-app button:focus,.pcr-app button.pcr-active{box-shadow:0 0 0 1px rgba(255,255,255,0.85),0 0 0 3px var(--pcr-color)}.pickr .pcr-palette,.pickr .pcr-slider,.pcr-app .pcr-palette,.pcr-app .pcr-slider{transition:box-shadow 0.3s}.pickr .pcr-palette:focus,.pickr .pcr-slider:focus,.pcr-app .pcr-palette:focus,.pcr-app .pcr-slider:focus{box-shadow:0 0 0 1px rgba(255,255,255,0.85),0 0 0 3px rgba(0,0,0,0.25)}.pcr-app{position:fixed;display:flex;flex-direction:column;z-index:10000;border-radius:0.1em;background:#fff;opacity:0;visibility:hidden;transition:opacity 0.3s, visibility 0s 0.3s;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Helvetica Neue",Arial,sans-serif;box-shadow:0 0.15em 1.5em 0 rgba(0,0,0,0.1),0 0 1em 0 rgba(0,0,0,0.03);left:0;top:0}.pcr-app.visible{transition:opacity 0.3s;visibility:visible;opacity:1}.pcr-app .pcr-swatches{display:flex;flex-wrap:wrap;margin-top:0.75em}.pcr-app .pcr-swatches.pcr-last{margin:0}@supports (display: grid){.pcr-app .pcr-swatches{display:grid;align-items:center;grid-template-columns:repeat(auto-fit, 1.75em)}}.pcr-app .pcr-swatches>button{font-size:1em;position:relative;width:calc(1.75em - 5px);height:calc(1.75em - 5px);border-radius:0.15em;cursor:pointer;margin:2.5px;flex-shrink:0;justify-self:center;transition:all 0.15s;overflow:hidden;background:transparent;z-index:1}.pcr-app .pcr-swatches>button::before{position:absolute;content:\'\';top:0;left:0;width:100%;height:100%;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:6px;border-radius:.15em;z-index:-1}.pcr-app .pcr-swatches>button::after{content:\'\';position:absolute;top:0;left:0;width:100%;height:100%;background:var(--pcr-color);border:1px solid rgba(0,0,0,0.05);border-radius:0.15em;box-sizing:border-box}.pcr-app .pcr-swatches>button:hover{filter:brightness(1.05)}.pcr-app .pcr-swatches>button:not(.pcr-active){box-shadow:none}.pcr-app .pcr-interaction{display:flex;flex-wrap:wrap;align-items:center;margin:0 -0.2em 0 -0.2em}.pcr-app .pcr-interaction>*{margin:0 0.2em}.pcr-app .pcr-interaction input{letter-spacing:0.07em;font-size:0.75em;text-align:center;cursor:pointer;color:#75797e;background:#f1f3f4;border-radius:.15em;transition:all 0.15s;padding:0.45em 0.5em;margin-top:0.75em}.pcr-app .pcr-interaction input:hover{filter:brightness(0.975)}.pcr-app .pcr-interaction input:focus{box-shadow:0 0 0 1px rgba(255,255,255,0.85),0 0 0 3px rgba(66,133,244,0.75)}.pcr-app .pcr-interaction .pcr-result{color:#75797e;text-align:left;flex:1 1 8em;min-width:8em;transition:all 0.2s;border-radius:.15em;background:#f1f3f4;cursor:text}.pcr-app .pcr-interaction .pcr-result::-moz-selection{background:#4285f4;color:#fff}.pcr-app .pcr-interaction .pcr-result::selection{background:#4285f4;color:#fff}.pcr-app .pcr-interaction .pcr-type.active{color:#fff;background:#4285f4}.pcr-app .pcr-interaction .pcr-save,.pcr-app .pcr-interaction .pcr-cancel,.pcr-app .pcr-interaction .pcr-clear{color:#fff;width:auto}.pcr-app .pcr-interaction .pcr-save,.pcr-app .pcr-interaction .pcr-cancel,.pcr-app .pcr-interaction .pcr-clear{color:#fff}.pcr-app .pcr-interaction .pcr-save:hover,.pcr-app .pcr-interaction .pcr-cancel:hover,.pcr-app .pcr-interaction .pcr-clear:hover{filter:brightness(0.925)}.pcr-app .pcr-interaction .pcr-save{background:#4285f4}.pcr-app .pcr-interaction .pcr-clear,.pcr-app .pcr-interaction .pcr-cancel{background:#f44250}.pcr-app .pcr-interaction .pcr-clear:focus,.pcr-app .pcr-interaction .pcr-cancel:focus{box-shadow:0 0 0 1px rgba(255,255,255,0.85),0 0 0 3px rgba(244,66,80,0.75)}.pcr-app .pcr-selection .pcr-picker{position:absolute;height:18px;width:18px;border:2px solid #fff;border-radius:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pcr-app .pcr-selection .pcr-color-palette,.pcr-app .pcr-selection .pcr-color-chooser,.pcr-app .pcr-selection .pcr-color-opacity{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column;cursor:grab;cursor:-webkit-grab}.pcr-app .pcr-selection .pcr-color-palette:active,.pcr-app .pcr-selection .pcr-color-chooser:active,.pcr-app .pcr-selection .pcr-color-opacity:active{cursor:grabbing;cursor:-webkit-grabbing}.pcr-app[data-theme=\'nano\']{width:14.25em;max-width:95vw}.pcr-app[data-theme=\'nano\'] .pcr-swatches{margin-top:.6em;padding:0 .6em}.pcr-app[data-theme=\'nano\'] .pcr-interaction{padding:0 .6em .6em .6em}.pcr-app[data-theme=\'nano\'] .pcr-selection{display:grid;grid-gap:.6em;grid-template-columns:1fr 4fr;grid-template-rows:5fr auto auto;align-items:center;height:10.5em;width:100%;align-self:flex-start}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-preview{grid-area:2 / 1 / 4 / 1;height:100%;width:100%;display:flex;flex-direction:row;justify-content:center;margin-left:.6em}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-preview .pcr-last-color{display:none}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-preview .pcr-current-color{position:relative;background:var(--pcr-color);width:2em;height:2em;border-radius:50em;overflow:hidden}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-preview .pcr-current-color::before{position:absolute;content:\'\';top:0;left:0;width:100%;height:100%;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:.5em;border-radius:.15em;z-index:-1}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-palette{grid-area:1 / 1 / 2 / 3;width:100%;height:100%;z-index:1}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-palette .pcr-palette{border-radius:.15em;width:100%;height:100%}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-palette .pcr-palette::before{position:absolute;content:\'\';top:0;left:0;width:100%;height:100%;background:url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:.5em;border-radius:.15em;z-index:-1}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-chooser{grid-area:2 / 2 / 2 / 2}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-opacity{grid-area:3 / 2 / 3 / 2}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-chooser,.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-opacity{height:0.5em;margin:0 .6em}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-chooser .pcr-picker,.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-opacity .pcr-picker{top:50%;transform:translateY(-50%)}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-chooser .pcr-slider,.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-opacity .pcr-slider{flex-grow:1;border-radius:50em}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-chooser .pcr-slider{background:linear-gradient(to right, red, #ff0, lime, cyan, blue, #f0f, red)}.pcr-app[data-theme=\'nano\'] .pcr-selection .pcr-color-opacity .pcr-slider{background:linear-gradient(to right, transparent, black),url(\'data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>\');background-size:100%, 0.25em}\n\n',{});class Xe extends t.Modal{constructor(t,e,o){if(super(t),this.plugin=e,this.commandIndex=o,null!==o){const t=e.settings.customCommands[o];this.commandId=t.id,this.commandName=t.name,this.icon=t.icon||"",this.regexPattern=t.regexPattern||"",this.regexReplacement=t.regexReplacement||"",this.regexCaseInsensitive=t.regexCaseInsensitive||!1,this.regexGlobal=!1!==t.regexGlobal,this.regexMultiline=t.regexMultiline||!1,this.useCondition=t.useCondition||!1,this.conditionPattern=t.conditionPattern||""}else this.commandId="",this.commandName="",this.icon="",this.regexPattern="",this.regexReplacement="",this.regexCaseInsensitive=!1,this.regexGlobal=!0,this.regexMultiline=!1,this.useCondition=!1,this.conditionPattern=""}onOpen(){const{contentEl:e}=this;this.modalEl.addClass("custom-commands-modal"),e.empty(),e.createEl("h2",{text:null!==this.commandIndex?f("Edit regular expression command"):f("Add regular expression command")});const o=e.createDiv("basic-settings-container");new t.Setting(o).setName(f("Command ID")).setDesc(f('Unique identifier, no spaces, e.g.: "my-custom-format"')).addText((t=>(t.setValue(this.commandId),null!==this.commandIndex?(t.setDisabled(!0),t.inputEl.addClass("id-is-disabled")):t.onChange((t=>{this.commandId=t;const o=e.querySelector(".setting-item:nth-child(2) input");o instanceof HTMLInputElement&&(o.value=t,this.commandName=t)})),t))),new t.Setting(o).setName(f("Command Name")).setDesc(f("Displayed name in toolbar and menu")).addText((t=>t.setValue(this.commandName).onChange((t=>this.commandName=t))));const i=e.createDiv("regex-settings");i.style.border="1px solid var(--background-modifier-border)",i.style.padding="10px",i.style.borderRadius="5px",i.style.marginBottom="10px";const n=i.createEl("details",{cls:"ai-help-container"});n.style.marginBottom="10px",n.style.borderRadius="5px",n.style.overflow="hidden";const s=n.createEl("summary",{text:f("How to use AI to get regular expressions?")});s.style.padding="8px 12px",s.style.backgroundColor="var(--background-secondary)",s.style.cursor="pointer",s.style.fontWeight="bold",s.style.borderRadius="4px",s.style.userSelect="none";const a=n.createDiv("ai-help-content");a.style.padding="6px",a.style.backgroundColor="var(--background-secondary-alt)",a.style.borderBottomLeftRadius="5px",a.style.borderBottomRightRadius="5px",a.style.marginTop="1px",a.setAttribute("contenteditable","false"),a.style.userSelect="text",a.innerHTML=`\n      <p><strong>${f("AI question template:")}</strong><br>\n    ${f("[Description]")}:\n      ${f("I need to convert the url to a markdown format link")}\n    <br>\n    ${f("[Example]")}: \n      ${f("For example, convert https://example.com to [https://example.com](https://example.com)")}\n    <br>\n    ${f("[Requirements]")}:  \n      ${f("Use js regular expression to implement, and output the parameters in the following format (the result does not need to be escaped with json)")}\n    <br>\n    ${f("[Output]")}:\n    <br>\n      "name": "[Descriptive Name]", <br>\n      "pattern": "[Regex Pattern]", <br>\n      "replacement": "[Replacement Pattern, if applicable]", <br>\n      "flags": "[Regex Flags]" <br>\n    </p>\n    `,new t.Setting(i).setName(f("Matching pattern")).setDesc(f("Regex pattern to match")).addText((t=>this.regexPatternInput=t.setValue(this.regexPattern).onChange((t=>{this.regexPattern=t,this.updatePreview()})))),new t.Setting(i).setName(f("Replacement pattern")).setDesc(f("Replacement pattern (use $1, $2, etc. to reference capture groups)")).addText((t=>this.regexReplacementInput=t.setValue(this.regexReplacement).onChange((t=>{this.regexReplacement=t,this.updatePreview()}))));const r=i.createDiv("regex-options");r.style.display="flex",r.style.gap="8px",new t.Setting(r).setName(f("Ignore case")).setDesc(f("Match case-insensitive")).addToggle((t=>t.setValue(this.regexCaseInsensitive).onChange((t=>{this.regexCaseInsensitive=t,this.updatePreview()})))),new t.Setting(r).setName(f("Global replace")).setDesc(f("Replace all matches")).addToggle((t=>t.setValue(this.regexGlobal).onChange((t=>{this.regexGlobal=t,this.updatePreview()})))),new t.Setting(r).setName(f("Multiline mode")).setDesc(f("^ and $ match the start and end of each line")).addToggle((t=>this.regexMultilineToggle=t.setValue(this.regexMultiline).onChange((t=>{this.regexMultiline=t,this.updatePreview()}))));const l=i.createDiv("condition-container");new t.Setting(l).setName(f("Use condition")).setDesc(f("Only apply custom command when text matches the condition")).addToggle((t=>this.useConditionToggle=t.setValue(this.useCondition).onChange((t=>{this.useCondition=t,c.style.display=t?"block":"none"}))));const c=l.createDiv("condition-settings");c.style.display=this.useCondition?"block":"none",c.style.border="1px solid var(--background-modifier-border)",c.style.padding="10px",c.style.borderRadius="5px",c.style.marginBottom="15px",new t.Setting(c).setName(f("Condition pattern")).setDesc(f("Must exist regular expression or text")).addText((t=>this.conditionPatternInput=t.setValue(this.conditionPattern).onChange((t=>{this.conditionPattern=t}))));const d=new t.Setting(i).setName(f("Icon")).setDesc(f("Command icon (click to select)"));if(this.iconDisplay=d.controlEl.createDiv("editingToolbarSettingsIcon"),this.icon)try{t.setIcon(this.iconDisplay,this.icon)}catch(t){this.iconDisplay.setText(this.icon)}d.addButton((e=>e.setButtonText(f("Choose icon")).onClick((()=>{const e={id:this.commandId,name:this.commandName,icon:this.icon};new b(this.plugin,e,!1,(e=>{if(this.icon=e,this.iconDisplay.empty(),this.icon)try{t.setIcon(this.iconDisplay,this.icon)}catch(t){this.iconDisplay.setText(this.icon)}const o=d.controlEl.querySelector("input");o&&(o.value=this.icon)})).open()})))),i.createSpan("regex-help");const u=i.createEl("details",{cls:"regex-examples-container"});u.style.marginTop="15px",u.style.borderRadius="5px",u.style.overflow="hidden";const p=u.createEl("summary",{text:f("Regular expression examples")});p.style.padding="8px 12px",p.style.backgroundColor="var(--background-secondary)",p.style.cursor="pointer",p.style.fontWeight="bold",p.style.borderRadius="4px",p.style.userSelect="none";const m=u.createDiv("examples-content");m.style.padding="10px",m.style.backgroundColor="var(--background-secondary-alt)",m.style.borderBottomLeftRadius="5px",m.style.borderBottomRightRadius="5px",m.style.marginTop="1px";const h=m.createEl("ul");h.style.paddingLeft="20px",h.style.margin="0";[{name:f("URL to Markdown link"),pattern:"(https?://\\S+)",replacement:"[$1]($1)"},{name:f("Convert MM/DD/YYYY to YYYY-MM-DD"),pattern:"(\\d{1,2})/(\\d{1,2})/(\\d{4})",replacement:"$3-$1-$2"},{name:f("Add bold to keywords"),pattern:"\\b(important|critical|urgent)\\b",replacement:"**$1**"},{name:f("Format phone number"),pattern:"(\\d{3})(\\d{3})(\\d{4})",replacement:"($1) $2-$3"},{name:f("Remove extra spaces"),pattern:"\\s{2,}",replacement:" "},{name:f("Convert HTML bold tags to Markdown format"),pattern:"<strong>(.*?)</strong>",replacement:"**$1**"},{name:f("Convert quoted text to quote block"),pattern:'"([^"]+)"',replacement:"> $1"},{name:f("Add uniform alias to Markdown links"),pattern:"\\[([^\\]]+)\\]\\(([^\\)]+)\\)",replacement:"[$1|alias]($2)"},{name:f("Delete empty lines (multiline mode)"),pattern:"^\\s*$\\n",replacement:"",toggleMultiline:!0},{name:f("Add list symbol to each line (multiline mode)"),pattern:"^(.+)$",replacement:"- $1",toggleMultiline:!0},{name:f("If the text contains important, set the text highlight (conditional format)"),pattern:"(.+)",replacement:"==$1==",useCondition:!0,conditionPattern:"important"}].forEach((t=>{const e=h.createEl("li");e.style.marginBottom="8px";const o=e.createEl("a",{text:t.name,href:"#"});o.style.color="var(--text-accent)",o.style.textDecoration="none",o.addEventListener("mouseenter",(()=>{o.style.textDecoration="underline"})),o.addEventListener("mouseleave",(()=>{o.style.textDecoration="none"})),o.addEventListener("click",(e=>{e.preventDefault(),this.regexPattern=t.pattern,this.regexReplacement=t.replacement,this.regexPatternInput.setValue(t.pattern),this.regexReplacementInput.setValue(t.replacement),t.useCondition?(this.useCondition=!0,this.conditionPattern=t.conditionPattern||"",this.useConditionToggle.setValue(!0),this.conditionPatternInput.setValue(this.conditionPattern),c.style.display="block"):(this.useCondition=!1,this.useConditionToggle.setValue(!1),this.conditionPatternInput.setValue(""),c.style.display="none"),t.toggleMultiline?this.regexMultilineToggle.setValue(!0):this.regexMultilineToggle.setValue(!1),this.updatePreview(),u.removeAttribute("open")}))}));const g=e.createDiv("preview-container");g.style.marginTop="20px",g.style.marginBottom="20px",g.style.border="1px solid var(--background-modifier-border)",g.style.padding="10px",g.style.borderRadius="5px",g.createEl("label",{text:f("Preview")});const y=g.createDiv("preview-input-container");y.style.marginBottom="10px";const v=y.createEl("label",{text:f("Example text:")});v.style.display="block",v.style.marginBottom="5px",this.previewInput=y.createEl("textarea",{attr:{placeholder:f("Input example text to view the formatting effect of the command...")}}),this.previewInput.style.height="auto",this.previewInput.style.width="100%",this.previewInput.style.padding="8px",this.previewInput.style.borderRadius="4px",this.previewInput.style.border="1px solid var(--background-modifier-border)",this.previewInput.value="Sample text https://example.com important text    1234567890",this.previewInput.addEventListener("input",(()=>{this.updatePreview()}));const C=g.createDiv("preview-output-container"),w=C.createEl("label",{text:f("Result:")});w.style.display="block",w.style.marginBottom="5px",this.previewOutput=C.createDiv("preview-output"),this.previewOutput.style.padding="8px",this.previewOutput.style.borderRadius="4px",this.previewOutput.style.border="1px solid var(--background-modifier-border)",this.previewOutput.style.backgroundColor="var(--background-secondary)",this.previewOutput.style.minHeight="3em",this.updatePreview(),new t.Setting(e).addButton((e=>e.setButtonText("保存").setCta().onClick((()=>{if(!this.commandId||!this.commandName)return void new t.Notice(f("Command ID and command name cannot be empty"));if(this.commandId.includes(" "))return void new t.Notice(f("Command ID cannot contain spaces"));if(!this.regexPattern)return void new t.Notice(f("Regex pattern cannot be empty"));const e=null===this.commandIndex?`custom-${this.commandId}`:this.commandId;if(null===this.commandIndex){if(this.plugin.settings.customCommands.findIndex((t=>t.id===e))>=0)return void new t.Notice(f("Command")+" "+this.commandId+" "+f("already exists"),8e3)}const o={id:e,name:this.commandName,icon:this.icon,useRegex:!0,regexPattern:this.regexPattern,regexReplacement:this.regexReplacement,regexCaseInsensitive:this.regexCaseInsensitive,regexGlobal:this.regexGlobal,regexMultiline:this.regexMultiline,useCondition:this.useCondition,conditionPattern:this.conditionPattern,prefix:"",suffix:"",char:0,line:0,islinehead:!1};null!==this.commandIndex?this.plugin.settings.customCommands[this.commandIndex]=o:this.plugin.settings.customCommands.push(o),this.plugin.saveSettings().then((()=>{this.close(),setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand")),this.plugin.reloadCustomCommands()}),100)}))})))).addButton((t=>t.setButtonText(f("Cancel")).onClick((()=>this.close()))))}onClose(){const{contentEl:t}=this;t.empty()}updatePreview(){var t;const e=this.previewInput.value;let o=e;try{if(this.regexPattern){let t="";this.regexGlobal&&(t+="g"),this.regexCaseInsensitive&&(t+="i"),this.regexMultiline&&(t+="m");const i=new RegExp(this.regexPattern,t);o=e.replace(i,this.regexReplacement||""),this.showCompleteRegexCode(t)}this.previewOutput.empty(),o.split("\n").forEach(((t,e,o)=>{this.previewOutput.createSpan({text:t}),e<o.length-1&&this.previewOutput.createEl("br")})),this.previewOutput.style.color="var(--text-normal)"}catch(e){this.previewOutput.setText(f("Error: ")+e.message),this.previewOutput.style.color="var(--text-error)";const o=null===(t=this.previewOutput.parentElement)||void 0===t?void 0:t.querySelector(".regex-code-container");o&&o.remove()}}showCompleteRegexCode(t){const e=this.previewOutput.parentElement;if(!e)return;let o=e.querySelector(".regex-code-container");if(o){o.empty();const t=o.createEl("div",{text:f("Complete regular expression code (copy to AI for explanation)")});t.style.marginBottom="5px",t.style.fontWeight="bold"}else{o=e.createDiv("regex-code-container"),o.style.marginTop="15px",o.style.borderTop="1px solid var(--background-modifier-border)",o.style.paddingTop="10px";const t=o.createEl("div",{text:f("Complete regular expression code (copy to AI for explanation)")});t.style.marginBottom="5px",t.style.fontWeight="bold"}const i=o.createEl("pre");i.style.backgroundColor="var(--background-code)",i.style.padding="8px",i.style.borderRadius="4px",i.style.overflowX="auto",i.style.fontFamily="monospace",i.style.fontSize="var(--font-smaller)";let n=`//${f("Explain the syntax of JavaScript regular expressions")}\n`;n+=`const regex = /${this.escapeRegexForDisplay(this.regexPattern)}/${t};\n`,n+=`const result = text.replace(regex, "${this.escapeStringForDisplay(this.regexReplacement)}");\n`,this.useCondition&&this.conditionPattern&&(n+=`\n//${f("Conditional matching")}\n`,n+=`const condition = /${this.escapeRegexForDisplay(this.conditionPattern)}/;\n`,n+="if (condition.test(text)) {\n",n+=`  //${f("Apply regular expression replacement")}\n`,n+=`  const result = text.replace(regex, "${this.escapeStringForDisplay(this.regexReplacement)}");\n`,n+="}"),i.textContent=n;const s=o.createEl("button",{text:f("Copy code")});s.style.marginTop="5px",s.style.padding="4px 8px",s.style.borderRadius="4px",s.style.cursor="pointer",s.addEventListener("click",(()=>{navigator.clipboard.writeText(n).then((()=>{s.textContent=f("Copied!"),setTimeout((()=>{s.textContent=f("Copy code")}),2e3)}))}))}escapeRegexForDisplay(t){return t.replace(/\\/g,"\\\\")}escapeStringForDisplay(t){return t.replace(/"/g,'\\"')}}class Je extends t.Modal{constructor(t,e,o){if(super(t),this.plugin=e,this.commandIndex=o,null!==o){const t=e.settings.customCommands[o];this.commandId=t.id,this.commandName=t.name,this.prefix=t.prefix,this.suffix=t.suffix,this.char=t.char,this.line=t.line,this.islinehead=t.islinehead,this.icon=t.icon||""}else this.commandId="",this.commandName="",this.prefix="",this.suffix="",this.char=0,this.line=0,this.islinehead=!1,this.icon=""}onOpen(){const{contentEl:e}=this;this.modalEl.addClass("custom-commands-modal"),e.empty(),e.createEl("h2",{text:null!==this.commandIndex?f("Edit Custom Command"):f("Add Custom Command")});const o=e.createDiv("switch-to-regex-container");o.style.marginBottom="20px",o.style.textAlign="center";const i=o.createEl("button",{text:"切换到正则表达式命令"});i.addClass("mod-cta"),i.addEventListener("click",(()=>{this.close(),new Xe(this.app,this.plugin,null).open()})),new t.Setting(e).setName(f("Command ID")).setDesc(f('Unique identifier, no spaces, e.g.: "my-custom-format"')).addText((t=>(this.commandIdInput=t,t.setValue(this.commandId),null!==this.commandIndex?(t.setDisabled(!0),t.inputEl.addClass("id-is-disabled")):t.onChange((t=>{this.commandId=t,this.commandNameInput&&(this.commandNameInput.setValue(t),this.commandName=t)})),t))),new t.Setting(e).setName(f("Command Name")).setDesc(f("Displayed name in toolbar and menu")).addText((t=>this.commandNameInput=t.setValue(this.commandName).onChange((t=>this.commandName=t)))),new t.Setting(e).setName(f("Prefix")).setDesc(f("Add content before selected text")).addText((t=>t.setValue(this.prefix).onChange((t=>{this.prefix=t;const e=this.getMirrorText(t);e&&(this.suffix=e,this.suffixInput.setValue(e))})))),new t.Setting(e).setName(f("Suffix")).setDesc(f("Add content after selected text")).addText((t=>{this.suffixInput=t,t.setValue(this.suffix).onChange((t=>this.suffix=t))})),new t.Setting(e).setName(f("Cursor Position Offset")).setDesc(f("Default 0, format will keep the text selected")).addText((t=>t.setValue(this.char.toString()).onChange((t=>this.char=parseInt(t)||0)))),new t.Setting(e).setName(f("Line Offset")).setDesc(f("Line offset of cursor after formatting")).addText((t=>t.setValue(this.line.toString()).onChange((t=>this.line=parseInt(t)||0)))),new t.Setting(e).setName(f("Line Head Format")).setDesc(f("Whether to insert at the beginning of the next line")).addToggle((t=>t.setValue(this.islinehead).onChange((t=>this.islinehead=t))));const n=new t.Setting(e).setName(f("Icon")).setDesc(f("Command icon (click to select)"));if(this.iconDisplay=n.controlEl.createDiv("editingToolbarSettingsIcon"),this.icon)try{t.setIcon(this.iconDisplay,this.icon)}catch(t){this.iconDisplay.setText(this.icon)}n.addButton((e=>e.setButtonText(f("Choose Icon")).onClick((()=>{const e={id:this.commandId,name:this.commandName,icon:this.icon};new b(this.plugin,e,!1,(e=>{if(this.icon=e,this.iconDisplay.empty(),this.icon)try{t.setIcon(this.iconDisplay,this.icon)}catch(t){this.iconDisplay.setText(this.icon)}const o=n.controlEl.querySelector("input");o&&(o.value=this.icon)})).open()})))),new t.Setting(e).addButton((e=>e.setButtonText(f("Save")).setCta().onClick((()=>{if(!this.commandId||!this.commandName)return void new t.Notice(f("Command ID and command name cannot be empty"));if(this.commandId.includes(" "))return void new t.Notice(f("Command ID cannot contain spaces"));const e=null===this.commandIndex?`custom-${this.commandId}`:this.commandId;if(null===this.commandIndex){if(this.plugin.settings.customCommands.findIndex((t=>t.id===e))>=0)return void new t.Notice(f("The command")+this.commandId+f("already exists"),8e3)}const o={id:e,name:this.commandName,prefix:this.prefix,suffix:this.suffix,char:this.char,line:this.line,islinehead:this.islinehead,icon:this.icon};if(null!==this.commandIndex){if(this.plugin.settings.customCommands[this.commandIndex].icon!==this.icon){const t=`editing-toolbar:${e}`;this.updateCommandIcon(this.plugin.settings.menuCommands,t),this.plugin.settings.enableMultipleConfig&&(this.updateCommandIcon(this.plugin.settings.followingCommands,t),this.updateCommandIcon(this.plugin.settings.topCommands,t),this.updateCommandIcon(this.plugin.settings.fixedCommands,t),this.plugin.settings.isLoadOnMobile&&this.updateCommandIcon(this.plugin.settings.mobileCommands,t))}this.plugin.settings.customCommands[this.commandIndex]=o}else this.plugin.settings.customCommands.push(o);this.plugin.saveSettings().then((()=>{this.close(),setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand")),this.plugin.reloadCustomCommands()}),100)}))})))).addButton((t=>t.setButtonText(f("Cancel")).onClick((()=>this.close())))),setTimeout((()=>{this.commandIndex?this.commandIdInput.inputEl.focus():this.commandNameInput.inputEl.focus()}),10)}updateCommandIcon(t,e){t&&t.forEach((t=>{t.id===e&&(t.icon=this.icon),t.SubmenuCommands&&this.updateCommandIcon(t.SubmenuCommands,e)}))}onClose(){const{contentEl:t}=this;t.empty()}getMirrorText(t){const e={"**":"**","*":"*",__:"__",_:"_","~~":"~~","`":"`","```":"```",$:"$",$$:"$$","(":")","[":"]","{":"}","<":">","==":"==","*==":"==*","**==":"==**","***==":"==***"};if(!t)return"";if(t in e)return e[t];const o=t.match(/^<(\w+)([^>]*)>$/);return o?`</${o[1]}>`:""}}class Ke extends t.Modal{constructor(t,e,o){super(t),this.deployOptions=[],this.plugin=e,this.command=o,this.deployOptions=[{id:"following",name:f("Following Style"),enabled:!0},{id:"top",name:f("Top Style"),enabled:!0},{id:"fixed",name:f("Fixed Style"),enabled:!0}],this.plugin.settings.isLoadOnMobile&&this.deployOptions.push({id:"mobile",name:f("Mobile Style"),enabled:!0})}onOpen(){const{contentEl:e}=this;e.empty(),e.createEl("h3",{text:f("Deploy command to configurations")}),e.createDiv("deploy-option");const o=e.createDiv("deploy-options");this.deployOptions.forEach((e=>{new t.Setting(o).setName(e.name).addToggle((t=>t.setValue(e.enabled).onChange((t=>{e.enabled=t})))).settingEl.addClass("deploy-option")}));const i=e.createDiv("deploy-buttons");new t.Setting(i).addButton((t=>t.setButtonText(f("Deploy")).setCta().onClick((()=>{this.deployCommand(),this.close()})))).addButton((t=>t.setButtonText(f("Cancel")).onClick((()=>{this.close()}))))}deployCommand(){const e={id:`editing-toolbar:${this.command.id}`,name:this.command.name,icon:this.command.icon||"obsidian-new"};this.plugin.settings.menuCommands.some((t=>t.id===e.id))||this.plugin.settings.menuCommands.push(Object.assign({},e));let o=0;this.deployOptions.forEach((t=>{if(t.enabled){let i;switch(t.id){case"mobile":i=this.plugin.settings.mobileCommands;break;case"following":i=this.plugin.settings.followingCommands;break;case"top":i=this.plugin.settings.topCommands;break;case"fixed":i=this.plugin.settings.fixedCommands}i&&!i.some((t=>t.id===e.id))&&(i.push(Object.assign({},e)),o++)}})),this.plugin.saveSettings().then((()=>{let e="";if(o>0){const t=this.deployOptions.filter((t=>t.enabled)).map((t=>t.name)).join(", ");e=f("Command deployed to: ")+t}else e=f("Command already exists in selected configurations");new t.Notice(e),dispatchEvent(new Event("editingToolbar-NewCommand")),this.plugin.reloadCustomCommands()}))}}class Qe extends t.Modal{constructor(t,e,o){super(t),this.plugin=e,this.mode=o,this.exportType="all",this.importMode="update"}onOpen(){const{contentEl:e}=this;if(e.addClass("editing-toolbar-import-export-modal"),e.createEl("h2",{text:"import"===this.mode?f("Import Configuration"):f("Export Configuration"),cls:"import-export-title"}),"export"===this.mode){new t.Setting(e).setName(f("Export Type")).setDesc(f("Choose what to export")).addDropdown((t=>{t.addOption("all",f("All Settings")).addOption("All commands",f("All Toolbar Commands")).addOption("custom",f("Custom Commands Only")),this.plugin.settings.enableMultipleConfig&&t.addOption("following",f("Following Style Only")).addOption("top",f("Top Style Only")).addOption("fixed",f("Fixed Style Only")).addOption("mobile",f("Mobile Style Only")),t.setValue(this.exportType).onChange((t=>{this.exportType=t,this.updateExportContent()}))}));const o=e.createDiv("export-container");o.style.border="1px solid var(--background-modifier-border)",o.style.padding="10px",o.style.borderRadius="5px",this.textArea=new t.TextAreaComponent(o),this.textArea.setValue("").setPlaceholder(f("Loading...")).then((t=>{t.inputEl.style.width="100%",t.inputEl.style.height="200px",t.inputEl.style.fontFamily="monospace",t.inputEl.style.fontSize="12px",t.inputEl.style.padding="8px",t.inputEl.style.border="1px solid var(--background-modifier-border)",t.inputEl.style.borderRadius="4px"})),this.updateExportContent();const i=e.createDiv("import-export-button-container");i.style.display="flex",i.style.justifyContent="flex-end",i.style.marginTop="16px";i.createEl("button",{text:f("Copy to Clipboard"),cls:"mod-cta"}).addEventListener("click",(()=>{navigator.clipboard.writeText(this.textArea.getValue()).then((()=>{new t.Notice(f("Configuration copied to clipboard"))})).catch((e=>{console.error("Failed to copy: ",e),new t.Notice(f("Failed to copy configuration"))}))}))}else{new t.Setting(e).setName(f("Import Mode")).setDesc(f("Choose how to import the configuration")).addDropdown((t=>{t.addOption("update",f("Update Mode (Add new items and update existing ones)")).addOption("overwrite",f("Overwrite Mode (Replace settings with imported ones)")).setValue(this.importMode).onChange((t=>{this.importMode=t,this.importButton.setButtonText("overwrite"===this.importMode?f("Overwrite Import"):f("Update Import")),this.warningContent.setText("overwrite"===this.importMode?f("Warning: Overwrite mode will replace existing settings with imported ones."):f("Warning: Update mode will add new items and update existing ones."))}))}));const o=e.createDiv("import-container");o.style.border="1px solid var(--background-modifier-border)",o.style.padding="10px",o.style.borderRadius="5px",this.textArea=new t.TextAreaComponent(o),this.textArea.setValue("").setPlaceholder(f("Paste configuration here...")).then((t=>{t.inputEl.style.width="100%",t.inputEl.style.height="200px",t.inputEl.style.fontFamily="monospace",t.inputEl.style.fontSize="12px",t.inputEl.style.padding="8px",t.inputEl.style.border="1px solid var(--background-modifier-border)",t.inputEl.style.borderRadius="4px"}));const i=e.createDiv("import-export-button-container");i.style.display="flex",i.style.justifyContent="flex-end",i.style.marginTop="16px",new t.Setting(i).addButton((t=>{this.importButton=t.setIcon("import").setButtonText(f("Import Configuration")).onClick((()=>{this.importConfiguration()}))}));const n=e.createDiv("import-export-warning");n.style.marginTop="16px",n.style.padding="8px 12px",n.style.backgroundColor="rgba(var(--color-red-rgb), 0.1)",n.style.borderRadius="4px",n.style.border="1px solid rgba(var(--color-red-rgb), 0.3)";const s=n.createEl("p",{text:f("Warning: Update mode will add new items and update existing ones."),cls:"warning-text"});s.style.margin="0",this.warningContent=s}}updateExportContent(){let t={_exportInfo:{version:this.plugin.manifest.version,exportType:this.exportType,exportTime:(new Date).toISOString(),pluginId:this.plugin.manifest.id}};switch(this.exportType){case"all":t=Object.assign(Object.assign({},t),{menuCommands:this.plugin.settings.menuCommands||[],followingCommands:this.plugin.settings.followingCommands||[],topCommands:this.plugin.settings.topCommands||[],fixedCommands:this.plugin.settings.fixedCommands||[],mobileCommands:this.plugin.settings.mobileCommands||[],customCommands:this.plugin.settings.customCommands||[],enableMultipleConfig:this.plugin.settings.enableMultipleConfig,positionStyle:this.plugin.settings.positionStyle,aestheticStyle:this.plugin.settings.aestheticStyle,appendMethod:this.plugin.settings.appendMethod,autohide:this.plugin.settings.autohide,isLoadOnMobile:this.plugin.settings.isLoadOnMobile,cMenuNumRows:this.plugin.settings.cMenuNumRows,custom_bg1:this.plugin.settings.custom_bg1,custom_bg2:this.plugin.settings.custom_bg2,custom_bg3:this.plugin.settings.custom_bg3,custom_bg4:this.plugin.settings.custom_bg4,custom_bg5:this.plugin.settings.custom_bg5,custom_fc1:this.plugin.settings.custom_fc1,custom_fc2:this.plugin.settings.custom_fc2,custom_fc3:this.plugin.settings.custom_fc3,custom_fc4:this.plugin.settings.custom_fc4,custom_fc5:this.plugin.settings.custom_fc5,toolbarBackgroundColor:this.plugin.settings.toolbarBackgroundColor,toolbarIconColor:this.plugin.settings.toolbarIconColor,toolbarIconSize:this.plugin.settings.toolbarIconSize});break;case"All commands":t=Object.assign(Object.assign({},t),{menuCommands:this.plugin.settings.menuCommands||[],followingCommands:this.plugin.settings.followingCommands||[],topCommands:this.plugin.settings.topCommands||[],fixedCommands:this.plugin.settings.fixedCommands||[],mobileCommands:this.plugin.settings.mobileCommands||[],enableMultipleConfig:this.plugin.settings.enableMultipleConfig});break;case"custom":t=Object.assign(Object.assign({},t),{customCommands:this.plugin.settings.customCommands||[]});break;case"following":t=Object.assign(Object.assign({},t),{followingCommands:this.plugin.settings.followingCommands||[]});break;case"top":t=Object.assign(Object.assign({},t),{topCommands:this.plugin.settings.topCommands||[]});break;case"fixed":t=Object.assign(Object.assign({},t),{fixedCommands:this.plugin.settings.fixedCommands||[]});break;case"mobile":t=Object.assign(Object.assign({},t),{mobileCommands:this.plugin.settings.mobileCommands||[]})}this.validateExportContent(t),this.textArea.setValue(JSON.stringify(t,null,2))}validateExportContent(t){["menuCommands","followingCommands","topCommands","fixedCommands","mobileCommands","customCommands"].forEach((e=>{e in t&&!t[e]&&(t[e]=[])})),"enableMultipleConfig"in t&&void 0===t.enableMultipleConfig&&(t.enableMultipleConfig=!1),"autohide"in t&&void 0===t.autohide&&(t.autohide=!1),"isLoadOnMobile"in t&&void 0===t.isLoadOnMobile&&(t.isLoadOnMobile=!0),"positionStyle"in t&&!t.positionStyle&&(t.positionStyle="top"),"aestheticStyle"in t&&!t.aestheticStyle&&(t.aestheticStyle="default"),"appendMethod"in t&&!t.appendMethod&&(t.appendMethod="workspace"),"cMenuNumRows"in t&&void 0===t.cMenuNumRows&&(t.cMenuNumRows=1)}importConfiguration(){return e(this,void 0,void 0,(function*(){try{const e=this.textArea.getValue();if(!e.trim())return void new t.Notice(f("Please paste configuration data first"));const o=JSON.parse(e);if(!o||"object"!=typeof o)return void new t.Notice(f("Invalid import data format"));const i="menuCommands"in o,n="customCommands"in o,s="followingCommands"in o,a="topCommands"in o,r="fixedCommands"in o,l="mobileCommands"in o,c="positionStyle"in o||"aestheticStyle"in o,d="enableMultipleConfig"in o,u=o.positionStyle,p=i&&Array.isArray(o.menuCommands)&&o.menuCommands.length>0,m=n&&Array.isArray(o.customCommands)&&o.customCommands.length>0,h=s&&Array.isArray(o.followingCommands)&&o.followingCommands.length>0,g=a&&Array.isArray(o.topCommands)&&o.topCommands.length>0,b=r&&Array.isArray(o.fixedCommands)&&o.fixedCommands.length>0,y=l&&Array.isArray(o.mobileCommands)&&o.mobileCommands.length>0,v=i&&(!Array.isArray(o.menuCommands)||0===o.menuCommands.length),C=n&&(!Array.isArray(o.customCommands)||0===o.customCommands.length),w=s&&(!Array.isArray(o.followingCommands)||0===o.followingCommands.length),x=a&&(!Array.isArray(o.topCommands)||0===o.topCommands.length),k=r&&(!Array.isArray(o.fixedCommands)||0===o.fixedCommands.length),S=l&&(!Array.isArray(o.mobileCommands)||0===o.mobileCommands.length);let T=f("This import will:")+"\n";if(c&&(T+="• "+f("Update general settings")+"\n"),p&&(T+="• "+f("Update Main Menu Commands")+" ("+o.menuCommands.length+" )\n"),m&&(T+="• "+f("Update Custom Commands")+" ("+o.customCommands.length+" )\n"),h&&(T+="• "+f("Update Following Style Commands")+" ("+o.followingCommands.length+" )\n"),g&&(T+="• "+f("Update Top Style Commands")+" ("+o.topCommands.length+" )\n"),b&&(T+="• "+f("Update Fixed Style Commands")+" ("+o.fixedCommands.length+" )\n"),y&&(T+="• "+f("Update Mobile Style Commands")+" ("+o.mobileCommands.length+" )\n"),"overwrite"===this.importMode&&(v&&(T+="• "+f("Clear all Main Menu Commands")+" ⚠️\n"),C&&(T+="• "+f("Clear all Custom Commands")+" ⚠️\n"),w&&(T+="• "+f("Clear all Following Style Commands")+" ⚠️\n"),x&&(T+="• "+f("Clear all Top Style Commands")+" ⚠️\n"),k&&(T+="• "+f("Clear all Fixed Style Commands")+" ⚠️\n"),S&&(T+="• "+f("Clear all Mobile Style Commands")+" ⚠️\n")),d){const t=o.enableMultipleConfig?f("Enable"):f("Disable");T+="• "+f("Set Multiple Config to:")+" "+t+"\n"}if(u&&(T+="• "+f("Set Position Style to:")+" "+this.getPositionStyleName(u)+"\n"),!(p||m||h||g||b||y||v||C||w||x||k||S||c||d))return void new t.Notice(f("No valid configuration found in import data"));if("overwrite"===this.importMode?T+="\n"+f("⚠️ Overwrite mode will replace existing settings with imported ones."):T+="\n"+f("ℹ️ Update mode will merge imported settings with existing ones."),!confirm(T+"\n"+f("Do you want to continue?")))return;const E={positionStyle:this.plugin.settings.positionStyle,menuCommands:[...this.plugin.settings.menuCommands],customCommands:[...this.plugin.settings.customCommands],followingCommands:[...this.plugin.settings.followingCommands],topCommands:[...this.plugin.settings.topCommands],fixedCommands:[...this.plugin.settings.fixedCommands],mobileCommands:[...this.plugin.settings.mobileCommands]};try{"overwrite"===this.importMode?this.performOverwriteImport(o):this.performUpdateImport(o),this.fixImportedCommandIds(),yield this.plugin.saveSettings(),this.plugin.reloadCustomCommands(),dispatchEvent(new Event("editingToolbar-NewCommand")),new t.Notice(f("Configuration imported successfully")),this.close()}catch(t){throw this.restoreBackup(E),t}}catch(e){console.error("Import error:",e),new t.Notice(f("Error:")+" "+e.message)}}))}performOverwriteImport(t){this.importGeneralSettings(t),t.menuCommands&&(this.plugin.settings.menuCommands=t.menuCommands),t.customCommands&&(this.plugin.settings.customCommands=t.customCommands),t.followingCommands&&(this.plugin.settings.followingCommands=t.followingCommands),t.topCommands&&(this.plugin.settings.topCommands=t.topCommands),t.fixedCommands&&(this.plugin.settings.fixedCommands=t.fixedCommands),t.mobileCommands&&(this.plugin.settings.mobileCommands=t.mobileCommands)}performUpdateImport(t){this.importGeneralSettings(t),t.menuCommands&&this.updateCommandArray(this.plugin.settings.menuCommands,t.menuCommands),t.customCommands&&this.updateCommandArray(this.plugin.settings.customCommands,t.customCommands),t.followingCommands&&this.updateCommandArray(this.plugin.settings.followingCommands,t.followingCommands),t.topCommands&&this.updateCommandArray(this.plugin.settings.topCommands,t.topCommands),t.fixedCommands&&this.updateCommandArray(this.plugin.settings.fixedCommands,t.fixedCommands),t.mobileCommands&&this.updateCommandArray(this.plugin.settings.mobileCommands,t.mobileCommands)}updateCommandArray(t,e){return t?(e.forEach((e=>{var o;const i=t.findIndex((t=>t.id===e.id));i>=0?t[i]=e:t.push(e),e.SubmenuCommands&&(null===(o=t[i])||void 0===o?void 0:o.SubmenuCommands)&&this.updateCommandArray(t[i].SubmenuCommands,e.SubmenuCommands)})),t):e.slice()}importGeneralSettings(t){["positionStyle","aestheticStyle","appendMethod","autohide","isLoadOnMobile","cMenuNumRows","enableMultipleConfig","custom_bg1","custom_bg2","custom_bg3","custom_bg4","custom_bg5","custom_fc1","custom_fc2","custom_fc3","custom_fc4","custom_fc5","toolbarBackgroundColor","toolbarIconColor","toolbarIconSize"].forEach((e=>{void 0!==t[e]&&(this.plugin.settings[e]=t[e])}))}fixImportedCommandIds(){const t={"editor:toggle-numbered-list":"editing-toolbar:toggle-numbered-list","editor:toggle-bullet-list":"editing-toolbar:toggle-bullet-list","editor:toggle-highlight":"editing-toolbar:toggle-highlight","toggle-highlight":"editing-toolbar:toggle-highlight","editing-toolbar:editor:toggle-bold":"editing-toolbar:toggle-bold","editing-toolbar:editor:toggle-italics":"editing-toolbar:toggle-italics","editing-toolbar:editor:toggle-strikethrough":"editing-toolbar:toggle-strikethrough","editing-toolbar:editor:toggle-inline-math":"editing-toolbar:toggle-inline-math","editing-toolbar:editor:insert-callout":"editing-toolbar:insert-callout","editing-toolbar:editor:insert-link":"editing-toolbar:insert-link","cMenuToolbar-Divider-Line":"editingToolbar-Divider-Line"},e=o=>{o&&Array.isArray(o)&&o.forEach((o=>{o.id&&t[o.id]&&(o.id=t[o.id]),o.SubmenuCommands&&Array.isArray(o.SubmenuCommands)&&e(o.SubmenuCommands)}))};e(this.plugin.settings.menuCommands),e(this.plugin.settings.customCommands),e(this.plugin.settings.followingCommands),e(this.plugin.settings.topCommands),e(this.plugin.settings.fixedCommands),e(this.plugin.settings.mobileCommands)}restoreBackup(t){this.plugin.settings.positionStyle=t.positionStyle,this.plugin.settings.menuCommands=t.menuCommands,this.plugin.settings.customCommands=t.customCommands,this.plugin.settings.followingCommands=t.followingCommands,this.plugin.settings.topCommands=t.topCommands,this.plugin.settings.fixedCommands=t.fixedCommands,this.plugin.settings.mobileCommands=t.mobileCommands}onClose(){const{contentEl:t}=this;t.empty()}getPositionStyleName(t){switch(t){case"following":return f("Following Style");case"top":return f("Top Style");case"fixed":return f("Fixed Style");default:return t}}}const to=[{id:"general",name:f("General"),icon:"gear"},{id:"appearance",name:f("Appearance"),icon:"brush"},{id:"customcommands",name:f("Custom Commands"),icon:"lucide-rectangle-ellipsis"},{id:"commands",name:f("Toolbar Commands"),icon:"lucide-command"},{id:"importexport",name:f("Import/Export"),icon:"lucide-import"}];function eo(t){const{el:e,containerEl:o,swatches:i,opacity:n,defaultColor:s}=t;return{el:e,container:o,theme:"nano",swatches:i,lockOpacity:!n,default:s,position:"left-middle",components:{preview:!0,hue:!0,opacity:!!n,interaction:{hex:!0,rgba:!1,hsla:!1,input:!0,cancel:!0,save:!0}}}}function oo(t,e){let o;return e.forEach(((e,i)=>{e.id===t&&(o=i)})),o}class io extends t.PluginSettingTab{constructor(t,e){super(t,e),this.pickrs=[],this.activeTab="general",this.aestheticStyleMap={default:"editingToolbarDefaultAesthetic",tiny:"editingToolbarTinyAesthetic",glass:"editingToolbarGlassAesthetic",custom:"editingToolbarCustomAesthetic",top:"top",following:"editingToolbarFlex",fixed:"fixed"},this.plugin=e,this.currentEditingConfig=this.plugin.positionStyle,addEventListener("editingToolbar-NewCommand",(()=>{q(),$(t,this.plugin),this.display()}))}display(){this.destroyPickrs();const{containerEl:e}=this;e.empty(),this.createHeader(e);const o=e.createEl("div",{cls:"editing-toolbar-tabs"});to.forEach((e=>{const i=o.createEl("div",{cls:"editing-toolbar-tab "+(this.activeTab===e.id?"active":"")});t.setIcon(i,e.icon),i.createEl("span",{text:e.name}),i.addEventListener("click",(()=>{this.activeTab=e.id,this.display()}))}));const i=e.createEl("div",{cls:"editing-toolbar-content"});switch(this.activeTab){case"general":this.displayGeneralSettings(i);break;case"appearance":this.displayAppearanceSettings(i);break;case"customcommands":this.displayCustomCommandSettings(i);break;case"commands":this.displayCommandSettings(i);break;case"importexport":this.displayImportExportSettings(i)}}createDeleteButton(t,o,i=f("Delete")){let n,s=!1;t.setIcon("editingToolbarDelete").setTooltip(i).onClick((()=>e(this,void 0,void 0,(function*(){s?(clearTimeout(n),t.setIcon("editingToolbarDelete").setTooltip(i),t.buttonEl.removeClass("mod-warning"),s=!1,yield o()):(s=!0,t.setTooltip(f("Confirm delete?")).setButtonText(f("Confirm delete?")),t.buttonEl.addClass("mod-warning"),n=setTimeout((()=>{t.setIcon("editingToolbarDelete").setTooltip(i),t.buttonEl.removeClass("mod-warning"),s=!1}),3500))}))))}displayGeneralSettings(o){const i=o.createDiv("generalSetting-container");i.style.padding="16px",i.style.borderRadius="8px",i.style.backgroundColor="var(--background-secondary)",i.style.marginBottom="20px",new t.Setting(i).setName(f("Editing Toolbar append method")).setDesc(f("Choose where Editing Toolbar will append upon regeneration.")).addDropdown((t=>{let e={};x.map((t=>e[t]=t)),t.addOptions(e),t.setValue(this.plugin.settings.appendMethod).onChange((t=>{this.plugin.settings.appendMethod=t,this.plugin.saveSettings()}))})),new t.Setting(i).setName(f("Enable multiple configurations")).setDesc(f("Enable different command configurations for each position style (following, top, fixed)")).addToggle((t=>t.setValue(this.plugin.settings.enableMultipleConfig||!1).onChange((t=>e(this,void 0,void 0,(function*(){this.plugin.settings.enableMultipleConfig=t,this.plugin.onPositionStyleChange(this.plugin.positionStyle),yield this.plugin.saveSettings(),this.display()})))))),new t.Setting(i).setName(f("Mobile enabled or not")).setDesc(f("Whether to enable on mobile devices with device width less than 768px")).addToggle((t=>{var e,o;return t.setValue(null!==(o=null===(e=this.plugin.settings)||void 0===e?void 0:e.isLoadOnMobile)&&void 0!==o&&o).onChange((t=>{this.plugin.settings.isLoadOnMobile=t,this.plugin.saveSettings(),this.triggerRefresh()}))}))}displayAppearanceSettings(o){const i=o.createDiv("appearanceSetting-container");i.style.padding="16px",i.style.borderRadius="8px",i.style.backgroundColor="var(--background-secondary)",i.style.marginBottom="20px",new t.Setting(i).setName(f("Editing Toolbar position")).setDesc(f("Choose between fixed position or cursor following mode")).addDropdown((t=>{let o={};S.map((t=>o[t]=t)),t.addOptions(o).setValue(this.plugin.settings.positionStyle).onChange((t=>e(this,void 0,void 0,(function*(){this.plugin.settings.positionStyle=t,yield this.plugin.saveSettings(),this.plugin.onPositionStyleChange(t),this.display()}))))})),"top"==this.plugin.positionStyle&&new t.Setting(i).setName(f("Editing Toolbar Auto-hide")).setDesc(f("The toolbar is displayed when the mouse moves over it, otherwise it is automatically hidden")).addToggle((t=>{var e;return t.setValue(null===(e=this.plugin.settings)||void 0===e?void 0:e.autohide).onChange((t=>{this.plugin.settings.autohide=t,this.plugin.saveSettings(),this.triggerRefresh()}))})),"fixed"==this.plugin.positionStyle&&(new t.Setting(i).setName(f("Editing Toolbar columns")).setDesc(f("Choose the number of columns per row to display on Editing Toolbar.")).addSlider((o=>{o.setLimits(1,32,1).setValue(this.plugin.settings.cMenuNumRows).onChange(t.debounce((t=>e(this,void 0,void 0,(function*(){this.plugin.settings.cMenuNumRows=t,yield this.plugin.saveSettings(),this.triggerRefresh()}))),100,!0)).setDynamicTooltip()})),new t.Setting(i).setName(f("Fixed position offset")).setDesc(f("Choose the offset of the Editing Toolbar in the fixed position.")).addButton((t=>t.setButtonText(f("Settings")).onClick((()=>{new w(this.app,this.plugin).open()}))))),this.createColorSettings(o)}displayCommandSettings(o){const i=o.createDiv("commandSetting-container");if(i.style.padding="16px",i.style.borderRadius="8px",i.style.backgroundColor="var(--background-secondary)",i.style.marginBottom="20px",this.plugin.settings.enableMultipleConfig&&new t.Setting(i).setName(f("Current Configuration")).setDesc(f("Switch between different command configurations")).addDropdown((t=>{t.addOption("top",f("Top Style")),t.addOption("fixed",f("Fixed Style")),t.addOption("following",f("Following Style")),this.plugin.settings.isLoadOnMobile&&t.addOption("mobile",f("Mobile Style")),t.setValue(this.currentEditingConfig),t.onChange((t=>e(this,void 0,void 0,(function*(){this.currentEditingConfig=t,this.display()}))))})),this.plugin.settings.enableMultipleConfig){const i=this.currentEditingConfig;this.getCommandsArrayByType(i);const n=o.createDiv("command-buttons-container");n.style.display="flex",n.style.flexDirection="column",n.style.gap="10px",n.style.padding="16px",n.style.borderRadius="8px",n.style.backgroundColor="var(--background-secondary)";const s=new t.Setting(n).setName(f("Import From")).setDesc(f("Copy commands from another style configuration"));let a="Main menu";const r=new t.Setting(n);r.addDropdown((t=>{t.addOption("Main menu","Main Menu Commands"),"following"!==i&&this.plugin.settings.followingCommands&&t.addOption("following",f("Following Style")),"top"!==i&&this.plugin.settings.topCommands&&t.addOption("top",f("Top Style")),"fixed"!==i&&this.plugin.settings.fixedCommands&&t.addOption("fixed",f("Fixed Style")),"mobile"!==i&&this.plugin.settings.mobileCommands&&t.addOption("mobile",f("Mobile Style")),t.setValue(a).onChange((t=>{a=t}))})),r.addExtraButton((t=>t.setIcon("arrow-right"))),r.addButton((o=>o.setButtonText(this.currentEditingConfig.replace(this.currentEditingConfig[0],this.currentEditingConfig[0].toUpperCase())+" "+f("Import")).setTooltip("Copy commands from selected style").onClick((()=>e(this,void 0,void 0,(function*(){const e=this.getCommandsArrayByType(a);if(!e||0===e.length)return void new t.Notice("The selected style has no commands to import");const o=`Import commands from "${a}" to "${this.currentEditingConfig}" `+f("configuration")+"?";if(confirm(o)){switch(i){case"Main menu":this.plugin.settings.menuCommands=[...e];break;case"following":this.plugin.settings.followingCommands=[...e];break;case"top":this.plugin.settings.topCommands=[...e];break;case"fixed":this.plugin.settings.fixedCommands=[...e];break;case"mobile":this.plugin.settings.mobileCommands=[...e]}yield this.plugin.saveSettings(),new t.Notice(`Commands imported successfully from "${a}" to "${this.currentEditingConfig}" `+f("configuration")),this.display()}})))))),s.addButton((o=>o.setButtonText(f("Clear")+" "+`${this.currentEditingConfig}`).setTooltip(f("Remove all commands from this configuration")).setWarning().onClick((()=>e(this,void 0,void 0,(function*(){if(confirm(f("Are you sure you want to clear all commands under the current style?"))){switch(i){case"following":this.plugin.settings.followingCommands=[];break;case"top":this.plugin.settings.topCommands=[];break;case"fixed":this.plugin.settings.fixedCommands=[];break;case"mobile":this.plugin.settings.mobileCommands=[]}yield this.plugin.saveSettings(),new t.Notice("All commands have been removed"),this.display()}}))))))}else{const o=i.createDiv("command-buttons-container");o.style.display="flex",o.style.flexDirection="column",o.style.gap="10px",o.style.marginBottom="1rem";new t.Setting(o).addButton((o=>o.setButtonText(f("One-click clear")).setTooltip(f("Remove all commands from this configuration")).setWarning().onClick((()=>e(this,void 0,void 0,(function*(){confirm(f("Are you sure you want to clear all commands under the current style?"))&&(this.plugin.settings.menuCommands=[],yield this.plugin.saveSettings(),new t.Notice(f("All commands have been removed")),this.display())}))))))}const n=o.createDiv("command-lists-container");n.style.padding="16px",n.style.borderRadius="8px",n.addClass(`${this.currentEditingConfig}`),this.plugin.settings.enableMultipleConfig&&n.createEl("div",{cls:`position-style-info ${this.currentEditingConfig}`,text:f("Currently editing commands for")+` "${this.currentEditingConfig} Style" `+f("configuration")}),new t.Setting(n).setName(f("Editing Toolbar commands")).setDesc(f("Add a command onto Editing Toolbar from Obsidian's commands library. To reorder the commands, drag and drop the command items. To delete them, use the delete buttom to the right of the command item. Editing Toolbar will not automaticaly refresh after reordering commands. Use the refresh button above.")).addButton((t=>{t.setIcon("plus").setTooltip(f("Add")).onClick((()=>{new v(this.plugin,this.currentEditingConfig).open(),this.triggerRefresh()}))})),this.createCommandList(n)}displayCustomCommandSettings(o){o.empty();const i=o.createDiv("custom-commands-container");i.createEl("p",{text:f("Add, edit or delete custom format commands")});const n=i.createDiv("command-list-container");n.style.padding="16px",n.style.borderRadius="8px",n.style.backgroundColor="var(--background-secondary)",n.style.marginBottom="20px",n.style.marginTop="20px";const s=i.createDiv("add-command-button-container");s.style.padding="16px",s.style.borderRadius="8px",s.style.backgroundColor="var(--background-secondary)",s.style.marginBottom="20px",s.style.marginTop="20px",s.style.display="flex",s.style.gap="10px";const a=s.createEl("button",{text:f("Add Format Command")});a.addClass("mod-cta"),a.addEventListener("click",(()=>{new Je(this.app,this.plugin,null).open()}));const r=s.createEl("button",{text:f("Add Regex Command")});r.addClass("mod-cta"),r.addEventListener("click",(()=>{new Xe(this.app,this.plugin,null).open()})),this.plugin.settings.customCommands.forEach(((o,i)=>{const s=new t.Setting(n).setName(o.name),a=createFragment();let r=`${f("ID")}: ${o.id}`;o.useRegex?r+=`, ${f("Pattern")}: ${o.regexPattern}`:r+=`, ${f("Prefix")}: ${o.prefix}, ${f("Suffix")}: ${o.suffix}`,a.createSpan({text:r});const l=a.createSpan({cls:"command-type-badge"});if(o.useRegex?(l.addClass("regex"),l.setText(f("Regex"))):l.setText(f("Prefix/Suffix")),s.descEl.appendChild(a),s.addButton((e=>e.setButtonText(f("Add to Toolbar")).setTooltip(f("Add this command to the toolbar")).setButtonText(f("Add to Toolbar")).setTooltip(f("Add this command to the toolbar")).onClick((()=>{if(this.plugin.settings.enableMultipleConfig)new Ke(this.app,this.plugin,o).open();else{if(this.plugin.settings.menuCommands.some((t=>t.id===`editing-toolbar:${o.id}`)))return void new t.Notice(f("This command is already in the toolbar"));const e={id:`editing-toolbar:${o.id}`,name:o.name,icon:o.icon||"obsidian-new"};this.plugin.settings.menuCommands.push(e),this.plugin.saveSettings().then((()=>{new t.Notice(f("Command added to toolbar")),dispatchEvent(new Event("editingToolbar-NewCommand")),this.plugin.reloadCustomCommands()}))}})))).addExtraButton((t=>{t.setIcon("pencil").setTooltip(f("Edit")).onClick((()=>{o.useRegex?new Xe(this.app,this.plugin,i).open():new Je(this.app,this.plugin,i).open()}))})).addButton((o=>this.createDeleteButton(o,(()=>e(this,void 0,void 0,(function*(){const e=`editing-toolbar:${this.plugin.settings.customCommands[i].id}`;this.removeCommandFromConfig(this.plugin.settings.menuCommands,e),this.plugin.settings.enableMultipleConfig&&(this.removeCommandFromConfig(this.plugin.settings.followingCommands,e),this.removeCommandFromConfig(this.plugin.settings.topCommands,e),this.removeCommandFromConfig(this.plugin.settings.fixedCommands,e),this.plugin.settings.isLoadOnMobile&&this.removeCommandFromConfig(this.plugin.settings.mobileCommands,e)),this.plugin.settings.customCommands.splice(i,1),yield this.plugin.saveSettings(),this.plugin.reloadCustomCommands(),this.display(),new t.Notice(f("Command deleted"))})))))),o.icon)try{const e=s.nameEl.createSpan({cls:"editingToolbarSettingsIcon"});e.style.marginRight="8px",O(o.icon)?e.innerHTML=o.icon:t.setIcon(e,o.icon)}catch(t){console.error("Failed to set icon:",t)}}))}triggerRefresh(){setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100)}createHeader(e){const o=e.createEl("div",{cls:"editing-toolbar-header"});o.createEl("div",{cls:"editing-toolbar-title-container"}).createEl("h1",{text:"Obsidian Editing Toolbar:"+this.plugin.manifest.version,cls:"editing-toolbar-title"});const i=o.createEl("div",{cls:"editing-toolbar-info"});i.createEl("span",{text:"作者："}).createEl("a",{text:"Cuman ✨",href:"https://github.com/cumany"}),i.createEl("span",{text:"  教程："}).createEl("a",{text:"pkmer.cn",href:"https://pkmer.cn/show/20230329145815"}),new t.Setting(i).setClass("editing-toolbar-fix-button").addButton((t=>{t.setIcon("wrench").setTooltip(f("Fix")).onClick((()=>{new Ue(this.app,this.plugin).open()}))}))}createColorSettings(o){const i=o.createDiv("custom-paintbrush-container");i.style.padding="16px",i.style.borderRadius="8px",i.style.backgroundColor="var(--background-secondary)",i.style.marginBottom="20px",new t.Setting(i).setName(f("🎨 Set custom background")).setDesc(f("Click on the picker to adjust the colour")).setClass("custom_bg").then((t=>{const e=t.controlEl.createDiv({cls:"pickr-container"});for(let t=0;t<5;t++){const o=e.createDiv({cls:"picker"}),i=Ze.create(eo({isView:!1,el:o,containerEl:e,swatches:["#FFB78B8C","#CDF4698C","#A0CCF68C","#F0A7D88C","#ADEFEF8C"],opacity:!0,defaultColor:this.plugin.settings[`custom_bg${t+1}`]||"#000000"}));this.setupPickrEvents(i,`custom_bg${t+1}`,"background-color"),this.pickrs.push(i)}})),new t.Setting(i).setName(f("🖌️ Set custom font color")).setDesc(f("Click on the picker to adjust the colour")).setClass("custom_font").then((t=>{const e=t.controlEl.createDiv({cls:"pickr-container"});for(let t=0;t<5;t++){const o=e.createDiv({cls:"picker"}),i=Ze.create(eo({isView:!1,el:o,containerEl:e,swatches:["#D83931","#DE7802","#245BDB","#6425D0","#646A73"],opacity:!0,defaultColor:this.plugin.settings[`custom_fc${t+1}`]||"#000000"}));this.setupPickrEvents(i,`custom_fc${t+1}`,"color"),this.pickrs.push(i)}}));const n=o.createDiv("custom-toolbar-container");n.style.padding="16px",n.style.borderRadius="8px",n.style.backgroundColor="var(--background-secondary)",new t.Setting(n).setName(f("Toolbar theme")).setDesc(f("Select a preset toolbar theme, automatically setting the background color, icon color, and size")).addDropdown((t=>{let o={};k.map((t=>o[t]="custom"==t?f("Custom theme"):t)),t.addOptions(o),t.selectEl.options[3].disabled=!0,t.addOption("light","┌ Light"),t.addOption("dark","├ Dark"),t.addOption("vibrant","├ Vibrant"),t.addOption("minimal","├ Minimal"),t.addOption("elegant","└ Elegant"),t.setValue(this.plugin.settings.aestheticStyle),t.onChange((t=>e(this,void 0,void 0,(function*(){switch(t in o?(this.plugin.settings.aestheticStyle=t,this.plugin.settings.toolbarIconSize=18):this.plugin.settings.aestheticStyle="custom",t){case"light":this.plugin.settings.toolbarBackgroundColor="#F5F8FA",this.plugin.settings.toolbarIconColor="#4A5568",this.plugin.settings.toolbarIconSize=18;break;case"dark":this.plugin.settings.toolbarBackgroundColor="#2D3033",this.plugin.settings.toolbarIconColor="#E2E8F0",this.plugin.settings.toolbarIconSize=18;break;case"vibrant":this.plugin.settings.toolbarBackgroundColor="#7E57C2",this.plugin.settings.toolbarIconColor="#FFFFFF",this.plugin.settings.toolbarIconSize=20;break;case"minimal":this.plugin.settings.toolbarBackgroundColor="#F8F9FA",this.plugin.settings.toolbarIconColor="#6B7280",this.plugin.settings.toolbarIconSize=16;break;case"elegant":this.plugin.settings.toolbarBackgroundColor="#1A2F28",this.plugin.settings.toolbarIconColor="#D4AF37",this.plugin.settings.toolbarIconSize=19}this.plugin.toolbarIconSize=this.plugin.settings.toolbarIconSize,document.documentElement.style.setProperty("--editing-toolbar-background-color",this.plugin.settings.toolbarBackgroundColor),document.documentElement.style.setProperty("--editing-toolbar-icon-color",this.plugin.settings.toolbarIconColor),document.documentElement.style.setProperty("--toolbar-icon-size",`${this.plugin.settings.toolbarIconSize}px`),this.destroyPickrs(),this.display(),yield this.plugin.saveSettings(),this.triggerRefresh()}))))})),new t.Setting(n).setName(f("Toolbar background color")).setDesc(f("Set the background color of the toolbar")).setClass("toolbar_background").then((t=>{const e=t.controlEl.createDiv({cls:"pickr-container"}),o=e.createDiv({cls:"picker"}),i=Ze.create(eo({isView:!1,el:o,containerEl:e,swatches:["#F5F8FA","#F4F1E8","#2D3033","#1A2F28","#2A1D3B"],opacity:!0,defaultColor:this.plugin.settings.toolbarBackgroundColor}));this.setupPickrEvents(i,"toolbarBackgroundColor","background-color"),this.pickrs.push(i)})),new t.Setting(n).setName(f("Toolbar icon color")).setDesc(f("Set the color of the toolbar icon")).setClass("toolbar_icon").then((t=>{const e=t.controlEl.createDiv({cls:"pickr-container"}),o=e.createDiv({cls:"picker"}),i=Ze.create(eo({isView:!1,el:o,containerEl:e,swatches:["#4A5568","#D4AF37","#2D3033","#6D5846","#4C2A55"],opacity:!1,defaultColor:this.plugin.settings.toolbarIconColor}));this.pickrs.push(i),this.setupPickrEvents(i,"toolbarIconColor","icon-color")})),new t.Setting(n).setName(f("Toolbar icon size")).setDesc(f("Set the size of the toolbar icon (px) default 18px")).addSlider((t=>{t.setValue(this.plugin.settings.toolbarIconSize).setLimits(12,32,1).setDynamicTooltip().onChange((t=>e(this,void 0,void 0,(function*(){this.plugin.settings.toolbarIconSize=t,this.plugin.toolbarIconSize=t,document.documentElement.style.setProperty("--toolbar-icon-size",`${t}px`),this.plugin.settings.aestheticStyle="custom",yield this.plugin.saveSettings()}))))}));const s=n.createDiv("toolbar-preview-container");s.addClass("toolbar-preview-section"),s.style.marginTop="20px";s.createEl("h3",{text:f("Toolbar preview")}).style.marginBottom="10px";const a=s.createDiv();if(a.setAttribute("id","editingToolbarModalBar"),this.applyAestheticStyle(a,this.plugin.settings.aestheticStyle,this.plugin.positionStyle),"fixed"==this.plugin.positionStyle){let t=this.plugin.settings.toolbarIconSize||18;a.setAttribute("style",`left: calc(50% - calc(${this.plugin.settings.cMenuNumRows*(t+10)}px / 2));\n   bottom: 4.25em; \n   grid-template-columns: repeat(${this.plugin.settings.cMenuNumRows}, ${t+10}px);\n   gap: ${(t-18)/4}px;\n   position:absolute;`)}[{id:"bold",name:"Bold",icon:"bold"},{id:"italics",name:"Italics",icon:"italic"},{id:"trikethrough",name:"Strikethrough",icon:"strikethrough"},{id:"code",name:"Code",icon:"code"},{id:"blockquote",name:"Blockquote",icon:"quote-glyph"},{id:"insert-link",name:"Link",icon:"link"},{id:"left-sidebar",name:"Left sidebar",icon:"lucide-panel-left"},{id:"editor:insert-embed",name:"Add embed",icon:"note-glyph"},{id:"editor:insert-link",name:"Insert markdown link",icon:"link-glyph"},{id:"editor:insert-tag",name:"Add tag",icon:"price-tag-glyph"},{id:"editor:insert-wikilink",name:"Add internal link",icon:"bracket-glyph"},{id:"editor:toggle-code",name:"Code",icon:"code-glyph"},{id:"editor:toggle-blockquote",name:"Blockquote",icon:"lucide-text-quote"},{id:"editor:toggle-checklist-status",name:"Checklist status",icon:"checkbox-glyph"},{id:"editor:toggle-comments",name:"Comment",icon:"percent-sign-glyph"},{id:"editor:insert-callout",name:"Insert Callout",icon:"lucide-quote"},{id:"editor:insert-mathblock",name:"MathBlock",icon:"lucide-sigma-square"},{id:"editor:insert-table",name:"Insert Table",icon:"lucide-table"}].forEach((e=>{const o=new t.ButtonComponent(a);o.setClass("editingToolbarCommandItem"),o.setTooltip(e.name),e.icon&&t.setIcon(o.buttonEl,e.icon)}))}createCommandList(o){let n=[];if(this.plugin.settings.enableMultipleConfig)switch(this.currentEditingConfig){case"mobile":n=this.plugin.settings.mobileCommands;break;case"following":n=this.plugin.settings.followingCommands;break;case"top":n=this.plugin.settings.topCommands;break;case"fixed":n=this.plugin.settings.fixedCommands;break;default:n=this.plugin.settings.menuCommands}else n=this.plugin.settings.menuCommands;const s=o.createEl("div",{cls:"editingToolbarSettingsTabsContainer"});let a="";ke.create(s,{group:"item",animation:500,draggable:".setting-item",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",dragoverBubble:!1,forceFallback:!0,fallbackOnBody:!0,swapThreshold:.7,fallbackClass:"sortable-fallback",easing:"cubic-bezier(1, 0, 0, 1)",delay:800,delayOnTouchOnly:!0,touchStartThreshold:5,onChoose:function(t){t.item.classList.add("sortable-chosen-feedback")},onUnchoose:function(t){t.item.classList.remove("sortable-chosen-feedback")},onSort:t=>{if(t.from.className===t.to.className){const e=n,[o]=e.splice(t.oldIndex,1);if(e.splice(t.newIndex,0,o),this.plugin.settings.enableMultipleConfig)switch(this.currentEditingConfig){case"mobile":this.plugin.settings.mobileCommands=e;break;case"following":this.plugin.settings.followingCommands=e;break;case"top":this.plugin.settings.topCommands=e;break;case"fixed":this.plugin.settings.fixedCommands=e}else this.plugin.settings.menuCommands=e;this.plugin.saveSettings()}this.triggerRefresh()},onStart:function(t){a=t.item.className}});const r=n;r.forEach(((o,l)=>{const c=new t.Setting(s);if("SubmenuCommands"in o){if(c.settingEl.setAttribute("data-id",o.id),c.setClass("editingToolbarCommandItem").setClass("editingToolbarCommandsubItem").setName(o.name).addButton((t=>{t.setClass("editingToolbarSettingsIcon").onClick((()=>e(this,void 0,void 0,(function*(){new b(this.plugin,o,!1,null,this.currentEditingConfig).open()})))),O(o.icon)?t.buttonEl.innerHTML=o.icon:t.setIcon(o.icon)})).addButton((t=>this.createDeleteButton(t,(()=>e(this,void 0,void 0,(function*(){r.remove(o),this.plugin.updateCurrentCommands(r),yield this.plugin.saveSettings(),this.display(),this.triggerRefresh(),console.log(`%cCommand '${o.name}' was removed from editingToolbar`,"color: #989cab")})))))),"editingToolbar-plugin:change-font-color"==o.id)return;if("editingToolbar-plugin:change-background-color"==o.id)return;const i=c.settingEl.createEl("div",{cls:"editingToolbarSettingsTabsContainer_sub"});ke.create(i,{group:{name:"item",pull:!0,put:function(){return!a.includes("editingToolbarCommandsubItem")}},draggable:".setting-item",animation:150,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",dragoverBubble:!1,fallbackOnBody:!0,swapThreshold:.7,forceFallback:!0,delay:800,delayOnTouchOnly:!0,touchStartThreshold:5,fallbackClass:"sortable-fallback",easing:"cubic-bezier(1, 0, 0, 1)",onStart:function(){},onSort:t=>{var e,o,i;if(t.from.className===t.to.className){const o=n,i=null===(e=o[l])||void 0===e?void 0:e.SubmenuCommands;if(i){const[e]=i.splice(t.oldIndex,1);i.splice(t.newIndex,0,e),this.plugin.updateCurrentCommands(o),this.plugin.saveSettings()}}else if("editingToolbarSettingsTabsContainer"===t.to.className){const e=n;const i=null===(o=e[oo(t.target.parentElement.dataset.id,e)])||void 0===o?void 0:o.SubmenuCommands;if(i){const[o]=i.splice(t.oldIndex,1);e.splice(t.newIndex,0,o),this.plugin.updateCurrentCommands(e),this.plugin.saveSettings()}else console.error("Subresult is undefined.")}else if("editingToolbarSettingsTabsContainer"===t.from.className){const e=n,o=null===(i=e[oo(t.target.parentElement.dataset.id,e)])||void 0===i?void 0:i.SubmenuCommands;if(o){const[i]=e.splice(t.oldIndex,1);o.splice(t.newIndex,0,i),this.plugin.updateCurrentCommands(e),this.plugin.saveSettings()}else console.error("Subresult is undefined.")}this.triggerRefresh()}}),o.SubmenuCommands.forEach((n=>{const s=new t.Setting(i);s.setClass("editingToolbarCommandItem").addButton((t=>{t.setClass("editingToolbarSettingsIcon").onClick((()=>e(this,void 0,void 0,(function*(){new b(this.plugin,n,!0,null,this.currentEditingConfig).open()})))),O(null==n?void 0:n.icon)?t.buttonEl.innerHTML=n.icon:t.setIcon(n.icon)})).setName(n.name).addButton((t=>{t.setIcon("pencil").setTooltip(f("Change Command name")).setClass("editingToolbarSettingsButton").onClick((()=>e(this,void 0,void 0,(function*(){new C(this.app,this.plugin,n,!0,this.currentEditingConfig).open()}))))})).addButton((t=>this.createDeleteButton(t,(()=>e(this,void 0,void 0,(function*(){o.SubmenuCommands.remove(n),yield this.plugin.saveSettings(),this.display(),this.triggerRefresh(),console.log(`%cCommand '${o.name}' was removed from editingToolbar`,"color: #989cab")})))))),s.nameEl}))}else c.addButton((t=>{t.setClass("editingToolbarSettingsIcon").onClick((()=>e(this,void 0,void 0,(function*(){new b(this.plugin,o,!1,null,this.currentEditingConfig).open()})))),O(o.icon)?t.buttonEl.innerHTML=o.icon:t.setIcon(o.icon)})),"editingToolbar-Divider-Line"==o.id&&c.setClass("editingToolbar-Divider-Line"),c.setClass("editingToolbarCommandItem").setName(o.name).addButton((t=>{t.setIcon("pencil").setTooltip(f("Change Command name")).setClass("editingToolbarSettingsButton").onClick((()=>e(this,void 0,void 0,(function*(){new C(this.app,this.plugin,o,!1,this.currentEditingConfig).open()}))))})).addButton((t=>{t.setIcon("editingToolbarSub").setTooltip(f("Add submenu")).setClass("editingToolbarSettingsButton").setClass("editingToolbarSettingsButtonaddsub").onClick((()=>e(this,void 0,void 0,(function*(){const t={id:"SubmenuCommands-"+i(1),name:"submenu",icon:"remix-Filter3Line",SubmenuCommands:[]},e=n;e.splice(l+1,0,t),this.plugin.updateCurrentCommands(e),yield this.plugin.saveSettings(),this.display(),this.triggerRefresh(),console.log(`%cCommand '${t.id}' add `,"color: #989cab")}))))})).addButton((t=>{t.setIcon("vertical-split").setTooltip(f("add hr")).setClass("editingToolbarSettingsButton").setClass("editingToolbarSettingsButtonaddsub").onClick((()=>e(this,void 0,void 0,(function*(){const t=n;t.splice(l+1,0,{id:"editingToolbar-Divider-Line",name:"HR",icon:"vertical-split"}),this.plugin.updateCurrentCommands(t),yield this.plugin.saveSettings(),this.display(),this.triggerRefresh()}))))})).addButton((t=>this.createDeleteButton(t,(()=>e(this,void 0,void 0,(function*(){r.remove(o),this.plugin.updateCurrentCommands(r),yield this.plugin.saveSettings(),this.display(),this.triggerRefresh(),console.log(`%cCommand '${o.name}' was removed from editingToolbar`,"color: #989cab")}))))))}))}setupPickrEvents(t,e,o){t.on("save",(t=>{const i=t.toHEXA().toString();this.plugin.settings[e]=i,document.documentElement.style.setProperty(`--editing-toolbar-${o}`,i),this.plugin.saveSettings(),"custom"!==this.plugin.settings.aestheticStyle&&(this.plugin.settings.aestheticStyle="custom",this.plugin.saveSettings())}))}destroyPickrs(){this.pickrs.forEach((t=>{t&&t.destroyAndRemove()})),this.pickrs=[]}hide(){this.destroyPickrs(),this.triggerRefresh()}removeCommandFromConfig(t,e){if(t)for(let o=t.length-1;o>=0;o--)t[o].id!==e?t[o].SubmenuCommands&&this.removeCommandFromConfig(t[o].SubmenuCommands,e):t.splice(o,1)}displayImportExportSettings(e){const o=e.createDiv("import-export-container");o.style.padding="16px",o.style.borderRadius="8px",o.style.backgroundColor="var(--background-secondary)",o.style.marginBottom="20px",new t.Setting(o).setName(f("Export Configuration")).setDesc(f("Export your toolbar configuration to share with others")).addButton((t=>t.setButtonText(f("Export")).setCta().onClick((()=>{new Qe(this.app,this.plugin,"export").open()})))),new t.Setting(o).setName(f("Import Configuration")).setDesc(f("Import toolbar configuration from JSON")).addButton((t=>t.setButtonText(f("Import")).setCta().onClick((()=>{new Qe(this.app,this.plugin,"import").open()}))));const i=e.createDiv("import-export-info");i.style.marginTop="20px",i.style.padding="16px",i.style.borderRadius="8px",i.style.backgroundColor="var(--background-secondary)",i.createEl("h3",{text:f("Usage Instructions"),cls:"import-export-heading"}).style.marginTop="0";const n=i.createEl("ul");n.style.paddingLeft="20px",n.createEl("li",{text:f("Export: Generate a JSON configuration that you can save or share")}),n.createEl("li",{text:f("Import: Paste a previously exported JSON configuration")});const s=e.createDiv("community-share-container");s.style.marginTop="20px",s.style.padding="16px",s.style.borderRadius="8px",s.style.backgroundColor="rgba(var(--color-green-rgb), 0.1)",s.style.border="1px solid rgba(var(--color-green-rgb), 0.3)",s.createEl("h3",{text:f("Join the Community"),cls:"community-heading"}).style.marginTop="0";s.createEl("p").innerHTML=f("Share your toolbar settings and styles in our")+' <a href="https://github.com/PKM-er/obsidian-editing-toolbar/discussions/categories/show-and-tell" target="_blank" rel="noopener noreferrer">Show and Tell</a> ',s.createEl("p",{text:f("Get inspired by what others have created or showcase your own customizations.")});const a=e.createDiv("import-export-warning");a.style.marginTop="20px",a.style.padding="16px",a.style.borderRadius="8px",a.style.backgroundColor="rgba(var(--color-red-rgb), 0.1)",a.style.border="1px solid rgba(var(--color-red-rgb), 0.3)",a.createEl("p",{text:f("Warning: Importing configuration will overwrite your current settings. Consider exporting your current configuration first as a backup."),cls:"warning-text"}).style.margin="0"}applyAestheticStyle(t,e,o){Object.values(this.aestheticStyleMap).forEach((e=>{t.removeClass(e)}));const i=this.aestheticStyleMap[e]||this.aestheticStyleMap.default;t.addClass(i);const n=this.aestheticStyleMap[o]||this.aestheticStyleMap.top;t.addClass(n)}getCommandsArrayByType(t){switch(t){case"following":return this.plugin.settings.followingCommands;case"top":return this.plugin.settings.topCommands;case"fixed":return this.plugin.settings.fixedCommands;case"mobile":return this.plugin.settings.mobileCommands;default:return this.plugin.settings.menuCommands}}}const no={editingToolbar:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="0" stroke-linecap="round" stroke-linejoin="round"><path d="M19 10H5c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-8c0-1.103-.897-2-2-2zM5 20v-8h14l.002 8H5zM5 6h14v2H5zm2-4h10v2H7z" fill="currentColor"/></svg>',editingToolbarSub:'<svg t="1661526346488" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16880"  ><path d="M597.333333 85.333333h-341.333333C187.733333 85.333333 128 140.8 128 213.333333v597.333334c0 72.533333 59.733333 128 128 128h426.666667c72.533333 0 128-55.466667 128-128V298.666667l-213.333334-213.333334z m170.666667 725.333334c0 46.933333-38.4 85.333333-85.333333 85.333333H256c-46.933333 0-85.333333-38.4-85.333333-85.333333V213.333333c0-46.933333 38.4-85.333333 85.333333-85.333333h298.666667v213.333333h213.333333v469.333334z m-320-234.666667h128c12.8 0 21.333333 8.533333 21.333333 21.333333s-8.533333 21.333333-21.333333 21.333334h-128v128c0 12.8-8.533333 21.333333-21.333333 21.333333s-21.333333-8.533333-21.333334-21.333333v-128h-128c-12.8 0-21.333333-8.533333-21.333333-21.333334s8.533333-21.333333 21.333333-21.333333h128v-128c0-12.8 8.533333-21.333333 21.333334-21.333333s21.333333 8.533333 21.333333 21.333333v128z" fill="#8a8a8a" p-id="16881"></path></svg>',editingToolbarAdd:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="white" stroke-width="0" stroke-linecap="round" stroke-linejoin="round"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4z" fill="currentColor"/><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10s10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8s8 3.589 8 8s-3.589 8-8 8z" fill="currentColor"/></svg>',editingToolbarDelete:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="white" stroke-width="0" stroke-linecap="round" stroke-linejoin="round"><path d="M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z" fill="var(--text-error)"/><path d="M9 10h2v8H9zm4 0h2v8h-2z" fill="var(--text-error)"/></svg>',editingToolbarReload:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="white" stroke-width="0" stroke-linecap="round" stroke-linejoin="round"><path d="M19 10H5c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-8c0-1.103-.897-2-2-2zM5 20v-8h14l.002 8H5zM5 6h14v2H5zm2-4h10v2H7z" fill="currentColor"/></svg>',"codeblock-glyph":'<svg xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path fill="currentColor" d="M20 3H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zM4 19V7h16l.002 12H4z" fill="currentColor"/><path d="M9.293 9.293L5.586 13l3.707 3.707l1.414-1.414L8.414 13l2.293-2.293zm5.414 0l-1.414 1.414L15.586 13l-2.293 2.293l1.414 1.414L18.414 13z"/></svg>',"underline-glyph":'<svg xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 1024 1024"><path fill="currentColor" d="M824 804H200c-4.4 0-8 3.4-8 7.6v60.8c0 4.2 3.6 7.6 8 7.6h624c4.4 0 8-3.4 8-7.6v-60.8c0-4.2-3.6-7.6-8-7.6zm-312-76c69.4 0 134.6-27.1 183.8-76.2C745 602.7 772 537.4 772 468V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 97-79 176-176 176s-176-79-176-176V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 69.4 27.1 134.6 76.2 183.8C377.3 701 442.6 728 512 728z"/></svg>',"superscript-glyph":'<svg xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path fill="currentColor"d="M16 7.41L11.41 12L16 16.59L14.59 18L10 13.41L5.41 18L4 16.59L8.59 12L4 7.41L5.41 6L10 10.59L14.59 6L16 7.41M21.85 9h-4.88V8l.89-.82c.76-.64 1.32-1.18 1.7-1.63c.37-.44.56-.85.57-1.23a.884.884 0 0 0-.27-.7c-.18-.19-.47-.28-.86-.29c-.31.01-.58.07-.84.17l-.66.39l-.45-1.17c.27-.22.59-.39.98-.53S18.85 2 19.32 2c.78 0 1.38.2 1.78.61c.4.39.62.93.62 1.57c-.01.56-.19 1.08-.54 1.55c-.34.48-.76.93-1.27 1.36l-.64.52v.02h2.58V9z"/></svg>',"subscript-glyph":'<svg xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7.41L11.41 12L16 16.59L14.59 18L10 13.41L5.41 18L4 16.59L8.59 12L4 7.41L5.41 6L10 10.59L14.59 6L16 7.41m5.85 13.62h-4.88v-1l.89-.8c.76-.65 1.32-1.19 1.7-1.63c.37-.44.56-.85.57-1.24a.898.898 0 0 0-.27-.7c-.18-.16-.47-.28-.86-.28c-.31 0-.58.06-.84.18l-.66.38l-.45-1.17c.27-.21.59-.39.98-.53s.82-.24 1.29-.24c.78.04 1.38.25 1.78.66c.4.41.62.93.62 1.57c-.01.56-.19 1.08-.54 1.55c-.34.47-.76.92-1.27 1.36l-.64.52v.02h2.58v1.35z"/></svg>',"bot-glyph":'<svg xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path fill="currentColor" d="M21.928 11.607c-.202-.488-.635-.605-.928-.633V8c0-1.103-.897-2-2-2h-6V4.61c.305-.274.5-.668.5-1.11a1.5 1.5 0 0 0-3 0c0 .442.195.836.5 1.11V6H5c-1.103 0-2 .897-2 2v2.997l-.082.006A1 1 0 0 0 1.99 12v2a1 1 0 0 0 1 1H3v5c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5a1 1 0 0 0 1-1v-1.938a1.006 1.006 0 0 0-.072-.455zM5 20V8h14l.001 3.996L19 12v2l.001.005l.001 5.995H5z" fill="currentColor"/><ellipse cx="8.5" cy="12" rx="1.5" ry="2" fill="currentColor"/><ellipse cx="15.5" cy="12" rx="1.5" ry="2" fill="currentColor"/><path d="M8 16h8v2H8z" fill="currentColor"/></svg>',"header-1":'<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill="currentColor"  d="M835.626667 349.397333A42.666667 42.666667 0 0 1 853.333333 384v426.666667a42.666667 42.666667 0 0 1-85.333333 0v-367.488l-71.850667 23.978666a42.666667 42.666667 0 0 1-26.965333-80.981333l128-42.666667a42.666667 42.666667 0 0 1 38.4 5.888zM128 170.666667a42.666667 42.666667 0 0 1 42.666667 42.666666v256h256V213.333333a42.666667 42.666667 0 1 1 85.333333 0v597.333334a42.666667 42.666667 0 1 1-85.333333 0v-256H170.666667v256a42.666667 42.666667 0 1 1-85.333334 0V213.333333a42.666667 42.666667 0 0 1 42.666667-42.666666z" p-id="1635"></path></svg>',"header-2":'<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M768 426.666667a85.333333 85.333333 0 0 0-85.333333 85.333333v21.333333a42.666667 42.666667 0 1 1-85.333334 0V512a170.666667 170.666667 0 0 1 170.666667-170.666667h7.338667a163.328 163.328 0 0 1 115.498666 278.869334L742.997333 768H896a42.666667 42.666667 0 1 1 0 85.333333h-256a42.666667 42.666667 0 0 1-30.165333-72.832l220.672-220.672A77.994667 77.994667 0 0 0 775.338667 426.666667H768zM128 170.666667a42.666667 42.666667 0 0 1 42.666667 42.666666v256h256V213.333333a42.666667 42.666667 0 1 1 85.333333 0v597.333334a42.666667 42.666667 0 1 1-85.333333 0v-256H170.666667v256a42.666667 42.666667 0 1 1-85.333334 0V213.333333a42.666667 42.666667 0 0 1 42.666667-42.666666z" p-id="1791"></path></svg>',"header-3":'<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M597.333333 384a42.666667 42.666667 0 0 1 42.666667-42.666667h256a42.666667 42.666667 0 0 1 30.165333 72.832l-105.941333 105.984A170.752 170.752 0 0 1 768 853.333333a170.666667 170.666667 0 0 1-160.938667-113.877333 42.666667 42.666667 0 0 1 80.469334-28.373333A85.333333 85.333333 0 1 0 768 597.333333h-42.666667a42.666667 42.666667 0 0 1-30.165333-72.832L793.002667 426.666667H640a42.666667 42.666667 0 0 1-42.666667-42.666667zM128 170.666667a42.666667 42.666667 0 0 1 42.666667 42.666666v256h256V213.333333a42.666667 42.666667 0 1 1 85.333333 0v597.333334a42.666667 42.666667 0 1 1-85.333333 0v-256H170.666667v256a42.666667 42.666667 0 1 1-85.333334 0V213.333333a42.666667 42.666667 0 0 1 42.666667-42.666666z" p-id="1949"></path></svg>',"header-4":'<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M780.714667 343.296a42.666667 42.666667 0 0 1 28.032 53.418667L719.36 682.666667H896a42.666667 42.666667 0 1 1 0 85.333333h-234.666667a42.666667 42.666667 0 0 1-40.704-55.381333l106.666667-341.333334a42.666667 42.666667 0 0 1 53.418667-27.989333z" p-id="2107"></path><path d="M853.333333 554.666667a42.666667 42.666667 0 0 1 42.666667 42.666666v213.333334a42.666667 42.666667 0 1 1-85.333333 0v-213.333334a42.666667 42.666667 0 0 1 42.666666-42.666666zM128 170.666667a42.666667 42.666667 0 0 1 42.666667 42.666666v256h256V213.333333a42.666667 42.666667 0 1 1 85.333333 0v597.333334a42.666667 42.666667 0 1 1-85.333333 0v-256H170.666667v256a42.666667 42.666667 0 1 1-85.333334 0V213.333333a42.666667 42.666667 0 0 1 42.666667-42.666666z" p-id="2108"></path></svg>',"header-5":'\n  <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M683.946667 373.674667A42.666667 42.666667 0 0 1 725.333333 341.333333h170.666667a42.666667 42.666667 0 1 1 0 85.333334h-137.301333l-22.016 88.234666A170.666667 170.666667 0 1 1 640 795.562667a42.666667 42.666667 0 1 1 64-56.448 85.333333 85.333333 0 1 0 0-112.896 42.666667 42.666667 0 0 1-73.386667-38.528l53.333334-214.016zM128 170.666667a42.666667 42.666667 0 0 1 42.666667 42.666666v256h256V213.333333a42.666667 42.666667 0 1 1 85.333333 0v597.333334a42.666667 42.666667 0 1 1-85.333333 0v-256H170.666667v256a42.666667 42.666667 0 1 1-85.333334 0V213.333333a42.666667 42.666667 0 0 1 42.666667-42.666666z" p-id="2264"></path></svg>',"header-6":'<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M831.274667 303.957333a42.666667 42.666667 0 0 1 16.725333 57.984l-83.498667 151.466667a170.453333 170.453333 0 0 1 88.746667 22.741333 169.557333 169.557333 0 0 1 62.506667 232.277334 171.093333 171.093333 0 0 1-232.96 62.165333 169.557333 169.557333 0 0 1-62.805334-231.850667l153.301334-278.016a42.666667 42.666667 0 0 1 57.984-16.768z m-20.48 306.176a85.76 85.76 0 0 0-116.736 31.018667 84.224 84.224 0 0 0 31.189333 115.456 85.76 85.76 0 0 0 116.736-31.018667 84.224 84.224 0 0 0-31.232-115.456zM128 170.666667a42.666667 42.666667 0 0 1 42.666667 42.666666v256h256V213.333333a42.666667 42.666667 0 1 1 85.333333 0v597.333334a42.666667 42.666667 0 1 1-85.333333 0v-256H170.666667v256a42.666667 42.666667 0 1 1-85.333334 0V213.333333a42.666667 42.666667 0 0 1 42.666667-42.666666z" p-id="2422"></path></svg>',"header-n":'<svg  viewBox="0 0 24 24" ><path d="M2 3a1 1 0 0 0-1 1v16a1 1 0 1 0 2 0v-7h9v7a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v7H3V4a1 1 0 0 0-1-1Zm14 9a1 1 0 0 1 1.984-.177 4.099 4.099 0 0 1 1.757-.576 3.447 3.447 0 0 1 3.759 3.432V20a1 1 0 1 1-2 0v-5.32c0-.851-.73-1.519-1.578-1.442A2.114 2.114 0 0 0 18 15.344V20a1 1 0 1 1-2 0v-8Z" fill="currentColor"></path></svg>',obsidian:'<svg viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" class="logo-wireframe"><path d="M 30.91 17.52 L 34.43 35.7 M 61.44 14.41 L 62.61 0 M 34.43 35.7 L 37.57 90.47 M 81 26.39 L 61.44 14.41 L 34.43 35.7 L 65.35 100 M 62.61 0 L 30.91 17.52 L 18 45.45 L 37.57 90.47 L 65.35 100 L 70.44 89.8 L 81 26.39 L 62.61 0 Z"></path></svg>',"obsidian-new":'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#A88BFA" d="m6.91927 14.5955c.64053-.1907 1.67255-.4839 2.85923-.5565-.71191-1.7968-.88376-3.3691-.74554-4.76905.15962-1.61678.72977-2.9662 1.28554-4.11442.1186-.24501.2326-.47313.3419-.69198.1549-.30984.3004-.60109.4365-.8953.2266-.48978.3948-.92231.4798-1.32416.0836-.39515.0841-.74806-.0148-1.08657-.099-.338982-.3093-.703864-.7093-1.1038132-.5222-.1353116-1.1017-.0165173-1.53613.3742922l-5.15591 4.638241c-.28758.25871-.47636.60929-.53406.99179l-.44455 2.94723c.69903.6179 2.42435 2.41414 3.47374 4.90644.09364.2224.1819.4505.26358.6838z"></path><path fill="#A88BFA" d="m2.97347 10.3512c-.02431.1037-.05852.205-.10221.3024l-2.724986 6.0735c-.279882.6238-.15095061 1.3552.325357 1.8457l4.288349 4.4163c2.1899-3.2306 1.87062-6.2699.87032-8.6457-.75846-1.8013-1.90801-3.2112-2.65683-3.9922z"></path><path fill="#A88BFA" d="m5.7507 23.5094c.07515.012.15135.0192.2281.0215.81383.0244 2.18251.0952 3.29249.2997.90551.1669 2.70051.6687 4.17761 1.1005 1.1271.3294 2.2886-.5707 2.4522-1.7336.1192-.8481.343-1.8075.7553-2.6869l-.0095.0033c-.6982-1.9471-1.5865-3.2044-2.5178-4.0073-.9284-.8004-1.928-1.1738-2.8932-1.3095-1.60474-.2257-3.07497.1961-4.00103.4682.55465 2.3107.38396 5.0295-1.48417 7.8441z"></path><path fill="#A88BFA" d="m17.3708 19.3102c.9267-1.3985 1.5868-2.4862 1.9352-3.0758.1742-.295.1427-.6648-.0638-.9383-.5377-.7126-1.5666-2.1607-2.1272-3.5015-.5764-1.3785-.6624-3.51876-.6673-4.56119-.0019-.39626-.1275-.78328-.3726-1.09465l-3.3311-4.23183c-.0117.19075-.0392.37998-.0788.56747-.1109.52394-.32 1.04552-.5585 1.56101-.1398.30214-.3014.62583-.4646.95284-.1086.21764-.218.4368-.3222.652-.5385 1.11265-1.0397 2.32011-1.1797 3.73901-.1299 1.31514.0478 2.84484.8484 4.67094.1333.0113.2675.0262.4023.0452 1.1488.1615 2.3546.6115 3.4647 1.5685.9541.8226 1.8163 2.0012 2.5152 3.6463z"></path></svg>'};class so{constructor(t){this.plugin=t}init(){this.statusBarIcon=this.plugin.addStatusBarItem(),this.statusBarIcon.addClass("editingToolbar-statusbar-button"),t.setIcon(this.statusBarIcon,"editingToolbar"),this.registerClickEvent()}registerClickEvent(){this.plugin.registerDomEvent(this.statusBarIcon,"click",(()=>{const t=this.statusBarIcon.parentElement.getBoundingClientRect(),e=this.statusBarIcon.getBoundingClientRect();this.showMenu(e,t)}))}showMenu(e,o){const i=new t.Menu;i.addSections(["settings"]),this.addVisibilityToggle(i),this.addAestheticStyleToggle(i),i.addSections(["viewType"]),this.addViewTypeToggle(i),i.addSections(["controls"]),this.addToolbarControls(i);i.dom.addClass("editingToolbar-statusbar-menu"),i.showAtPosition({x:e.right+5,y:o.top-5})}addVisibilityToggle(o){o.addItem((o=>{o.setTitle(f("Hide & Show")),!t.requireApiVersion("0.15.0")||o.setSection("settings");const i=o.dom,n=new t.ToggleComponent(i).setValue(this.plugin.settings.cMenuVisibility).setDisabled(!0),s=()=>e(this,void 0,void 0,(function*(){this.plugin.settings.cMenuVisibility=!this.plugin.settings.cMenuVisibility,n.setValue(this.plugin.settings.cMenuVisibility),1==this.plugin.settings.cMenuVisibility?setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100):c(this.plugin.settings.cMenuVisibility),q(),yield this.plugin.saveSettings()}));o.onClick((t=>{t.preventDefault(),t.stopImmediatePropagation(),s()}))})),o.addItem((o=>{o.setTitle(f("Toolbar Position")),!t.requireApiVersion("0.15.0")||o.setSection("settings"),o.setIcon("dock");const i=o.setSubmenu();["top","fixed","following"].forEach((t=>{i.addItem((o=>{o.setTitle(t),o.setIcon(this.plugin.positionStyle===t?"check":""),o.onClick((()=>e(this,void 0,void 0,(function*(){this.plugin.settings.positionStyle=t,yield this.plugin.saveSettings(),this.plugin.onPositionStyleChange(t)}))))}))}))}))}addViewTypeToggle(o){const i=this.plugin.app.workspace.getActiveViewOfType(t.ItemView);if(!i)return;const n=i.getViewType();o.addItem((o=>{o.setTitle(f("Current View: ")+n),!t.requireApiVersion("0.15.0")||o.setSection("settings"),o.setIcon("layout-template");const s=o.setSubmenu(),a=E.isAllowedViewType(i);s.addItem((t=>{t.setTitle(f(a?"Disable toolbar for this view":"Enable toolbar for this view")),t.setIcon(a?"eye-off":"eye"),t.onClick((()=>e(this,void 0,void 0,(function*(){this.plugin.settings.viewTypeSettings||(this.plugin.settings.viewTypeSettings={}),this.plugin.settings.viewTypeSettings[n]=!a,yield this.plugin.saveSettings(),q(),setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100)}))))})),s.addItem((t=>{t.setTitle(f("Manage all view types")),t.setIcon("settings-2");const o=t.setSubmenu(),i=new Set(["markdown","canvas","thino_view","meld-encrypted-view",...Object.keys(this.plugin.settings.viewTypeSettings||{})]);Array.from(i).sort().forEach((t=>{const i=this.isViewTypeAllowed(t);o.addItem((o=>{o.setTitle(t),o.setIcon(i?"check":""),o.onClick((()=>e(this,void 0,void 0,(function*(){this.plugin.settings.viewTypeSettings||(this.plugin.settings.viewTypeSettings={}),this.plugin.settings.viewTypeSettings[t]=!i,n===t&&(q(),setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100)),yield this.plugin.saveSettings()}))))}))}))}))}))}isViewTypeAllowed(t){if(!this.plugin.settings.viewTypeSettings||void 0===this.plugin.settings.viewTypeSettings[t]){return["markdown","canvas","thino_view","meld-encrypted-view"].includes(t)}return this.plugin.settings.viewTypeSettings[t]}addToolbarControls(e){const o=[{icon:"plus",title:f("Add Command"),click:()=>new v(this.plugin).open()}];"fixed"===this.plugin.positionStyle&&o.push({icon:"file-sliders",title:f("Position Settings"),click:()=>new w(this.plugin.app,this.plugin).open()}),o.forEach((o=>{e.addItem((e=>{e.setIcon(o.icon),e.setTitle(o.title),e.onClick(o.click),t.requireApiVersion("0.15.0")&&e.setSection("controls")}))}))}addAestheticStyleToggle(o){o.addItem((o=>{o.setTitle(f("Appearance Style")),!t.requireApiVersion("0.15.0")||o.setSection("settings"),o.setIcon("cherry");const i=o.setSubmenu();k.forEach((t=>{i.addItem((o=>{o.setTitle(t),o.setIcon(this.plugin.settings.aestheticStyle===t?"check":""),o.onClick((()=>e(this,void 0,void 0,(function*(){this.plugin.settings.aestheticStyle=t,yield this.plugin.saveSettings(),q(),setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100)}))))}))}))}))}}let ao,ro;class lo extends t.Modal{constructor(t){super(t.app),this.plugin=t,this.type="note",this.title="",this.content="",this.collapse="none",this.calloutTypes=[{type:"note",aliases:["cite"],icon:"lucide-pencil",label:"Note",color:"var(--callout-default)"},{type:"abstract",aliases:["summary","tldr"],icon:"lucide-clipboard-list",label:"Abstract",color:"var(--callout-summary)"},{type:"info",aliases:[],icon:"lucide-info",label:"Info",color:"var(--callout-info)"},{type:"todo",aliases:[],icon:"lucide-check-circle-2",label:"Todo",color:"var(--callout-todo)"},{type:"important",aliases:[],icon:"lucide-flame",label:"Important",color:"var(--callout-important)"},{type:"tip",aliases:["hint"],icon:"lucide-flame",label:"Tip",color:"var(--callout-tip)"},{type:"success",aliases:["check","done"],icon:"lucide-check",label:"Success",color:"var(--callout-success)"},{type:"question",aliases:["help","faq"],icon:"help-circle",label:"Question",color:"var(--callout-question)"},{type:"warning",aliases:["caution","attention"],icon:"lucide-alert-triangle",label:"Warning",color:"var(--callout-warning)"},{type:"failure",aliases:["fail","missing"],icon:"lucide-x",label:"Failure",color:"var(--callout-fail)"},{type:"danger",aliases:["error"],icon:"lucide-zap",label:"Danger",color:"var(--callout-error)"},{type:"bug",aliases:[],icon:"lucide-bug",label:"Bug",color:"var(--callout-bug)"},{type:"example",aliases:[],icon:"lucide-list",label:"Example",color:"var(--callout-example)"},{type:"quote",aliases:["cite"],icon:"quote-glyph",label:"Quote",color:"var(--callout-quote)"}],this.containerEl.addClass("insert-callout-modal");const e=this.plugin.commandsManager.getActiveEditor();if(e){const t=e.getSelection();t&&(this.content=t)}}onOpen(){this.display()}display(){return e(this,void 0,void 0,(function*(){const{contentEl:e}=this;e.empty(),e.addEventListener("keydown",(t=>{"Enter"===t.key&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.insertButton&&this.insertButton.click())}));const o=e.createDiv("callout-type-container");new t.Setting(o).setName(f("Callout Type")).addDropdown((t=>{this.calloutTypes.forEach((({type:e,aliases:o,label:i})=>{t.addOption(e,i),o.forEach((e=>{t.addOption(e,`${i} (${e})`)}))})),t.setValue(this.type),t.onChange((t=>{this.type=t,this.updateIconAndColor(i,t)}))}));const i=o.createDiv("callout-icon-container");this.updateIconAndColor(i,this.type),new t.Setting(e).setName(f("Title")).setDesc(f("Optional, leave blank for default title")).addText((t=>{t.setPlaceholder(f("Input title")).setValue(this.title).onChange((t=>{this.title=t}))})),new t.Setting(e).setName(f("Collapse State")).addDropdown((t=>{t.addOption("none",f("Default")).addOption("open",f("Open")).addOption("closed",f("Closed")).setValue(this.collapse).onChange((t=>{this.collapse=t}))})),new t.Setting(e).setName(f("Content")).addTextArea((t=>{t.setPlaceholder(f("Input content")).setValue(this.content).onChange((t=>{this.content=t})),t.inputEl.rows=5,t.inputEl.cols=40,this.contentTextArea=t.inputEl}));const n=e.createDiv("shortcut-hint");n.setText(`${t.Platform.isMacOS?"⌘":"Ctrl"} + Enter ${f("to insert")}`),n.style.textAlign="right",n.style.fontSize="0.8em",n.style.opacity="0.7",n.style.marginTop="5px",new t.Setting(e).addButton((t=>(t.setButtonText(f("Insert")).setCta().onClick((()=>{this.insertCallout(),this.close()})),this.insertButton=t.buttonEl,t))).addButton((t=>(t.setButtonText(f("Cancel")).setTooltip(f("Cancel")).onClick((()=>this.close())),t))),setTimeout((()=>{this.contentTextArea&&this.contentTextArea.focus()}),10)}))}updateIconAndColor(e,o){const i=this.calloutTypes.find((t=>t.type===o||t.aliases.includes(o)));i&&(e.empty(),t.setIcon(e,i.icon),e.style.setProperty("--callout-color",i.color))}insertCallout(){const t=this.plugin.commandsManager.getActiveEditor();if(!t)return;let e=`> [!${this.type}]`;"none"!==this.collapse&&(e+=""+("open"===this.collapse?"+":"-")),this.title&&(e+=` ${this.title}`),e+=`\n> ${this.content.replace(/\n/g,"\n> ")}`;const o=t.getCursor(),i=t.getLine(o.line),n=0===o.ch;let s;if(t.getSelection()){!n&&i.trim().length>0&&(e="\n"+e);const o=t.getCursor("from");t.replaceSelection(e);const a=e.split("\n").length;s={line:o.line+a,ch:0}}else{!n&&i.trim().length>0&&(e="\n"+e),t.replaceRange(e,o);const a=e.split("\n").length;s={line:o.line+a,ch:0}}setTimeout((()=>{t.replaceRange("\n",s),t.setCursor({line:s.line+1,ch:0}),t.focus()}),0)}}class co extends t.Modal{constructor(t){super(t.app),this.plugin=t,this.linkText="",this.linkUrl="",this.linkAlias="",this.isEmbed=!1,this.insertNewLine=!1,this.imageWidth="",this.imageHeight="",this.prefixText="",this.suffixText="",this.selectedText="";const e=this.plugin.commandsManager.getActiveEditor();if(e){const t=e.getSelection()||"";t?(this.selectedText=t,this.parseSelectedText(t)):this.parseClipboard()}else this.parseClipboard();this.updateHeader()}parseSelectedText(t){const e=t.match(/!\[.*?\]\(.*?\)/);if(e){const o=t.substring(0,e.index),i=t.substring(e.index+e[0].length),n=this.parseMarkdownImageLink(t);if(n)return this.linkText=n.title,this.linkUrl=n.url,this.imageWidth=n.width||"",this.imageHeight=n.height||"",this.isEmbed=!0,this.prefixText=o,void(this.suffixText=i)}const o=t.match(/\[.*?\]\(.*?\)/);if(o){const e=o[0],i=t.substring(0,o.index),n=t.substring(o.index+e.length),s=this.parseMarkdownLink(e);s&&(this.linkText=s.title,this.linkUrl=s.url,this.linkAlias=s.alias||"",this.isEmbed=!1),this.prefixText=i,this.suffixText=n}else{const e=this.parseMixedContent(t);e&&(this.linkText=e.title,this.linkUrl=e.url)}}parseMixedContent(t){let e;return(e=t.match(/^\[(.*?)\]\((.*?)\)$/))?{title:e[1].trim(),url:e[2].trim()}:(e=t.match(/<a[^>]+href=["']([^"']+)["'][^>]*>([^<]+)<\/a>/i))?{title:e[2].trim(),url:e[1].trim()}:(e=t.match(/^(.*?)\s*((?:https?:\/\/|www\.)\S+)$/i))&&e[1].trim()?{title:e[1].trim(),url:e[2].trim()}:this.isValidUrl(t.trim())?{title:this.extractTitleFromUrl(t.trim()),url:t.trim()}:{title:t.trim(),url:""}}extractTitleFromUrl(t){const e=t.match(/^([a-zA-Z]+):\/\/(.+)$/);if(e){const[,t,o]=e,i=o.split(/[/\\]/),n=i[i.length-1];return n?decodeURIComponent(n).trim():t.toUpperCase()}const o=t.match(/^\[\[(.*?)\]\]$/);if(o)return o[1];const i=t.match(/[^/\\]+$/);return i?i[0].replace(/\.[^/.]+$/,"").replace(/[-_]/g," ").trim():t}isValidUrl(t){if(!t||t.includes("\n")||/\s/.test(t))return!1;if(["obsidian://","zotero://","evernote://","notion://","bear://","things://","drafts://","x-devonthink-item://","file://","ftp://","ftps://","http://","https://","tel:","mailto:"].some((e=>t.startsWith(e))))return!0;if(t.match(/^\[\[.*?\]\]$/))return!0;if(t.match(/^[./\\]/)||t.match(/^[a-zA-Z]:\\/)||t.match(/^\/[^/]/)||t.match(/^[a-zA-Z]+:\/\//))return!0;try{return new URL(t),!0}catch(t){return!1}}parseMarkdownImageLink(t){const e=t.match(/!\[(.*?)(?:\|(\d+)(?:x(\d+))?)?\]\(([^)]+)\)(?:!.*)?$/);if(e){const[,t,o,i,n]=e;if(this.isEmbed=!0,this.embedToggle){this.embedToggle.setValue(!0);const t=this.contentEl.querySelector(".image-size-setting");t&&(t.style.display="block")}return{title:t.trim(),url:n.trim(),width:o,height:i}}return null}parseMarkdownLink(t){const e=t.match(/\[(.*?)(?:\|(.*?))?\]\(([^)]+)\)/);if(e){const[,t,o,i]=e;return{title:t.trim(),url:i.trim(),alias:null==o?void 0:o.trim()}}return null}parseClipboard(){return e(this,void 0,void 0,(function*(){try{const t=yield this.readClipboard(),e=t["text/plain"];if(e){const t=this.parseMarkdownImageLink(e);if(t)return this.linkText=t.title,this.linkUrl=t.url,(t.width||t.height)&&(this.isEmbed=!0,this.imageWidth=t.width||"",this.imageHeight=t.height||""),void this.updateUI();const o=this.parseMarkdownLink(e);if(o)return this.linkText=o.title,this.linkUrl=o.url,this.linkAlias=o.alias||"",this.isEmbed=!1,void this.updateUI()}if(t["text/html"]){const e=this.parseHtmlContent(t["text/html"]);e&&(this.linkText=this.linkText||e.title,this.linkUrl=e.url)}else if(t["text/markdown"]){const e=this.parseMarkdownContent(t["text/markdown"]);e&&(this.linkText=this.linkText||e.title,this.linkUrl=e.url)}else if(t["text/plain"]){const e=this.parseMixedContent(t["text/plain"]);e&&(this.linkText=this.linkText||e.title,this.linkUrl=e.url)}this.updateUI()}catch(t){console.error("Failed to read clipboard:",t)}}))}readClipboard(){return e(this,void 0,void 0,(function*(){const t={};try{const e=yield navigator.clipboard.read();for(const o of e){const e=o.types;for(const i of e)if("text/html"===i||"text/plain"===i||"text/markdown"===i){const e=yield o.getType(i);t[i]=yield e.text()}}}catch(e){try{const e=yield navigator.clipboard.readText();t["text/plain"]=e}catch(t){console.error("Failed to read clipboard:",t)}}return t}))}parseHtmlContent(t){var e;const o=(new DOMParser).parseFromString(t,"text/html"),i=o.querySelector("a");if(i)return{title:(null===(e=i.textContent)||void 0===e?void 0:e.trim())||"",url:i.href};const n=o.body.textContent||"";return this.parseMixedContent(n)}parseMarkdownContent(t){const e=t.match(/\[([^\]]+)\]\(([^)]+)\)/);return e?{title:e[1].trim(),url:e[2].trim()}:this.parseMixedContent(t)}onOpen(){this.display()}updateHeader(){const t=this.getPreviewText();this.previewSetting&&(this.previewSetting.controlEl.querySelector("input").value=t)}getPreviewText(){const t=this.linkText||"",e=this.linkUrl;let o=this.isEmbed?"!":"";return o+=`[${t}`,this.isEmbed&&(this.imageWidth||this.imageHeight)?(o+="|",this.imageWidth&&this.imageHeight?o+=`${this.imageWidth}x${this.imageHeight}`:this.imageWidth?o+=this.imageWidth:this.imageHeight&&(o+=`x${this.imageHeight}`)):!this.isEmbed&&this.linkAlias&&(o+=`|${this.linkAlias}`),o+=`](${e})`,o}display(){return e(this,void 0,void 0,(function*(){const{contentEl:o}=this;o.empty(),o.addClass("insert-link-modal"),this.titleEl.textContent="",this.titleEl.addClass("insert-link-modal-title"),o.addEventListener("keydown",(t=>{"Enter"===t.key&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.insertButton&&this.insertButton.click())}));const i=new t.Setting(o).setName(f("Link Text")).addText((t=>{this.linkTextInput=t,t.setPlaceholder(f("Link Text")).setValue(this.linkText).onChange((t=>{this.linkText=t,this.updateHeader()}))})),n=new t.Setting(i.controlEl).setName(f("Alias")).addText((t=>{this.linkAliasInput=t,t.setPlaceholder(f("Link Alias(optional)")).setValue(this.linkAlias).onChange((t=>{this.linkAlias=t,this.updateHeader()}))})),s=new t.Setting(o).setName(f("Link URL")).setClass("link-url-setting").addText((t=>{this.linkUrlInput=t,t.setPlaceholder(f("Link URL")).setValue(this.linkUrl).onChange((t=>{this.linkUrl=t.trim(),this.validateUrl(this.linkUrl),this.updateHeader()}))})).addButton((t=>{t.setIcon("lucide-clipboard").setTooltip(f("Paste and Parse")).onClick((()=>e(this,void 0,void 0,(function*(){yield this.parseClipboard(),this.updateHeader()}))))}));this.urlErrorMsg=s.descEl.createDiv("url-error"),this.urlErrorMsg.style.color="var(--text-error)",this.urlErrorMsg.style.display="none";const a=new t.Setting(o).setName(f("Embed Content")).setDesc(f("If it is an image, turn on"));this.embedToggle=new t.ToggleComponent(a.controlEl),this.embedToggle.setValue(this.isEmbed).onChange((t=>{this.isEmbed=t;const e=o.querySelector(".image-size-setting"),i=n.settingEl;e&&(e.style.display=t?"flex":"none"),i&&(i.style.display=t?"none":"flex"),this.updateHeader()}));new t.Setting(o).setClass("image-size-setting").setName(f("Image Size")).addText((t=>{t.inputEl.addClass("image-width-input"),t.setPlaceholder(f("Image Width")).setValue(this.imageWidth).onChange((e=>{this.imageWidth=e.replace(/[^\d]/g,""),t.setValue(this.imageWidth),this.updateHeader()}))})).addText((t=>{t.inputEl.addClass("image-height-input"),t.setPlaceholder(f("Image Height")).setValue(this.imageHeight).onChange((e=>{this.imageHeight=e.replace(/[^\d]/g,""),t.setValue(this.imageHeight),this.updateHeader()}))})).settingEl.style.display=this.isEmbed?"block":"none",new t.Setting(o).setName(f("Insert New Line")).setDesc(f("Insert a link on the next line")).addToggle((t=>{t.setValue(this.insertNewLine).onChange((t=>{this.insertNewLine=t,this.updateHeader()}))})),this.previewSetting=new t.Setting(o).setClass("preview-setting").addText((t=>{t.setValue(this.getPreviewText()).inputEl.setAttribute("readonly","true")}));const r=o.createDiv("shortcut-hint");r.setText(`${t.Platform.isMacOS?"⌘":"Ctrl"} + Enter ${f("to insert")}`),r.style.textAlign="right",r.style.fontSize="0.8em",r.style.opacity="0.7",r.style.marginTop="5px",new t.Setting(o).addButton((t=>{t.setButtonText(f("Insert")).setCta().onClick((()=>{this.insertLink(),this.close()})),this.insertButton=t.buttonEl})).addButton((t=>t.setButtonText(f("Cancel")).onClick((()=>{this.close()})))),setTimeout((()=>{this.linkText||this.linkUrl?!this.linkText&&this.linkUrl?this.linkTextInput.inputEl.focus():this.linkText&&!this.linkUrl?this.linkUrlInput.inputEl.focus():this.linkAliasInput.inputEl.focus():this.linkTextInput.inputEl.focus()}),10)}))}validateUrl(t){return t?this.isValidUrl(t)?(this.urlErrorMsg.style.display="none",!0):(this.urlErrorMsg.textContent=f("URL Format Error"),this.urlErrorMsg.style.display="block",!1):(this.urlErrorMsg.style.display="none",!0)}insertLink(){if(!this.validateUrl(this.linkUrl))return;const t=this.plugin.commandsManager.getActiveEditor();if(!t)return;let e=this.linkText||this.linkUrl;const o=this.linkUrl;let i,n=this.isEmbed?"!":"";n+=`[${e}`,this.isEmbed&&(this.imageWidth||this.imageHeight)?(n+="|",this.imageWidth&&this.imageHeight?n+=`${this.imageWidth}x${this.imageHeight}`:this.imageWidth?n+=this.imageWidth:this.imageHeight&&(n+=`x${this.imageHeight}`)):!this.isEmbed&&this.linkAlias&&(n+=`|${this.linkAlias}`),n+=`](${o})`;if(t.somethingSelected()){const e=t.getCursor("from"),o=t.getCursor("to");if(this.insertNewLine)t.replaceRange("\n"+n,{line:o.line,ch:t.getLine(o.line).length}),i={line:o.line+1,ch:n.length};else{const s=this.prefixText+n+this.suffixText;t.replaceRange(s,{line:e.line,ch:0},o),i={line:e.line,ch:this.prefixText.length+n.length}}}else{const e=t.getCursor(),o=t.getLine(e.line);if(this.insertNewLine){const s=e.line+1;t.replaceRange("\n",{line:e.line,ch:o.length}),t.setCursor({line:s,ch:0}),t.replaceRange(n,{line:s,ch:0}),i={line:s,ch:n.length}}else t.replaceRange(n,e),i={line:e.line,ch:e.ch+n.length}}setTimeout((()=>{i&&t.setCursor(i),t.focus()}),0)}updateUI(){this.linkTextInput&&this.linkTextInput.setValue(this.linkText),this.linkUrlInput&&(this.linkUrlInput.setValue(this.linkUrl),this.validateUrl(this.linkUrl));const t=this.contentEl.querySelector(".image-width-input"),e=this.contentEl.querySelector(".image-height-input");t&&(t.value=this.imageWidth),e&&(e.value=this.imageHeight),this.linkAliasInput&&this.linkAliasInput.setValue(this.linkAlias);const o=this.contentEl.querySelector(".setting-item:nth-child(2)");o&&(o.style.display=this.isEmbed?"none":"flex"),this.updateHeader()}}class uo{constructor(t){this.executeCommandWithoutBlur=(t,o)=>e(this,void 0,void 0,(function*(){t&&(yield o(),t.focus())})),this._commandsMap={hrline:{char:5,line:1,prefix:"\n---",suffix:"\n",islinehead:!0},justify:{char:0,line:0,prefix:'<p align="justify">',suffix:"</p>",islinehead:!1},left:{char:0,line:0,prefix:'<p align="left">',suffix:"</p>",islinehead:!1},right:{char:0,line:0,prefix:'<p align="right">',suffix:"</p>",islinehead:!1},center:{char:0,line:0,prefix:"<center>",suffix:"</center>",islinehead:!1},underline:{char:0,line:0,prefix:"<u>",suffix:"</u>",islinehead:!1},superscript:{char:0,line:0,prefix:"<sup>",suffix:"</sup>",islinehead:!1},subscript:{char:0,line:0,prefix:"<sub>",suffix:"</sub>",islinehead:!1},codeblock:{char:4,line:0,prefix:"\n```\n",suffix:"\n```\n",islinehead:!1}},this.modCommands=[{id:"editor:insert-embed",name:"Add embed",icon:"note-glyph"},{id:"editor:insert-link",name:"Insert markdown link",icon:"link-glyph"},{id:"editor:insert-tag",name:"Add tag",icon:"price-tag-glyph"},{id:"editor:insert-wikilink",name:"Add internal link",icon:"bracket-glyph"},{id:"editor:toggle-code",name:"Code",icon:"code-glyph"},{id:"editor:toggle-blockquote",name:"Blockquote",icon:"lucide-text-quote"},{id:"editor:toggle-checklist-status",name:"Checklist status",icon:"checkbox-glyph"},{id:"editor:toggle-comments",name:"Comment",icon:"percent-sign-glyph"},{id:"editor:insert-callout",name:"Insert Callout",icon:"lucide-quote"},{id:"editor:insert-mathblock",name:"MathBlock",icon:"lucide-sigma-square"},{id:"editor:insert-table",name:"Insert Table",icon:"lucide-table"},{id:"editor:swap-line-up",name:"Swap line up",icon:"lucide-corner-right-up"},{id:"editor:swap-line-down",name:"Swap line down",icon:"lucide-corner-right-down"},{id:"editor:attach-file",name:"Attach file",icon:"lucide-paperclip"},{id:"editor:clear-formatting",name:"Clear formatting",icon:"lucide-eraser"}],this.applyCommand=(t,e)=>{const o=e.getSelection(),i=e.getCursor("from"),n=e.getCursor("to");let s=t.prefix;t.islinehead&&i.ch>0&&(s="\n"+s);const a=t.suffix,r={line:i.line-t.line,ch:i.ch-s.length};if(e.getRange(r,i)==s){const l={line:i.line+t.line,ch:n.ch+a.length};if(e.getRange(n,l)==a){e.replaceRange(o,r,l),e.setCursor(i.line-t.line,i.ch);const n={line:i.line,ch:i.ch-s.length},a={line:i.line,ch:n.ch+o.length};return void e.setSelection(n,a)}}if(e.replaceSelection(`${s}${o}${a}`),t.char>0)e.setCursor(i.line+t.line,i.ch+t.char+o.length);else{const t=i,n={line:t.line,ch:t.ch+s.length},a={line:t.line,ch:n.ch+o.length};e.setSelection(n,a)}},this.plugin=t}applyRegexCommand(o,i){return e(this,void 0,void 0,(function*(){try{let e=o.getSelection();const n=o.getCursor("from");o.getCursor("to");if(!e)try{const i=yield this.readClipboard();if(e=i["text/html"]?t.htmlToMarkdown(i["text/html"]):i["text/markdown"]||i["text/plain"],!e)return void new t.Notice(f("Please select text or copy text to clipboard first"));o.replaceRange(e,n,n);const s=o.offsetToPos(o.posToOffset(n)+e.length);o.setSelection(n,s)}catch(e){return console.error("读取剪贴板失败:",e),void new t.Notice(f("Please select text first"))}if(i.useCondition&&i.conditionPattern){if(!new RegExp(i.conditionPattern).test(e))return void new t.Notice(f("The selected text does not meet the condition requirements"))}let s="";!1!==i.regexGlobal&&(s+="g"),i.regexCaseInsensitive&&(s+="i"),i.regexMultiline&&(s+="m");const a=new RegExp(i.regexPattern,s),r=o.getCursor("from"),l=o.getCursor("to");o.transaction({changes:[{from:r,to:l,text:e.replace(a,i.regexReplacement)}]});const c=o.getSelection(),d=o.offsetToPos(o.posToOffset(r)),u=o.offsetToPos(o.posToOffset(r)+c.length);o.setSelection(d,u)}catch(e){console.error("正则表达式命令执行错误:",e),new t.Notice(f("Regex command execution error:")+e.message)}}))}readClipboard(){return e(this,void 0,void 0,(function*(){const t={};try{const e=yield navigator.clipboard.read();for(const o of e){const e=o.types;for(const i of e)if("text/html"===i||"text/plain"===i||"text/markdown"===i){const e=yield o.getType(i);t[i]=yield e.text()}}}catch(e){try{const e=yield navigator.clipboard.readText();t["text/plain"]=e}catch(t){console.error("读取剪贴板失败:",t)}}return t}))}getActiveEditor(){var e,o,i;const n=this.plugin.app.workspace.getActiveViewOfType(t.MarkdownView);if(n)return n.editor;const s=null===(e=this.plugin.app.workspace)||void 0===e?void 0:e.activeEditor;if(s&&s.editor)return s.editor;const a=null===(i=null===(o=this.plugin.app.workspace.activeLeaf)||void 0===o?void 0:o.view)||void 0===i?void 0:i.editor;return a||null}registerCommands(){this.plugin.addCommand({id:"hide-show-menu",name:"Hide/show ",icon:"editingToolbar",callback:()=>e(this,void 0,void 0,(function*(){this.plugin.settings.cMenuVisibility=!this.plugin.settings.cMenuVisibility,this.plugin.settings.cMenuVisibility?setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100):c(this.plugin.settings.cMenuVisibility),q(),yield this.plugin.saveSettings()}))}),this.plugin.addCommand({id:"format-eraser",name:"Format Eraser",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>R(this.plugin,t)))},icon:"eraser"}),this.plugin.addCommand({id:"change-font-color",name:"Change font color[html]",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>{var e;return a(null!==(e=this.plugin.settings.cMenuFontColor)&&void 0!==e?e:"#2DC26B",t)}))},icon:'<svg width="24" height="24" focusable="false" fill="currentColor"><g fill-rule="evenodd"><path id="change-font-color-icon" d="M3 18h18v3H3z" style="fill:#2DC26B"></path><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"></path></g></svg>'}),this.plugin.addCommand({id:"change-background-color",name:"Change Backgroundcolor[html]",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>{var e;return r(null!==(e=this.plugin.settings.cMenuBackgroundColor)&&void 0!==e?e:"#FA541C",t)}))},icon:'<svg width="18" height="24" viewBox="0 0 256 256" version="1.1" xmlns="http://www.w3.org/2000/svg"><g   stroke="none" stroke-width="1" fill="currentColor" fill-rule="evenodd"><g  ><g fill="currentColor"><g transform="translate(119.502295, 137.878331) rotate(-135.000000) translate(-119.502295, -137.878331) translate(48.002295, 31.757731)" ><path d="M100.946943,60.8084699 L43.7469427,60.8084699 C37.2852111,60.8084699 32.0469427,66.0467383 32.0469427,72.5084699 L32.0469427,118.70847 C32.0469427,125.170201 37.2852111,130.40847 43.7469427,130.40847 L100.946943,130.40847 C107.408674,130.40847 112.646943,125.170201 112.646943,118.70847 L112.646943,72.5084699 C112.646943,66.0467383 107.408674,60.8084699 100.946943,60.8084699 Z M93.646,79.808 L93.646,111.408 L51.046,111.408 L51.046,79.808 L93.646,79.808 Z" fill-rule="nonzero"></path><path d="M87.9366521,16.90916 L87.9194966,68.2000001 C87.9183543,69.4147389 86.9334998,70.399264 85.7187607,70.4 L56.9423078,70.4 C55.7272813,70.4 54.7423078,69.4150264 54.7423078,68.2 L54.7423078,39.4621057 C54.7423078,37.2523513 55.5736632,35.1234748 57.0711706,33.4985176 L76.4832996,12.4342613 C78.9534987,9.75382857 83.1289108,9.5834005 85.8093436,12.0535996 C87.1658473,13.303709 87.9372691,15.0644715 87.9366521,16.90916 Z" fill-rule="evenodd"></path><path d="M131.3,111.241199 L11.7,111.241199 C5.23826843,111.241199 0,116.479467 0,122.941199 L0,200.541199 C0,207.002931 5.23826843,212.241199 11.7,212.241199 L131.3,212.241199 C137.761732,212.241199 143,207.002931 143,200.541199 L143,122.941199 C143,116.479467 137.761732,111.241199 131.3,111.241199 Z M124,130.241 L124,193.241 L19,193.241 L19,130.241 L124,130.241 Z" fill-rule="nonzero"></path></g></g><path d="M51,218 L205,218 C211.075132,218 216,222.924868 216,229 C216,235.075132 211.075132,240 205,240 L51,240 C44.9248678,240 40,235.075132 40,229 C40,222.924868 44.9248678,218 51,218 Z" id="change-background-color-icon" style="fill:#FA541C"></path></g></g></svg>'}),this.plugin.addCommand({id:"indent-list",name:"Indent list",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>null==t?void 0:t.indentList()))},icon:"indent-glyph"}),this.plugin.addCommand({id:"undent-list",name:"Unindent list",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>null==t?void 0:t.unindentList()))},icon:"unindent-glyph"}),this.plugin.addCommand({id:"toggle-numbered-list",name:"Numbered list",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>null==t?void 0:t.toggleNumberList()))},icon:"number-list-glyph"}),this.plugin.addCommand({id:"toggle-bullet-list",name:"bullet list",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>null==t?void 0:t.toggleBulletList()))},icon:"bullet-list-glyph"}),this.plugin.addCommand({id:"toggle-highlight",name:"highlight",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>null==t?void 0:t.toggleMarkdownFormatting("highlight")))},icon:"highlight-glyph"}),this.plugin.addCommand({id:"toggle-bold",name:"Bold",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>{t.toggleMarkdownFormatting("bold")}))},icon:"bold-glyph"}),this.plugin.addCommand({id:"toggle-italics",name:"Italics",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>null==t?void 0:t.toggleMarkdownFormatting("italic")))},icon:"italic-glyph"}),this.plugin.addCommand({id:"toggle-strikethrough",name:"Strikethrough",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>null==t?void 0:t.toggleMarkdownFormatting("strikethrough")))},icon:"strikethrough-glyph"}),this.plugin.addCommand({id:"toggle-inline-math",name:"Inline math",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>null==t?void 0:t.toggleMarkdownFormatting("math")))},icon:"lucide-sigma"}),this.plugin.addCommand({id:"editor:cycle-list-checklist",name:"Cycle list checklist",icon:"lucide-check-square",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>null==t?void 0:t.toggleCheckList(!0)))}}),this.plugin.addCommand({id:"editor-undo",name:"Undo editor",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>null==t?void 0:t.undo()))},icon:"undo-glyph"}),this.plugin.addCommand({id:"editor-redo",name:"Redo editor",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>null==t?void 0:t.redo()))},icon:"redo-glyph"}),this.plugin.addCommand({id:"editor-copy",name:"Copy editor",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>e(this,void 0,void 0,(function*(){try{yield window.navigator.clipboard.writeText(t.getSelection()),this.plugin.app.commands.executeCommandById("editor:focus")}catch(t){console.error("Copy failed:",t)}}))))},icon:"lucide-copy"}),this.plugin.addCommand({id:"editor-paste",name:"Paste editor",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>e(this,void 0,void 0,(function*(){try{const e=yield window.navigator.clipboard.readText();e&&t.replaceSelection(e),this.plugin.app.commands.executeCommandById("editor:focus")}catch(t){console.error("Paste failed:",t)}}))))},icon:"lucide-clipboard-type"}),this.plugin.addCommand({id:"editor-cut",name:"Cut editor",callback:()=>{const t=this.getActiveEditor();t&&this.executeCommandWithoutBlur(t,(()=>e(this,void 0,void 0,(function*(){try{yield window.navigator.clipboard.writeText(t.getSelection()),t.replaceSelection(""),this.plugin.app.commands.executeCommandById("editor:focus")}catch(t){console.error("Cut failed:",t)}}))))},icon:"lucide-scissors"}),this.plugin.addCommand({id:"insert-callout",name:"Insert Callout(Modal)",icon:"lucide-quote",callback:()=>{new lo(this.plugin).open()}}),this.plugin.addCommand({id:"insert-link",name:"Insert Link(Modal)",icon:"lucide-link",callback:()=>{new co(this.plugin).open()}}),this.plugin.addCommand({id:"fullscreen-focus",name:"Fullscreen focus mode",hotkeys:[{modifiers:["Mod","Shift"],key:"F11"}],callback:()=>function(e){var o;Object.defineProperty(exports,"__esModule",{value:!0}),exports.toggleFull=exports.isFull=exports.exitFull=exports.beFull=void 0;let i=document.documentElement,n=i.querySelector("head"),s=document.createElement("style"),a="requestFullscreen",r="exitFullscreen",l="fullscreenElement";"webkitRequestFullScreen"in i?(a="webkitRequestFullScreen",r="webkitExitFullscreen",l="webkitFullscreenElement"):"msRequestFullscreen"in i?(a="msRequestFullscreen",r="msExitFullscreen",l="msFullscreenElement"):"mozRequestFullScreen"in i?(a="mozRequestFullScreen",r="mozCancelFullScreen",l="mozFullScreenElement"):"requestFullscreen"in i||console.log("当前浏览器不支持Fullscreen API !");const c=e.workspace.getActiveViewOfType(t.MarkdownView);if(!c)return;let d,u=c.containerEl,p=null===(o=document.body)||void 0===o?void 0:o.querySelector(".mod-vertical.mod-root .workspace-tab-container");function m(t){return t[a]()}function h(){return i.contains(s)&&(null==n||n.removeChild(s)),document[r]()}function g(t){return t===document[l]}d=new MutationObserver((function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){if(g(p))try{document.body.removeChild(t),u.appendChild(t)}catch(t){console.log(t.message)}}))}))})),p.addEventListener("fullscreenchange",(function(){g(p)||d.disconnect()})),g(p)?(d.disconnect(),h()):(m(p),d.observe(document.body,{childList:!0})),exports.beFull=m,exports.exitFull=h,exports.isFull=g,exports.toggleFull=function(t){return g(t)?(h(),!1):(m(t),!0)}}(app),icon:"fullscreen"}),this.plugin.addCommand({id:"workplace-fullscreen-focus",name:"Workplace Fullscreen Focus",callback:()=>function(e){ao=t.requireApiVersion("0.15.0")?activeWindow.document:window.document;let o=ao;e.workspace.leftSplit.collapsed&&e.workspace.rightSplit.collapsed?(e.commands.executeCommandById("app:toggle-right-sidebar"),e.commands.executeCommandById("app:toggle-left-sidebar"),e.workspace.leftRibbon.show(),o.body.classList.contains("auto-hide-header")&&o.body.classList.remove("auto-hide-header")):(o.body.classList.contains("auto-hide-header")||o.body.classList.add("auto-hide-header"),e.workspace.leftRibbon.hide(),e.workspace.leftSplit.collapsed||e.commands.executeCommandById("app:toggle-left-sidebar"),e.workspace.rightSplit.collapsed||e.commands.executeCommandById("app:toggle-right-sidebar"))}(app),hotkeys:[{modifiers:["Mod"],key:"F11"}],icon:"remix-SplitCellsHorizontal"});for(let t=0;t<=6;t++)this.plugin.addCommand({id:`header${t}-text`,name:0===t?"Remove header level":`Header ${t}`,callback:()=>{const e=this.getActiveEditor();e&&this.executeCommandWithoutBlur(e,(()=>s("#".repeat(t),e)))},icon:0===t?"heading-glyph":`header-${t}`});Object.keys(this._commandsMap).forEach((t=>{this.plugin.addCommand({id:`${t}`,name:`Toggle ${t}`,icon:`${t}-glyph`,callback:()=>{const e=this.getActiveEditor();e&&this.executeCommandWithoutBlur(e,(()=>{this.applyCommand(this._commandsMap[t],e)}))}})})),this.modCommands.forEach((t=>{this.plugin.addCommand({id:`${t.id}`,name:`${t.name}`,icon:`${t.icon}`,callback:()=>{const o=this.getActiveEditor();o&&this.executeCommandWithoutBlur(o,(()=>e(this,void 0,void 0,(function*(){const e=o.getCursor("to");let i=this.getCharacterOffset(t.id);yield this.plugin.app.commands.executeCommandById(`${t.id}`),0!=i&&o.setCursor(e.line,e.ch+i)}))))}})})),this.plugin.addCommand({id:"toggle-format-brush",name:"Toggle Format Brush",icon:"paintbrush",editorCallback:t=>{this.plugin.toggleFormatBrush()}}),this.registerCustomCommands();["toggle-bold","toggle-italics","toggle-strikethrough","toggle-highlight","toggle-code","toggle-blockquote","header0-text","header1-text","header2-text","header3-text","header4-text","header5-text","header6-text","format-eraser","change-font-color","change-background-color",...this.plugin.settings.customCommands.map((t=>`${t.id}`)),...Object.keys(this._commandsMap)].forEach((t=>{const e=this.plugin.app.commands.commands[`editing-toolbar:${t}`];if(e&&e.callback){const o=e.callback;e.callback=()=>{o(),this.plugin.setLastExecutedCommand(`editing-toolbar:${t}`)}}}))}getCharacterOffset(t){switch(t){case"editor:insert-tag":return 1;case"editor:insert-callout":return 11;default:return 0}}reloadCustomCommands(){this.plugin.settings.customCommands.forEach((t=>{const e=`${t.id}`;this.plugin.app.commands.commands[`editing-toolbar:${e}`]&&delete this.plugin.app.commands.commands[`editing-toolbar:${e}`]})),this.registerCustomCommands()}registerCustomCommands(){this.plugin.settings.customCommands.forEach((t=>{const e=`${t.id}`;this.plugin.addCommand({id:e,name:t.name,icon:t.icon,editorCallback:o=>{if(t.useRegex&&t.regexPattern)o&&this.executeCommandWithoutBlur(o,(()=>{this.applyRegexCommand(o,t),this.plugin.setLastExecutedCommand(`editing-toolbar:${e}`)}));else{const i={prefix:t.prefix,suffix:t.suffix,char:t.char,line:t.line,islinehead:t.islinehead};this._commandsMap[t.id]=i,o&&this.executeCommandWithoutBlur(o,(()=>{this.applyCommand(i,o),this.plugin.setLastExecutedCommand(`editing-toolbar:${e}`)}))}}})}))}get commandsMap(){return this._commandsMap}}class po extends t.Plugin{constructor(){super(...arguments),this.lastExecutedCommand=null,this.formatBrushActive=!1,this.formatBrushNotice=null,this.lastExecutedCommandName=null,this.handleeditingToolbar=()=>{if(1==this.settings.cMenuVisibility){const e=this.app.workspace.getActiveViewOfType(t.ItemView);let o=A(this.app,this);if(!E.isAllowedViewType(e)&&o)return void(o.style.visibility="hidden");"markdown"===(null==e?void 0:e.getViewType())?E.isSourceMode(e)?"following"===this.positionStyle?o&&(o.style.visibility="hidden"):o&&(o.style.visibility="visible"):o&&(o.style.visibility="hidden"):o&&(o.style.visibility="visible"),o||setTimeout((()=>{$(this.app,this)}),100)}},this.handleeditingToolbar_layout=()=>{if(!this.settings.cMenuVisibility)return!1;const e=this.app.workspace.getActiveViewOfType(t.ItemView);let o=A(this.app,this);if(!E.isAllowedViewType(e))return void(o&&(o.style.visibility="hidden"));"markdown"===(null==e?void 0:e.getViewType())?E.isSourceMode(e)?"following"===this.positionStyle?o&&(o.style.visibility="hidden"):o&&(o.style.visibility="visible"):o&&(o.style.visibility="hidden"):o&&(o.style.visibility="visible"),o||setTimeout((()=>{$(this.app,this)}),100)},this.handleeditingToolbar_resize=()=>{var e;if(1!=this.settings.cMenuVisibility||"top"!=this.positionStyle)return!1;{const o=app.workspace.getActiveViewOfType(t.ItemView);if(E.isSourceMode(o)){let o=null!==(e=this.app.workspace.activeLeaf.view.leaf.width)&&void 0!==e?e:0;if(this.Leaf_Width==o)return!1;if(o>0&&(this.Leaf_Width=o,this.settings.cMenuWidth&&o)){if(o-this.settings.cMenuWidth<78&&o>this.settings.cMenuWidth)return;setTimeout((()=>{(function(){M=t.requireApiVersion("0.15.0")?activeWindow.document:window.document;let e=M,o=e.querySelectorAll("#editingToolbarModalBar"),i=e.querySelectorAll("#editingToolbarPopoverBar");o.forEach((t=>{t&&(t.firstChild&&t.removeChild(t.firstChild),t.remove())})),i.forEach((t=>{t&&(t.firstChild&&t.removeChild(t.firstChild),t.remove())}))})(),$(app,this)}),200)}}}},this.handleKeyboardSelection=t=>{this.commandsManager.getActiveEditor(),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown","ShiftLeft","ShiftRight"].includes(t.code)||t.shiftKey?this.handleTextSelection():t.shiftKey||"following"!==this.positionStyle||this.hideToolbarIfNotSelected()}}onload(){var o;return e(this,void 0,void 0,(function*(){const e=this.manifest.version;console.log("editingToolbar v"+e+" loaded"),ro=t.requireApiVersion("0.15.0")?activeWindow.document:window.document,yield this.loadSettings(),this.settingTab=new io(this.app,this),this.addSettingTab(this.settingTab),this.commandsManager=new uo(this),this.commandsManager.registerCommands();const i=this.commandsManager.getActiveEditor();this.app.workspace.onLayoutReady((()=>{this.statusBar=new so(this),this.statusBar.init()})),this.init_evt(ro,i),t.requireApiVersion("0.15.0")&&this.app.workspace.on("window-open",(t=>{this.init_evt(t.doc,i)}));const n=(null===(o=this.settings)||void 0===o?void 0:o.lastVersion)||"0.0.0",s=t=>{const e=t.split(".").map((t=>parseInt(t)));return{major:e[0]||0,minor:e[1]||0,patch:e[2]||0}},a=s(n);s(e);const r=new Ue(this.app,this),l="0.0.0"===n;l&&r.fixCommandIds();!l&&(a.major<3||3===a.major&&a.minor<1)&&setTimeout((()=>{r.open()}),3e3),this.settings.lastVersion=e,yield this.saveSettings();app.plugins.enabledPlugins.has("obsidian-memos")&&this.registerEvent(this.app.workspace.on("thino-editor-created",this.handleeditingToolbar)),this.registerEvent(this.app.workspace.on("active-leaf-change",this.handleeditingToolbar)),this.registerEvent(this.app.workspace.on("layout-change",this.handleeditingToolbar_layout)),this.registerEvent(this.app.workspace.on("resize",this.handleeditingToolbar_resize)),1==this.settings.cMenuVisibility&&setTimeout((()=>{dispatchEvent(new Event("editingToolbar-NewCommand"))}),100),this.registerDomEvent(ro,"contextmenu",(e=>{if(this.settings.isLoadOnMobile&&t.Platform.isMobile&&"following"==this.positionStyle){const{target:t}=e;if(t instanceof HTMLElement){null!==t.closest(".cm-editor")&&e.preventDefault()}}})),Object.keys(no).forEach((e=>{t.addIcon(e,no[e])})),this.toolbarIconSize=this.settings.toolbarIconSize,this.positionStyle=this.settings.positionStyle,ro.documentElement.style.setProperty("--editing-toolbar-background-color",this.settings.toolbarBackgroundColor),ro.documentElement.style.setProperty("--editing-toolbar-icon-color",this.settings.toolbarIconColor),ro.documentElement.style.setProperty("--toolbar-icon-size",`${this.settings.toolbarIconSize}px`)}))}isLoadMobile(){var e;let o=window.innerWidth>0?window.innerWidth:screen.width,i=!!(null===(e=this.settings)||void 0===e?void 0:e.isLoadOnMobile)&&this.settings.isLoadOnMobile;return!(t.Platform.isMobileApp&&!i&&o<=768)||(console.log("editing toolbar disable loading on mobile"),!1)}onunload(){this.app.workspace.off("active-leaf-change",this.handleeditingToolbar),this.app.workspace.off("layout-change",this.handleeditingToolbar_layout),this.app.workspace.off("resize",this.handleeditingToolbar_resize),this.formatBrushNotice&&(this.formatBrushNotice.hide(),this.formatBrushNotice=null),this.quiteAllFormatBrushes(),q(),console.log("editingToolbar unloaded")}isView(){const e=this.app.workspace.getActiveViewOfType(t.ItemView);return E.isAllowedViewType(e)}setIS_MORE_Button(t){this.IS_MORE_Button=t}setEN_BG_Format_Brush(t){this.EN_BG_Format_Brush=t}setEN_FontColor_Format_Brush(t){this.EN_FontColor_Format_Brush=t}setEN_Text_Format_Brush(t){this.EN_Text_Format_Brush=t}setTemp_Notice(t){this.Temp_Notice=t}loadSettings(){return e(this,void 0,void 0,(function*(){this.settings=Object.assign({},T,yield this.loadData())}))}getCurrentCommands(e){if(!this.settings.enableMultipleConfig)return this.settings.menuCommands;let o=e||this.positionStyle;if(this.settings.isLoadOnMobile&&t.Platform.isMobileApp)return this.settings.mobileCommands;switch(o){case"following":return this.settings.followingCommands;case"top":return this.settings.topCommands;case"fixed":return this.settings.fixedCommands;default:return this.settings.menuCommands}}updateCurrentCommands(e){if(this.settings.enableMultipleConfig)if(this.settings.isLoadOnMobile&&t.Platform.isMobileApp)this.settings.mobileCommands=e;else switch(this.positionStyle){case"following":this.settings.followingCommands=e;break;case"top":this.settings.topCommands=e;break;case"fixed":this.settings.fixedCommands=e;break;default:this.settings.menuCommands=e}else this.settings.menuCommands=e}saveSettings(){return e(this,void 0,void 0,(function*(){yield this.saveData(this.settings)}))}setLastExecutedCommand(t){this.lastExecutedCommand=t;const e=this.app.commands.commands[t];if(e&&e.name)this.lastExecutedCommandName=e.name;else{const e=t.split(":");this.lastExecutedCommandName=e[e.length-1].replace(/-/g," ")}}toggleFormatBrush(){this.lastExecutedCommand?(this.formatBrushActive=!this.formatBrushActive,this.formatBrushActive?(this.EN_FontColor_Format_Brush=!1,this.EN_BG_Format_Brush=!1,this.EN_Text_Format_Brush=!1,this.formatBrushNotice&&this.formatBrushNotice.hide(),this.formatBrushNotice=new t.Notice(f("Format brush ON! Select text to apply【")+this.lastExecutedCommandName+f("】format"),0)):this.formatBrushNotice&&(this.formatBrushNotice.hide(),this.formatBrushNotice=null)):new t.Notice(f("Please execute a editingToolbar format command first, then enable the format brush"))}applyFormatBrush(e){if(!this.lastExecutedCommand||!this.formatBrushActive)return;const o=this.app.commands.commands[this.lastExecutedCommand];o&&o.callback&&o.callback(),o&&o.editorCallback&&o.editorCallback(e,this.app.workspace.getActiveViewOfType(t.MarkdownView))}quiteAllFormatBrushes(){this.EN_FontColor_Format_Brush=!1,this.EN_BG_Format_Brush=!1,this.EN_Text_Format_Brush=!1,this.formatBrushActive&&(this.formatBrushActive=!1,this.formatBrushNotice&&(this.formatBrushNotice.hide(),this.formatBrushNotice=null)),this.Temp_Notice&&(this.Temp_Notice.hide(),this.Temp_Notice=null)}getCommandsManager(){return this.commandsManager}reloadCustomCommands(){this.commandsManager.reloadCustomCommands()}init_evt(e,o){this.resetFormatBrushStates();const i=t.debounce((()=>{this.handleTextSelection()}),100);let n=0;this.registerDomEvent(e,"mousedown",(t=>{if(this.isView()&&this.commandsManager.getActiveEditor()){if(1===t.button){const e=(new Date).getTime();e-n<300&&this.handleMiddleClickToolbar(t),n=e}this.resetFormatBrushIfActive(t)}})),t.Platform.isMobileApp?this.registerDomEvent(e,"selectionchange",(()=>{i()})):this.registerDomEvent(e,"mouseup",(t=>{1!==t.button&&i()})),this.registerDomEvent(e,"keyup",this.handleKeyboardSelection),this.registerScrollAndBlurEvents(e)}resetFormatBrushStates(){this.EN_FontColor_Format_Brush=!1,this.EN_BG_Format_Brush=!1,this.EN_Text_Format_Brush=!1,this.formatBrushActive=!1}handleMiddleClickToolbar(t){const e=this.commandsManager.getActiveEditor();"following"===this.positionStyle&&(null==e?void 0:e.hasFocus())&&this.showFollowingToolbar(e)}resetFormatBrushIfActive(t){t.button&&this.isFormatBrushActive()&&L(this)}isFormatBrushActive(){return this.EN_FontColor_Format_Brush||this.EN_BG_Format_Brush||this.EN_Text_Format_Brush||this.formatBrushActive}registerScrollAndBlurEvents(t){const e=this.throttle((()=>{"following"===this.positionStyle&&this.hideToolbarIfNotSelected()}),200);this.registerDomEvent(ro,"wheel",e),this.registerDomEvent(t,"blur",(()=>{this.hideToolbarIfNotSelected()}))}hideToolbarIfNotSelected(){const t=A(this.app,this);t&&"following"==this.positionStyle&&(t.style.visibility="hidden")}handleTextSelection(){if(!this.isView())return;const t=this.commandsManager.getActiveEditor();(null==t?void 0:t.hasFocus())&&(t.somethingSelected()?this.handleSelectedText(t):this.hideToolbarIfNotSelected())}handleSelectedText(t){this.EN_FontColor_Format_Brush?a(this.settings.cMenuFontColor,t):this.EN_BG_Format_Brush?r(this.settings.cMenuBackgroundColor,t):this.EN_Text_Format_Brush?R(0,t):this.formatBrushActive&&this.lastExecutedCommand?this.applyFormatBrush(t):"following"===this.positionStyle&&this.showFollowingToolbar(t)}throttle(t,e=100){let o;return function(...i){const n=this;o||(t.apply(n,i),o=!0,setTimeout((()=>o=!1),e))}}showFollowingToolbar(t){const e=A(this.app,this);e?(e.style.visibility="visible",e.classList.add("editingToolbarFlex"),e.classList.remove("editingToolbarGrid"),P(this.app,this.toolbarIconSize,this,t,!0)):P(this.app,this.toolbarIconSize,this,t,!0)}onPositionStyleChange(e){if(this.positionStyle=e,this.settings.enableMultipleConfig)switch(e){case"following":this.settings.followingCommands&&0!==this.settings.followingCommands.length||(this.settings.followingCommands=[...this.settings.menuCommands],this.saveSettings(),new t.Notice(f("Following style commands successfully initialized")));break;case"top":this.settings.topCommands&&0!==this.settings.topCommands.length||(this.settings.topCommands=[...this.settings.menuCommands],this.saveSettings(),new t.Notice(f("Top style commands successfully initialized")));break;case"fixed":this.settings.fixedCommands&&0!==this.settings.fixedCommands.length||(this.settings.fixedCommands=[...this.settings.menuCommands],this.saveSettings(),new t.Notice(f("Fixed style commands successfully initialized")));break;case"mobile":this.settings.mobileCommands&&0!==this.settings.mobileCommands.length||(this.settings.mobileCommands=[...this.settings.menuCommands],this.saveSettings(),new t.Notice(f("Mobile style commands successfully initialized")))}dispatchEvent(new Event("editingToolbar-NewCommand"))}}module.exports=po;


/* nosourcemap */