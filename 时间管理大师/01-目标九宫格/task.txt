故障切换
本周进展
1.梳理目前1300 现有session优化流程
2. 商定vrank新版本对session改造4个（预重连，killsession2个，tick）
3.持续跟新场景 内核客户端异常和断流bug等
下周计划：
1. 3秒预重连实现。
2.  tell命令和daemon命令实现过程，准备实现killsession。





70896  shutdown卡住

遗漏问题：
1. 在rejon阶段 出现core了2次。分析中，
2. 合并jiangbuqing代码，在试试

7668 
修改内容：recover扫描 增加 是否判断 mtime参数


70773 增量mds快速切换






Pacific竞品分析报告分享--软件部分
#腾讯会议：631-711-141
点击链接入会，或添加至会议列表：
https://ieisystem.meeting.tencent.com/dm/EhNbldsvkMka






《BeeGFS并行文件系介绍》
#腾讯会议：418-259-2568
会议密码：902561
https://meeting.tencent.com/p/4182592568




合并到master
git checkout master
#把本地分支合并到master
git merge issue_1400
git push origin master

快切是给网络故障，节点故障场景下使用的，这个时候怎么能只down一个服务呢？
你加了压根也不会这样用，要是有单独down mds的需求可以单独开发命令，那就不是快切的使用场景



1. 整理常见的osd,MDS命令
2. 学习李伟的使用手册。




  本发明存储节点故障情况下，快速重启元数据服务，包括：
（1）	基于c++11 实现支持任何所锁类型的同步机制模板类、
（2）	基于（1）的同步读取数据改为异步读取。
（3）	基于（1）的方式改为mds死锁改为正常释放。



3个印象深刻，2个收获，1个行动

3个印象：
1. 完成后有什么成就感，没说上来，显示没有强烈动机，其实 没有这样认知 不相信 通过努力改变
2. 从当前状态a到目标b，路径是什么、在降低难度上，例如2年时间实现，每个月 提交pr。每天 投入30分钟，一周投入多次时间，自己从来没有计算过。
    只知道投入就可以来了
3. 如何降低问题难度感觉、例如考研难，找bat工作难，加入社群，咨询专家完成60%

2个收获
1. 工作事情不能100%和目标保持一致，至少50%保持一致。完全靠业务晚上时间学习 不行的，至少前面精力总结告诉你。
 从完全不相干 到相关 到入门

2. 明确计算出来 怎么实现，这个模糊，没有人说我投入多少时间一定实现达到效果。
  不过按照目前速度其实给个预估的，
 脑子想都是难难难，不开始。

3. 不应届生等比较。

1个小行动
1. 根据计算每天投入30分钟，持续1个月，过做到打个对号
2. 投入不了30分钟也没 关系。但是不能间断，因为一次中断，后面1个月，一年彻底中断了（之前往往是这样的）


问题：如何迈开职位规划第一步

重新描述年度计划和个人尝试

1. 工作事业与学习部分。【世界观】

	工作毕业后进入外包，电信这样公司行业，这样公司随时倒闭 ，产生了如何世界接轨想法。

        经过几年准备面试刷题，看书，并且拿到不少offer，但是进入bat大公司迟迟等到，都是3面无法进入，或者很好职位面过了，个人认知补足迟迟推迟。
   
       


2. 个人认知 ：选择对了，准备对了，但是长时间外包还是晚睡不良习惯上，很多时间没有开始。





 



Ceph是一个去中心化的分布式存储系统， 提供较好的性能、可靠性和可扩展性
用





MDS状态机


摘要：
本文着重介绍了OBD（OceanBase Deployer）在开发环境部署源码编译OceanBase以及代码变动后如何替换 和简单的压测
学习如何编译OceanBase，并掌握编译后的升级方法，为深入研究和应用OceanBase提供指导。

obd mirror 
update 
obd mirror create 
OceanBase Deployer（简称 OBD）

魔法师：只要默念一次就可以，

你昨天已经清理了邮箱，今天早上不需要在查看一次
你昨天已经处理社交blog上信息，今天不需要查看一次
你昨天已经安排事情。今天直接开始完成就可以。
你做到早睡早起，9点准备都就是超过50%人了。
虽然不是6点起床。现在就是最好时间。
9:00点就是高效时间段

只管去做 开始

 8:30: 到:10:00  源码阅读90分钟 一个足球比赛时间。

mysql --comments -h 127.0.0.1 -P 4000 -u root -pBW07-+5vE36q@b*9RA
show database;



我很想希望知道真相

删除优化的概设上传到SVN了，大家可以参考

后续分享培训提个要求：
对于会上不吱声的，我就认为你听懂了，我会挑一些问题去问你，根本目的是希望大家专业能力能快速提升，也请大家理解@全部成员

删除优化的概设上传到SVN了，大家可以参考

后续分享培训提个要求：
对于会上不吱声的，我就认为你听懂了，我会挑一些问题去问你，根本目的是希望大家专业能力能快速提升，也请大家理解@全部成员TPC-H 

ob4.2源码搭建单机搭建完成，新特性体验该写什么？

OBD 已集成了Sysbench、TPC-C、TPC-H 三种常用测试工具。准备写个跑分对比

https://www.yuque.com/yiyezhou/rgak0e/lcxg27okp4c6506w


请帮忙写一篇经验总结稿子
内容是：因为疫情参加pmp考试，不断被推迟，最后自己1个月时间，通过做题，然后通过了，其中一个细节是，一直出差，耽误做题，

因为前面做题经验，最后没有做完，通过了，结论是人人可以通过考试



每日一句话总结：

别人想更深入学习更多知识和原理
1， 你从来没阻止他们，更教育不对。1个年你时间精力上面根本没有必要，担心比人走偏，别人学习知识和能力多的多。不讨论

2. 如果他们更多，你他们获取，你不知道的。不需要自责。因为判断方向不对的，你纠正1年没用




--------------------------
如何开始自己专业方面的计划？

【现状】
指定年度计划后，
1. 关于早睡早起和运动，虽然结果不是很好，但是已经开始了，并且总结了一套方法。
2. 自己在专业技术，研究开源数据库项目迟迟没有开始，
一个问题是：难度大，而是不会有人全方面支持，需要自己探索
一个问题是：工作加班很晚，一耽误几个月过去了，迟迟没有开启。
【做过尝试】
这里主要在专业方面。
1. 加入相关开源社区群，学习xxx技术，但是最后大家参与不高
2. 指定阅读计划，但是每天还是忙，没时间耽误了。
【期望结果】
在事业和学习方面，迟迟没有开启，如何开启。









1. 我是新手，我要学习ceph mds如何使用和源码
2. 学会同事沟通：忙碌8小时，从来不说话
3. 学会领导沟通：我个性这样无法改变，逃避一万次次，什么不说远远躲避

上班那些事
【自己一个人可以完成】
1. 上班时间检查番茄时间 工作25分钟，休息5分钟，然后看一下第一个青蛙是否完成
2. 坐正连续，坐姿正确,弯腰驼背，高低肩，8小时，价值百万事情，让你弯腰不会的
3. 每天5:00- 5:30固定时间看微信一次。其他时间不看手机和微信
【沟通需要完成】
 1. 积极主动，发现问题，挑战问题。最擅长事情 一次
当天事情完成，当天汇报。


 


技术债务迟早要还的故事
看到这个语法我感觉有问题，但是编译通过你
你放过去了今天编译报错了，债务要偿还的。

小王：
c++我昨天编译过的代码，今天什么没修改，然后编译错了
然后重新搭建一个环境，重新执行n次
3个小时过去了，还是出错？生气，，生气 生气

老王：
1. 你担心个人操作导致环境不对是错误的理解，绝对相信编译器。
2. 之前正确的，现在错误了很多人纠结。
昨天正确 是错误理解，之前也是错误的，只是么有暴露出来
【这才是隐藏知识点，不敢直面问题】

正确做法：
针对问题解决问题。








使用完毕微信后马上关闭 
上班时间不打开微信+1




衡量标准：做好一个普工人，才是最伟大的人，最高尚的人，才是发真心的
1. 腾讯视频，综艺各种视频，新闻平台 希望用户一辈子无起床。看他们

起床这个小兴趣是你渴望的的，你坚持做好，熟练，领先
是一个不需要别人同意做事情。
1，你去211 需要那650分钟 确认
2. 你去大企业，拿出专业知识确认
3，你视频需要大量网络确认确认
只需要自己支持就可以完成事情、




石器时代
1. 早晨感觉困然后不起床
2. 没行到未来1000天时间内，你都那这个借口不起床
3. 更没想到工作，学习生活出现，让不起床成为逃避这些问题借口
4. 对比：一个为第一个问题起床 苦苦挣扎，一个是拿着好的工作，方向对比根本去做了
黄金时代：
排查干扰
1. 5:30 闹钟开始起床
2. 给30分钟挣扎时间 5秒起床
3  六点起床 
4 在挣扎一次 6:15起床


---------------------------------------------------------------
5月6日
环境的力量
角落吃饭==吃饭看视，这个吃饭地方问题。去窗口吃饭。

小王：吃饭专心吃饭，结果吃饭看综艺视频了，说了10000次，每次做不，然后放弃吗？
老王：错，你已经指定计划，按照你计划执行，因为一次看视频消耗之前全部积累。
一念天堂，一念地狱。
想明白，一万年不看腾讯视频一次，不打开，吃饭这个环境破坏你意念，【做了】
不是你问题，是吃饭位置问题，为什么每次去角落吃饭。这个地方自然吃饭看视频。

建议
1. 观察到这个行为，背诵2次你计划 【做了】
2. 手机直接锁屏，开启禅定方式。（做了）
3. 最重要 不要去角落吃饭，角落吃饭==吃饭看视频 +1 

吃饭专心吃饭的关键 坐在第一排吃饭，克服手机问题，千万次克服千万次失控。



--------------------------------------------------------------------------
小王：吃饭专心吃饭，结果吃饭看综艺视频了，说了10000次，每次做不到？
老王：错，你已经指定计划，按照你计划执行，因为一次看视频消耗之前全部积累。
建议
1. 观察到这个行为，背诵2次你计划
2. 手机直接锁屏，开启禅定方式。




小王：主要任务没有完成，你去看网页搜索爬虫问题 60分钟过去了，网上搜索毫无价值。
老王：解决方法
（1） 马上停止
 （2） 关闭电脑

------------------------------------------------------------------------------------

战托日志
计划：5秒专心一个事情。
结果：3个小时过去了，还没有开始，瞎看什么呢
优化：直接开始 从3个小时变成10分钟。


第一步. 记录强哥思考
	https://github.com/watchpoints/do-book
      来源：各种社交平台
第二步. 形成电子书
   https://wangcy6.gitbook.io/do_book/
第三步：训练强哥机器人
随时对话，随时查询


开源协作： https://github.com/watchpoints/do-book
电子：https://wangcy6.gitbook.io/do_book/



想法：
发现强哥理论，需要等到1周，一个月之后才能看懂，用到实际中。
一周，一个月，3个月 强哥视频，文章 还有各种博客等内容忘记了，找不到了。
需要一个快速查找，强哥理论的一个平台。并且文字记录。


======================================================================





例子：开启副业的关键行为不是找到适合你的“副业”，而是“开启”，也就是直接去尝试
仿照
要点：高效投入关键是5秒内马上开启，不是感悟人生，不是后悔过去，更不是担心考虑各种事情。
理论：
     遇到枯燥乏味，选择沉浸
️ 遇到挫败难过，选择重启
️ 遇到成长难题，孵化行动
放下+沉浸+重启+行动=只管去做

行动：5秒内 ，马上专注一个事情



======================================================================


总结：
  告诉比人学习重要知识，是自己逃避问题表现，你第一时间应该去完成你事情，不是在瞎扯

例子：
自己完成自己目标，实现你计划就是对别人最好榜样
不要哀求比人这个方向好你学吧，这个知识点好你学吧
你今天在这么有出现了，别人根本不需要，甚至找出一大堆毛病出来。






----------------------------------------------------------------------------



固定起床的关机


开启副业的关键行为不是找到适合你的“副业”，而是“开启”，也就是直接去尝试

小王：
工作6个小时，坐姿不正确6个小时，休息01次，这是找死。
没有思路，状态不对。

提高：
1. 无论题目多难保证坐姿正确
2.没有思路，站起来想一想

执行次数 +1 





小王：做不到21点，22点 23点准时离开电脑改怎么？
尝试：
21点设置电脑 22点 自动关机，第三天自己解锁了彻底删除。
自己当天删除100次，第二天在设置回来。围绕删除你斗争1000次。

继续吗：
你还是设置 21点 22点 23点自动关机，21点 22点 23点学习效果很差，并且导致第二天无法起来。

继续：
  懒人大发，不依靠自制力离开电脑。你明确 21 22 23点 晚上三个小时，移动早晨来完成。  5点  6点 7点 。




只要一个环节不成立，恶性循怪圈根本不会发生。
但是养成一良性的循环，每个关卡都要通关

推演一次：
公司电脑你设置自动关机，然后回家自己电脑不设置，自然晚上21点 22点 23点继续看，并且投入更多时间，还是和以前习惯一样。

结果：
如果如此，你关闭一个电脑，另外一个电脑不关闭，果然有问题，你解锁一个然解锁全部







进入工作安排

日复盘


微信公共号执行内容发布到其他群里


  "channel_type": "wechatmp",    # 如果通过了微信认证，将"wechatmp"替换为"wechatmp_service"，可极大的优化使用体验
  "wechatmp_token": "testtest",       # 微信公众平台的Token
  "wechatmp_port": 80,            #微信公众平台的端口,需要端口转发到80或443
  "wechatmp_app_id": "wx94e03776e64ee600",      # 微信公众平台的appID
  "wechatmp_app_secret": "a0af4a82bdb4a2d17af867a321da4c83",  # 微信公众平台的appsecret
  "wechatmp_aes_key": "Quk4OepZpDVkhWnevUNnOXfoynwT1gg83cYdBpaZXYP",         # 微信公众平台的EncodingAESKey，加密模式需要
  "plugin_trigger_prefix": "&",   # 推荐设置，在手机微信客户端中，$%^等符号与中文连在一起时会自动显示一段较大的间隔，用户体验不好。请不要使用管理员指令前缀"#"，这会造成未知问题。
考勤：



从不做到做转变

看到别人飞机速度，自己蜗牛速度，自己彻底乱了，

把自己改造别人根本不科可能，最后蜗牛速度没有。

你按照你节奏去做就。出发就是代表决心和判断。





1. 阅读总结填写

要不要问他比人有没哟做事情总---自己马上完成做了，了，自己问比人一次中断

你自己去做就好了，需要一天，一周，一个月 甚至一年才能有开花结果，这个过程自己默默坚持。



1. 你提醒别人三次，最后还是没有绘制。结果还是这样的。你担心了很长时间，
  导致你精力和状态都不好，这是你问他，时间和精力不浪费在担心别人身上。
   -------关注结果，关注结果---关注结果。--关注结果。
保证自己活下来，别整体想着教育别人。


一. mds stop 卡顿问题，代码评审三次。
  1. save load 排查范围 不全，recover线程和replay线程都要处理
 2. c++代码规范 空格。提交后自己检测一次
 3. 代码冗余度
二。vrank 学习总结 ppt制作 10%


 
学习了解vrak和uv4功功能为主

输出 学习总结 ppt制作 10%


1.总结： 集中精力解决一个问题，才能解决下一个问题。




定位 stop mds进程卡主原因


1. 修复 stop mds进程卡主
2.  阅读mds重启流程




8.nfs挂载
  （1）mount      //查看当前的挂载点及类型，直接输入df也可以
  （2）systemctl status ganesha //查看ganesha服务状态
   (3) systemctl start ganesha  //启用ganesha.起不来的话用restart
   (4) icfs-admin-nfs   --query        //查询共享的nfs目录
   (5）mount -t nfs IP：共享目录 挂载目录 -o vers=3  //挂载目录，mount -t nfs 100.2.83.236:/.  /mnt/nfs1 -o vers=3
  （6）umount 目录 //卸载  umount /mnt/nfs1     //nfs 具体内容可在实施手册中查找nfs  
   (7)创建共享目录
 [root@Server ~]#icfs-admin-nfs --create -p /home/inspur/nfsshare -a rw-d     //例：创建根目录为共享目录icfs-admin-nfs --create -p  /. -a rw-d
 
   说明：在nfs挂载点下无法使用 icfs-query-dir 目录  self 来查询目录所属mds，可以再挂载一个fuse,在fuse挂载点下使用该命令查询
 3）删除共享目录
[root@Server ~]#icfs-admin-nfs --delete -p /home/inspur/nfsshare


ganesha、 ganesha


现场Beegfs机器出现

日常巡检工作
解决Beegfs集群常见故障 例如磁盘存活，网卡故障和参数配置为生效


1. 熟悉 mds 重启流程
2. 解决 停止 ods,mon 然后停止mds 慢的问题



beegfs本身bug问题解决流程
1. 与原厂英语沟邮件/当前沟通
2. 下个版本是否修复
3. 原厂更新慢，针对源码进行修复。



1 问题 Beegf 节点存在单点,解决办法  Pacemaker+Corosync实现负载均衡和高可用.
2 Beegf 节点存在单点,解决办法  Pacemaker+Corosync实现负载均衡和高可用.



1 问题 Beegf 节点存在单点,解决办法  Pacemaker+Corosync实现负载均衡和高可用.
2 问题 数据分级迁移文件筛选，解决办法 全量扫描元数据到sqlie3中。

结果：


WA

beegfs7.2.2 版本使用 buddy-mirror



背景: AS13000G6-H 采用开源Beegfs文件系统架构，使用人工智能、高性能场景。

任务: 在高可用和分级存储方面优化Beegfs系统

个人角色：研发

结果：

1. Beegfs 管理节点 和元数据存在单点故障，会造成部分数据无法访问或者负载不均衡情况
    采用：Pacemaker+Corosync实现负载均衡和高可用
        beegfs7.2.2以后版本使用 buddy-mirror比较稳定

2. 分级迁移增量文件判断
   多线程扫描文件存储到数据库中，对文件查找变成sql命令。

衡量：
开源软件需要优化才能应用到生产。



1. 存储节点：高性能：IO + JBOD
   采用：Pacemaker+Corosync实现负载均衡和高可用
     启动

2. 数据分层：Beegfs数据分级迁移 
3. 计算节点：Burst Buffer
个人角色：研发
结果：

1 问题 Beegf 节点存在单点,解决办法  Pacemaker+Corosync实现负载均衡和高可用.
2 问题 数据分级迁移文件筛选，解决办法 全量扫描元数据到sqlie3中。

结果衡量：



